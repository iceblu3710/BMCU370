<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BMCU370 Firmware: Adafruit_NeoPixel Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">BMCU370 Firmware
   </div>
   <div id="projectbrief">Modified BMCU-C 370 Hall firmware</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('class_adafruit___neo_pixel.html','','class_adafruit___neo_pixel-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Adafruit_NeoPixel Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Class that stores state and functions for interacting with Adafruit NeoPixels and compatible devices.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aac61dab69181d4554be8cdde40e4bce6" id="r_aac61dab69181d4554be8cdde40e4bce6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aac61dab69181d4554be8cdde40e4bce6">Adafruit_NeoPixel</a> (uint16_t n, int16_t <a class="el" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>=6, <a class="el" href="_adafruit___neo_pixel_8h.html#ab88a50d51bb5488df4379ff49c81fd72">neoPixelType</a> type=<a class="el" href="_adafruit___neo_pixel_8h.html#a95d0d6b0a1f52bc72d9dcea2b3a48e3f">NEO_GRB</a>+<a class="el" href="_adafruit___neo_pixel_8h.html#a475fef7028a743310aa4311a97899d5d">NEO_KHZ800</a>)</td></tr>
<tr class="memdesc:aac61dab69181d4554be8cdde40e4bce6"><td class="mdescLeft">&#160;</td><td class="mdescRight">当长度、引脚和像素类型在编译时已知时的NeoPixel构造函数  <br /></td></tr>
<tr class="memitem:a2a7ab8a0cedee029cd5330b638146ccc" id="r_a2a7ab8a0cedee029cd5330b638146ccc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2a7ab8a0cedee029cd5330b638146ccc">Adafruit_NeoPixel</a> (void)</td></tr>
<tr class="memdesc:a2a7ab8a0cedee029cd5330b638146ccc"><td class="mdescLeft">&#160;</td><td class="mdescRight">“空”NeoPixel构造函数，当长度、引脚和/或像素类型在编译时未知， 需后续用updateType()、updateLength()和setPin()初始化。  <br /></td></tr>
<tr class="memitem:a61b1bd003a291520a367ab1712d6265c" id="r_a61b1bd003a291520a367ab1712d6265c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a61b1bd003a291520a367ab1712d6265c">~Adafruit_NeoPixel</a> ()</td></tr>
<tr class="memdesc:a61b1bd003a291520a367ab1712d6265c"><td class="mdescLeft">&#160;</td><td class="mdescRight">释放Adafruit_NeoPixel对象，将数据引脚恢复为输入模式。  <br /></td></tr>
<tr class="memitem:a8a44d3d56666547290d151ab4c44cf91" id="r_a8a44d3d56666547290d151ab4c44cf91"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8a44d3d56666547290d151ab4c44cf91">begin</a> (void)</td></tr>
<tr class="memdesc:a8a44d3d56666547290d151ab4c44cf91"><td class="mdescLeft">&#160;</td><td class="mdescRight">配置NeoPixel引脚为输出模式。  <br /></td></tr>
<tr class="memitem:a4bcda7a15591065570d3598cbf970be7" id="r_a4bcda7a15591065570d3598cbf970be7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4bcda7a15591065570d3598cbf970be7">show</a> (void)</td></tr>
<tr class="memdesc:a4bcda7a15591065570d3598cbf970be7"><td class="mdescLeft">&#160;</td><td class="mdescRight">将RAM中的像素数据传输到NeoPixels。  <br /></td></tr>
<tr class="memitem:aa1898f089b9a4e02841cec2e63b88c33" id="r_aa1898f089b9a4e02841cec2e63b88c33"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa1898f089b9a4e02841cec2e63b88c33">setPin</a> (int16_t p)</td></tr>
<tr class="memdesc:aa1898f089b9a4e02841cec2e63b88c33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set/change the NeoPixel output pin number. Previous pin, if any, is set to INPUT and the new pin is set to OUTPUT.  <br /></td></tr>
<tr class="memitem:ab8763ccc6f9a090df1f753905fd5561e" id="r_ab8763ccc6f9a090df1f753905fd5561e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab8763ccc6f9a090df1f753905fd5561e">setPixelColor</a> (uint16_t n, uint8_t r, uint8_t g, uint8_t b)</td></tr>
<tr class="memdesc:ab8763ccc6f9a090df1f753905fd5561e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a pixel's color using separate red, green and blue components. If using RGBW pixels, white will be set to 0.  <br /></td></tr>
<tr class="memitem:ac7b3529b3d190f3af5d8e5b9ead27688" id="r_ac7b3529b3d190f3af5d8e5b9ead27688"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac7b3529b3d190f3af5d8e5b9ead27688">setPixelColor</a> (uint16_t n, uint8_t r, uint8_t g, uint8_t b, uint8_t w)</td></tr>
<tr class="memdesc:ac7b3529b3d190f3af5d8e5b9ead27688"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a pixel's color using separate red, green, blue and white components (for RGBW NeoPixels only).  <br /></td></tr>
<tr class="memitem:a19fc274330c0e65907929ee03b93b1c3" id="r_a19fc274330c0e65907929ee03b93b1c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a19fc274330c0e65907929ee03b93b1c3">setPixelColor</a> (uint16_t n, uint32_t c)</td></tr>
<tr class="memdesc:a19fc274330c0e65907929ee03b93b1c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a pixel's color using a 32-bit 'packed' RGB or RGBW value.  <br /></td></tr>
<tr class="memitem:a310844b3e5580056edf52ce3268d8084" id="r_a310844b3e5580056edf52ce3268d8084"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a310844b3e5580056edf52ce3268d8084">fill</a> (uint32_t c=0, uint16_t first=0, uint16_t count=0)</td></tr>
<tr class="memdesc:a310844b3e5580056edf52ce3268d8084"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill all or part of the NeoPixel strip with a color.  <br /></td></tr>
<tr class="memitem:aa05f7d37828c43fef00e6242dcf75959" id="r_aa05f7d37828c43fef00e6242dcf75959"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa05f7d37828c43fef00e6242dcf75959">setBrightness</a> (uint8_t)</td></tr>
<tr class="memdesc:aa05f7d37828c43fef00e6242dcf75959"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjust output brightness. Does not immediately affect what's currently displayed on the LEDs. The next call to <a class="el" href="#a4bcda7a15591065570d3598cbf970be7" title="将RAM中的像素数据传输到NeoPixels。">show()</a> will refresh the LEDs at this level.  <br /></td></tr>
<tr class="memitem:ae259682b202be0acd258d6879f4c7121" id="r_ae259682b202be0acd258d6879f4c7121"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae259682b202be0acd258d6879f4c7121">clear</a> (void)</td></tr>
<tr class="memdesc:ae259682b202be0acd258d6879f4c7121"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill the whole NeoPixel strip with 0 / black / off.  <br /></td></tr>
<tr class="memitem:a74e917093c2eb16848c4a09427680f79" id="r_a74e917093c2eb16848c4a09427680f79"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a74e917093c2eb16848c4a09427680f79">updateLength</a> (uint16_t n)</td></tr>
<tr class="memdesc:a74e917093c2eb16848c4a09427680f79"><td class="mdescLeft">&#160;</td><td class="mdescRight">更改已声明的Adafruit_NeoPixel灯带对象的长度。旧数据会被释放，新数据会被清空。 引脚号和像素格式不变。  <br /></td></tr>
<tr class="memitem:a07b6949674125159484e9e02ef025f7d" id="r_a07b6949674125159484e9e02ef025f7d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a07b6949674125159484e9e02ef025f7d">updateType</a> (<a class="el" href="_adafruit___neo_pixel_8h.html#ab88a50d51bb5488df4379ff49c81fd72">neoPixelType</a> t)</td></tr>
<tr class="memdesc:a07b6949674125159484e9e02ef025f7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">更改之前声明的像素格式 Adafruit_NeoPixel灯带对象。如果格式从一个变为另一个 将RGB变体转换为RGBW变体（或将RGBW转换为RGB），旧的 数据将被释放，新数据将被清空。否则， 旧数据将保留在RAM中，并且不会重新排序到 由于是新格式，建议随后执行 <a class="el" href="#ae259682b202be0acd258d6879f4c7121" title="Fill the whole NeoPixel strip with 0 / black / off.">clear()</a> 操作。  <br /></td></tr>
<tr class="memitem:a9e900a60b0ac2b43b99309bb118b929e" id="r_a9e900a60b0ac2b43b99309bb118b929e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9e900a60b0ac2b43b99309bb118b929e">canShow</a> (void)</td></tr>
<tr class="memdesc:a9e900a60b0ac2b43b99309bb118b929e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether a call to <a class="el" href="#a4bcda7a15591065570d3598cbf970be7" title="将RAM中的像素数据传输到NeoPixels。">show()</a> will start sending data immediately or will 'block' for a required interval. NeoPixels require a short quiet time (about 300 microseconds) after the last bit is received before the data 'latches' and new data can start being received. Usually one's sketch is implicitly using this time to generate a new frame of animation...but if it finishes very quickly, this function could be used to see if there's some idle time available for some low-priority concurrent task.  <br /></td></tr>
<tr class="memitem:ab484e9a9da6f1089091c2cda1a0841a7" id="r_ab484e9a9da6f1089091c2cda1a0841a7"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab484e9a9da6f1089091c2cda1a0841a7">getPixels</a> (void) const</td></tr>
<tr class="memdesc:ab484e9a9da6f1089091c2cda1a0841a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a pointer directly to the NeoPixel data buffer in RAM. Pixel data is stored in a device-native format (a la the NEO_* constants) and is not translated here. Applications that access this buffer will need to be aware of the specific data format and handle colors appropriately.  <br /></td></tr>
<tr class="memitem:ab1b7af02712d6a1e228783a89ec12832" id="r_ab1b7af02712d6a1e228783a89ec12832"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab1b7af02712d6a1e228783a89ec12832">getBrightness</a> (void) const</td></tr>
<tr class="memdesc:ab1b7af02712d6a1e228783a89ec12832"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the last-set brightness value for the strip.  <br /></td></tr>
<tr class="memitem:ac2d69741bcce8ad0b61c66757952db8e" id="r_ac2d69741bcce8ad0b61c66757952db8e"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac2d69741bcce8ad0b61c66757952db8e">getPin</a> (void) const</td></tr>
<tr class="memdesc:ac2d69741bcce8ad0b61c66757952db8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the pin number used for NeoPixel data output.  <br /></td></tr>
<tr class="memitem:a515921e2c768750698f199c27613a143" id="r_a515921e2c768750698f199c27613a143"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a515921e2c768750698f199c27613a143">numPixels</a> (void) const</td></tr>
<tr class="memdesc:a515921e2c768750698f199c27613a143"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of pixels in an <a class="el" href="class_adafruit___neo_pixel.html" title="Class that stores state and functions for interacting with Adafruit NeoPixels and compatible devices.">Adafruit_NeoPixel</a> strip object.  <br /></td></tr>
<tr class="memitem:abccaba27e35bfae27c856e76b46c7924" id="r_abccaba27e35bfae27c856e76b46c7924"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abccaba27e35bfae27c856e76b46c7924">getPixelColor</a> (uint16_t n) const</td></tr>
<tr class="memdesc:abccaba27e35bfae27c856e76b46c7924"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query the color of a previously-set pixel.  <br /></td></tr>
<tr class="memitem:a914f61b78e4d36a03c91372ceded2d46" id="r_a914f61b78e4d36a03c91372ceded2d46"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a914f61b78e4d36a03c91372ceded2d46">rainbow</a> (uint16_t first_hue=0, int8_t reps=1, uint8_t saturation=255, uint8_t <a class="el" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>=255, bool gammify=true)</td></tr>
<tr class="memdesc:a914f61b78e4d36a03c91372ceded2d46"><td class="mdescLeft">&#160;</td><td class="mdescRight">用一个或多个色调循环填充NeoPixel灯带。 大家都非常喜欢彩虹漩涡，现在它可是经典了！  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-static-methods" class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:afb00024000da81bcb6378c7052f77be3" id="r_afb00024000da81bcb6378c7052f77be3"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afb00024000da81bcb6378c7052f77be3">sine8</a> (uint8_t x)</td></tr>
<tr class="memdesc:afb00024000da81bcb6378c7052f77be3"><td class="mdescLeft">&#160;</td><td class="mdescRight">An 8-bit integer sine wave function, not directly compatible with standard trigonometric units like radians or degrees.  <br /></td></tr>
<tr class="memitem:ab932cb619cd3420f9e3f269b7401710e" id="r_ab932cb619cd3420f9e3f269b7401710e"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab932cb619cd3420f9e3f269b7401710e">gamma8</a> (uint8_t x)</td></tr>
<tr class="memdesc:ab932cb619cd3420f9e3f269b7401710e"><td class="mdescLeft">&#160;</td><td class="mdescRight">An 8-bit gamma-correction function for basic pixel brightness adjustment. Makes color transitions appear more perceptially correct.  <br /></td></tr>
<tr class="memitem:ae7c444138dd0e6ac1008621d0a67048b" id="r_ae7c444138dd0e6ac1008621d0a67048b"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae7c444138dd0e6ac1008621d0a67048b">Color</a> (uint8_t r, uint8_t g, uint8_t b)</td></tr>
<tr class="memdesc:ae7c444138dd0e6ac1008621d0a67048b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert separate red, green and blue values into a single "packed" 32-bit RGB color.  <br /></td></tr>
<tr class="memitem:af0c47eb0d6d9f28a4f85b8039f78060c" id="r_af0c47eb0d6d9f28a4f85b8039f78060c"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af0c47eb0d6d9f28a4f85b8039f78060c">Color</a> (uint8_t r, uint8_t g, uint8_t b, uint8_t w)</td></tr>
<tr class="memdesc:af0c47eb0d6d9f28a4f85b8039f78060c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert separate red, green, blue and white values into a single "packed" 32-bit WRGB color.  <br /></td></tr>
<tr class="memitem:a1f16aee5b96e16e62598f826e292b23b" id="r_a1f16aee5b96e16e62598f826e292b23b"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1f16aee5b96e16e62598f826e292b23b">ColorHSV</a> (uint16_t hue, uint8_t sat=255, uint8_t val=255)</td></tr>
<tr class="memdesc:a1f16aee5b96e16e62598f826e292b23b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert hue, saturation and value into a packed 32-bit RGB color that can be passed to <a class="el" href="#ab8763ccc6f9a090df1f753905fd5561e" title="Set a pixel&#39;s color using separate red, green and blue components. If using RGBW pixels,...">setPixelColor()</a> or other RGB-compatible functions.  <br /></td></tr>
<tr class="memitem:a0151163f5aeaa42676bc31a978d6d666" id="r_a0151163f5aeaa42676bc31a978d6d666"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0151163f5aeaa42676bc31a978d6d666">gamma32</a> (uint32_t x)</td></tr>
<tr class="memdesc:a0151163f5aeaa42676bc31a978d6d666"><td class="mdescLeft">&#160;</td><td class="mdescRight">A gamma-correction function for 32-bit packed RGB or WRGB colors. Makes color transitions appear more perceptially correct.  <br /></td></tr>
<tr class="memitem:a5cec6fe17e75f8d607df305e2fa9db5c" id="r_a5cec6fe17e75f8d607df305e2fa9db5c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_adafruit___neo_pixel_8h.html#ab88a50d51bb5488df4379ff49c81fd72">neoPixelType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5cec6fe17e75f8d607df305e2fa9db5c">str2order</a> (const char *v)</td></tr>
<tr class="memdesc:a5cec6fe17e75f8d607df305e2fa9db5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">将像素颜色顺序从字符串（例如“BGR”）转换为NeoPixel格式 颜色顺序常量（例如 NEO_BGR）。这可能对代码有所帮助 从文本配置进行初始化，而非编译时初始化 常数。  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pro-attribs" class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a56919a5e954b1a87ef965c75c6cc68a1" id="r_a56919a5e954b1a87ef965c75c6cc68a1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a></td></tr>
<tr class="memdesc:a56919a5e954b1a87ef965c75c6cc68a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">true if 800 KHz pixels  <br /></td></tr>
<tr class="memitem:a2215c42c8ed043dc43d28592c2c1d750" id="r_a2215c42c8ed043dc43d28592c2c1d750"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2215c42c8ed043dc43d28592c2c1d750">begun</a></td></tr>
<tr class="memdesc:a2215c42c8ed043dc43d28592c2c1d750"><td class="mdescLeft">&#160;</td><td class="mdescRight">true if <a class="el" href="#a8a44d3d56666547290d151ab4c44cf91" title="配置NeoPixel引脚为输出模式。">begin()</a> previously called successfully  <br /></td></tr>
<tr class="memitem:ad8218520ee2ad574f805985ea2c2b0b6" id="r_ad8218520ee2ad574f805985ea2c2b0b6"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad8218520ee2ad574f805985ea2c2b0b6">numLEDs</a></td></tr>
<tr class="memdesc:ad8218520ee2ad574f805985ea2c2b0b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of RGB LEDs in strip.  <br /></td></tr>
<tr class="memitem:a89a4a144941744dc01c6e0072ad0f05d" id="r_a89a4a144941744dc01c6e0072ad0f05d"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a></td></tr>
<tr class="memdesc:a89a4a144941744dc01c6e0072ad0f05d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of 'pixels' buffer below.  <br /></td></tr>
<tr class="memitem:aaa3ce258bc1ded4228bff0277101cdb5" id="r_aaa3ce258bc1ded4228bff0277101cdb5"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a></td></tr>
<tr class="memdesc:aaa3ce258bc1ded4228bff0277101cdb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Output pin number (-1 if not yet set).  <br /></td></tr>
<tr class="memitem:a983265c34a4008d2c7a9eeb12eebea84" id="r_a983265c34a4008d2c7a9eeb12eebea84"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a></td></tr>
<tr class="memdesc:a983265c34a4008d2c7a9eeb12eebea84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Strip brightness 0-255 (stored as +1).  <br /></td></tr>
<tr class="memitem:a0667c23748aa7b3dc04e7c59916308cd" id="r_a0667c23748aa7b3dc04e7c59916308cd"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a></td></tr>
<tr class="memdesc:a0667c23748aa7b3dc04e7c59916308cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds LED color values (3 or 4 bytes each).  <br /></td></tr>
<tr class="memitem:a8275f74399aea225b25aed014d740c99" id="r_a8275f74399aea225b25aed014d740c99"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8275f74399aea225b25aed014d740c99">rOffset</a></td></tr>
<tr class="memdesc:a8275f74399aea225b25aed014d740c99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Red index within each 3- or 4-byte pixel.  <br /></td></tr>
<tr class="memitem:a3db2bc3b72073fd9a86438128186fc98" id="r_a3db2bc3b72073fd9a86438128186fc98"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3db2bc3b72073fd9a86438128186fc98">gOffset</a></td></tr>
<tr class="memdesc:a3db2bc3b72073fd9a86438128186fc98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index of green byte.  <br /></td></tr>
<tr class="memitem:aeb2fc94bc0568778b3a643977a8b6a95" id="r_aeb2fc94bc0568778b3a643977a8b6a95"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeb2fc94bc0568778b3a643977a8b6a95">bOffset</a></td></tr>
<tr class="memdesc:aeb2fc94bc0568778b3a643977a8b6a95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index of blue byte.  <br /></td></tr>
<tr class="memitem:abb82afb6bb4c4e365561f18c6ff6b6a8" id="r_abb82afb6bb4c4e365561f18c6ff6b6a8"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abb82afb6bb4c4e365561f18c6ff6b6a8">wOffset</a></td></tr>
<tr class="memdesc:abb82afb6bb4c4e365561f18c6ff6b6a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index of white (==rOffset if no white).  <br /></td></tr>
<tr class="memitem:a1774fd792c71e961624594e0c29e4541" id="r_a1774fd792c71e961624594e0c29e4541"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1774fd792c71e961624594e0c29e4541">endTime</a></td></tr>
<tr class="memdesc:a1774fd792c71e961624594e0c29e4541"><td class="mdescLeft">&#160;</td><td class="mdescRight">Latch timing reference.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class that stores state and functions for interacting with Adafruit NeoPixels and compatible devices. </p>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00224">224</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aac61dab69181d4554be8cdde40e4bce6" name="aac61dab69181d4554be8cdde40e4bce6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac61dab69181d4554be8cdde40e4bce6">&#9670;&#160;</a></span>Adafruit_NeoPixel() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Adafruit_NeoPixel::Adafruit_NeoPixel </td>
          <td>(</td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>n</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t</td>          <td class="paramname"><span class="paramname"><em>p</em></span><span class="paramdefsep"> = </span><span class="paramdefval">6</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_adafruit___neo_pixel_8h.html#ab88a50d51bb5488df4379ff49c81fd72">neoPixelType</a></td>          <td class="paramname"><span class="paramname"><em>t</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="_adafruit___neo_pixel_8h.html#a95d0d6b0a1f52bc72d9dcea2b3a48e3f">NEO_GRB</a>&#160;+&#160;<a class="el" href="_adafruit___neo_pixel_8h.html#a475fef7028a743310aa4311a97899d5d">NEO_KHZ800</a></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>当长度、引脚和像素类型在编译时已知时的NeoPixel构造函数 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n</td><td>灯带上的NeoPixel数量 </td></tr>
    <tr><td class="paramname">p</td><td>用于驱动NeoPixel数据的Arduino引脚号 </td></tr>
    <tr><td class="paramname">t</td><td>像素类型——将Adafruit_NeoPixel.h中定义的NEO_*常量相加， 例如NEO_GRB+NEO_KHZ800表示需要800KHz数据流且颜色顺序为GRB </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Adafruit_NeoPixel对象。使用前需调用begin()函数。 </dd></dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00068">68</a> of file <a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   69</span>    : <a class="code hl_variable" href="#a2215c42c8ed043dc43d28592c2c1d750">begun</a>(<span class="keyword">false</span>), <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>(0), <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>(NULL), <a class="code hl_variable" href="#a1774fd792c71e961624594e0c29e4541">endTime</a>(0) {</div>
<div class="line"><span class="lineno">   70</span>  <a class="code hl_function" href="#a07b6949674125159484e9e02ef025f7d">updateType</a>(t);</div>
<div class="line"><span class="lineno">   71</span>  <a class="code hl_function" href="#a74e917093c2eb16848c4a09427680f79">updateLength</a>(n);</div>
<div class="line"><span class="lineno">   72</span>  <a class="code hl_function" href="#aa1898f089b9a4e02841cec2e63b88c33">setPin</a>(p);</div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span><span class="preprocessor">#if defined(ESP32)</span></div>
<div class="line"><span class="lineno">   75</span><span class="preprocessor">#if ESP_IDF_VERSION &gt;= ESP_IDF_VERSION_VAL(5, 0, 0)</span></div>
<div class="line"><span class="lineno">   76</span>  espInit();</div>
<div class="line"><span class="lineno">   77</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">   78</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">   79</span>}</div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_a0667c23748aa7b3dc04e7c59916308cd"><div class="ttname"><a href="#a0667c23748aa7b3dc04e7c59916308cd">Adafruit_NeoPixel::pixels</a></div><div class="ttdeci">uint8_t * pixels</div><div class="ttdoc">Holds LED color values (3 or 4 bytes each).</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8h_source.html#l00405">Adafruit_NeoPixel.h:405</a></div></div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_a07b6949674125159484e9e02ef025f7d"><div class="ttname"><a href="#a07b6949674125159484e9e02ef025f7d">Adafruit_NeoPixel::updateType</a></div><div class="ttdeci">void updateType(neoPixelType t)</div><div class="ttdoc">更改之前声明的像素格式 Adafruit_NeoPixel灯带对象。如果格式从一个变为另一个 将RGB变体转换为RGBW变体（或将RGBW转换为RGB），旧的 数据将被释放，新数据将被清空。否则， 旧数...</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8cpp_source.html#l00182">Adafruit_NeoPixel.cpp:182</a></div></div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_a1774fd792c71e961624594e0c29e4541"><div class="ttname"><a href="#a1774fd792c71e961624594e0c29e4541">Adafruit_NeoPixel::endTime</a></div><div class="ttdeci">uint32_t endTime</div><div class="ttdoc">Latch timing reference.</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8h_source.html#l00410">Adafruit_NeoPixel.h:410</a></div></div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_a2215c42c8ed043dc43d28592c2c1d750"><div class="ttname"><a href="#a2215c42c8ed043dc43d28592c2c1d750">Adafruit_NeoPixel::begun</a></div><div class="ttdeci">bool begun</div><div class="ttdoc">true if begin() previously called successfully</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8h_source.html#l00400">Adafruit_NeoPixel.h:400</a></div></div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_a74e917093c2eb16848c4a09427680f79"><div class="ttname"><a href="#a74e917093c2eb16848c4a09427680f79">Adafruit_NeoPixel::updateLength</a></div><div class="ttdeci">void updateLength(uint16_t n)</div><div class="ttdoc">更改已声明的Adafruit_NeoPixel灯带对象的长度。旧数据会被释放，新数据会被清空。 引脚号和像素格式不变。</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8cpp_source.html#l00153">Adafruit_NeoPixel.cpp:153</a></div></div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_a983265c34a4008d2c7a9eeb12eebea84"><div class="ttname"><a href="#a983265c34a4008d2c7a9eeb12eebea84">Adafruit_NeoPixel::brightness</a></div><div class="ttdeci">uint8_t brightness</div><div class="ttdoc">Strip brightness 0-255 (stored as +1).</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8h_source.html#l00404">Adafruit_NeoPixel.h:404</a></div></div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_aa1898f089b9a4e02841cec2e63b88c33"><div class="ttname"><a href="#aa1898f089b9a4e02841cec2e63b88c33">Adafruit_NeoPixel::setPin</a></div><div class="ttdeci">void setPin(int16_t p)</div><div class="ttdoc">Set/change the NeoPixel output pin number. Previous pin, if any, is set to INPUT and the new pin is s...</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8cpp_source.html#l03364">Adafruit_NeoPixel.cpp:3364</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00400">begun</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00404">brightness</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00410">endTime</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00405">pixels</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03364">setPin()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00153">updateLength()</a>, and <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00182">updateType()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_adafruit___neo_pixel_aac61dab69181d4554be8cdde40e4bce6_cgraph.png" border="0" usemap="#aclass_adafruit___neo_pixel_aac61dab69181d4554be8cdde40e4bce6_cgraph" loading="lazy" alt=""/></div>
<map name="aclass_adafruit___neo_pixel_aac61dab69181d4554be8cdde40e4bce6_cgraph" id="aclass_adafruit___neo_pixel_aac61dab69181d4554be8cdde40e4bce6_cgraph">
<area shape="rect" title="当长度、引脚和像素类型在编译时已知时的NeoPixel构造函数" alt="" coords="5,64,140,107"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#aa1898f089b9a4e02841cec2e63b88c33" title="Set/change the NeoPixel output pin number. Previous pin, if any, is set to INPUT and the new pin is s..." alt="" coords="188,5,322,48"/>
<area shape="poly" title=" " alt="" coords="139,61,175,52,171,54,141,66"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#a74e917093c2eb16848c4a09427680f79" title="更改已声明的Adafruit_NeoPixel灯带对象的长度。旧数据会被释放，新数据会被清空。 引脚号和像素格式不变。" alt="" coords="370,93,504,136"/>
<area shape="poly" title=" " alt="" coords="140,88,356,106,354,110,140,93"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#a07b6949674125159484e9e02ef025f7d" title="更改之前声明的像素格式 Adafruit_NeoPixel灯带对象。如果格式从一个变为另一个 将RGB变体转换为RGBW变体（或将RGBW转换为RGB），旧的 数据将被释放，新数据将被清空。否则， 旧数..." alt="" coords="188,123,322,165"/>
<area shape="poly" title=" " alt="" coords="140,104,176,117,170,118,140,110"/>
<area shape="poly" title=" " alt="" coords="322,131,352,128,357,128,323,136"/>
</map>
</div>

</div>
</div>
<a id="a2a7ab8a0cedee029cd5330b638146ccc" name="a2a7ab8a0cedee029cd5330b638146ccc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a7ab8a0cedee029cd5330b638146ccc">&#9670;&#160;</a></span>Adafruit_NeoPixel() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Adafruit_NeoPixel::Adafruit_NeoPixel </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>“空”NeoPixel构造函数，当长度、引脚和/或像素类型在编译时未知， 需后续用updateType()、updateLength()和setPin()初始化。 </p>
<dl class="section return"><dt>Returns</dt><dd>Adafruit_NeoPixel对象。使用前需调用begin()函数。 </dd></dl>
<dl class="section note"><dt>Note</dt><dd>此函数已弃用，仅为兼容旧项目。新项目应使用第一个构造函数语法（长度、引脚、类型）。 </dd></dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00087">87</a> of file <a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   88</span>    :</div>
<div class="line"><span class="lineno">   89</span><span class="preprocessor">#if defined(NEO_KHZ400)</span></div>
<div class="line"><span class="lineno">   90</span>      <a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>(<span class="keyword">true</span>),</div>
<div class="line"><span class="lineno">   91</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">   92</span>      <a class="code hl_variable" href="#a2215c42c8ed043dc43d28592c2c1d750">begun</a>(<span class="keyword">false</span>), <a class="code hl_variable" href="#ad8218520ee2ad574f805985ea2c2b0b6">numLEDs</a>(0), <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>(0), <a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>(-1), <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>(0),</div>
<div class="line"><span class="lineno">   93</span>      <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>(NULL), <a class="code hl_variable" href="#a8275f74399aea225b25aed014d740c99">rOffset</a>(1), <a class="code hl_variable" href="#a3db2bc3b72073fd9a86438128186fc98">gOffset</a>(0), <a class="code hl_variable" href="#aeb2fc94bc0568778b3a643977a8b6a95">bOffset</a>(2), <a class="code hl_variable" href="#abb82afb6bb4c4e365561f18c6ff6b6a8">wOffset</a>(1), <a class="code hl_variable" href="#a1774fd792c71e961624594e0c29e4541">endTime</a>(0) {</div>
<div class="line"><span class="lineno">   94</span>}</div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_a3db2bc3b72073fd9a86438128186fc98"><div class="ttname"><a href="#a3db2bc3b72073fd9a86438128186fc98">Adafruit_NeoPixel::gOffset</a></div><div class="ttdeci">uint8_t gOffset</div><div class="ttdoc">Index of green byte.</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8h_source.html#l00407">Adafruit_NeoPixel.h:407</a></div></div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_a56919a5e954b1a87ef965c75c6cc68a1"><div class="ttname"><a href="#a56919a5e954b1a87ef965c75c6cc68a1">Adafruit_NeoPixel::is800KHz</a></div><div class="ttdeci">bool is800KHz</div><div class="ttdoc">true if 800 KHz pixels</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8h_source.html#l00397">Adafruit_NeoPixel.h:397</a></div></div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_a8275f74399aea225b25aed014d740c99"><div class="ttname"><a href="#a8275f74399aea225b25aed014d740c99">Adafruit_NeoPixel::rOffset</a></div><div class="ttdeci">uint8_t rOffset</div><div class="ttdoc">Red index within each 3- or 4-byte pixel.</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8h_source.html#l00406">Adafruit_NeoPixel.h:406</a></div></div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_a89a4a144941744dc01c6e0072ad0f05d"><div class="ttname"><a href="#a89a4a144941744dc01c6e0072ad0f05d">Adafruit_NeoPixel::numBytes</a></div><div class="ttdeci">uint16_t numBytes</div><div class="ttdoc">Size of &#39;pixels&#39; buffer below.</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8h_source.html#l00402">Adafruit_NeoPixel.h:402</a></div></div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_aaa3ce258bc1ded4228bff0277101cdb5"><div class="ttname"><a href="#aaa3ce258bc1ded4228bff0277101cdb5">Adafruit_NeoPixel::pin</a></div><div class="ttdeci">int16_t pin</div><div class="ttdoc">Output pin number (-1 if not yet set).</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8h_source.html#l00403">Adafruit_NeoPixel.h:403</a></div></div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_abb82afb6bb4c4e365561f18c6ff6b6a8"><div class="ttname"><a href="#abb82afb6bb4c4e365561f18c6ff6b6a8">Adafruit_NeoPixel::wOffset</a></div><div class="ttdeci">uint8_t wOffset</div><div class="ttdoc">Index of white (==rOffset if no white).</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8h_source.html#l00409">Adafruit_NeoPixel.h:409</a></div></div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_ad8218520ee2ad574f805985ea2c2b0b6"><div class="ttname"><a href="#ad8218520ee2ad574f805985ea2c2b0b6">Adafruit_NeoPixel::numLEDs</a></div><div class="ttdeci">uint16_t numLEDs</div><div class="ttdoc">Number of RGB LEDs in strip.</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8h_source.html#l00401">Adafruit_NeoPixel.h:401</a></div></div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_aeb2fc94bc0568778b3a643977a8b6a95"><div class="ttname"><a href="#aeb2fc94bc0568778b3a643977a8b6a95">Adafruit_NeoPixel::bOffset</a></div><div class="ttdeci">uint8_t bOffset</div><div class="ttdoc">Index of blue byte.</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8h_source.html#l00408">Adafruit_NeoPixel.h:408</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00400">begun</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00408">bOffset</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00404">brightness</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00410">endTime</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00407">gOffset</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00397">is800KHz</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00138">NEO_KHZ400</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00402">numBytes</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00401">numLEDs</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00403">pin</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00405">pixels</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00406">rOffset</a>, and <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00409">wOffset</a>.</p>

</div>
</div>
<a id="a61b1bd003a291520a367ab1712d6265c" name="a61b1bd003a291520a367ab1712d6265c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61b1bd003a291520a367ab1712d6265c">&#9670;&#160;</a></span>~Adafruit_NeoPixel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Adafruit_NeoPixel::~Adafruit_NeoPixel </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>释放Adafruit_NeoPixel对象，将数据引脚恢复为输入模式。 </p>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00099">99</a> of file <a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   99</span>                                      {</div>
<div class="line"><span class="lineno">  100</span><span class="preprocessor">#ifdef ARDUINO_ARCH_ESP32</span></div>
<div class="line"><span class="lineno">  101</span>  <span class="comment">// Release RMT resources (RMT channels and led_data)</span></div>
<div class="line"><span class="lineno">  102</span>  <span class="comment">// by indirectly calling into espShow()</span></div>
<div class="line"><span class="lineno">  103</span>  memset(<a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>, 0, <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>);</div>
<div class="line"><span class="lineno">  104</span>  <a class="code hl_variable" href="#ad8218520ee2ad574f805985ea2c2b0b6">numLEDs</a> = <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a> = 0;</div>
<div class="line"><span class="lineno">  105</span>  <a class="code hl_function" href="#a4bcda7a15591065570d3598cbf970be7">show</a>();</div>
<div class="line"><span class="lineno">  106</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span><span class="preprocessor">#if defined(ARDUINO_ARCH_RP2040)</span></div>
<div class="line"><span class="lineno">  110</span>  <span class="comment">// Release any PIO</span></div>
<div class="line"><span class="lineno">  111</span>  rp2040releasePIO();</div>
<div class="line"><span class="lineno">  112</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>  free(<a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>);</div>
<div class="line"><span class="lineno">  115</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a> &gt;= 0)</div>
<div class="line"><span class="lineno">  116</span>    pinMode(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>, INPUT);</div>
<div class="line"><span class="lineno">  117</span>}</div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_a4bcda7a15591065570d3598cbf970be7"><div class="ttname"><a href="#a4bcda7a15591065570d3598cbf970be7">Adafruit_NeoPixel::show</a></div><div class="ttdeci">void show(void)</div><div class="ttdoc">将RAM中的像素数据传输到NeoPixels。</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8cpp_source.html#l00390">Adafruit_NeoPixel.cpp:390</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00402">numBytes</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00401">numLEDs</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00403">pin</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00405">pixels</a>, and <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00390">show()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_adafruit___neo_pixel_a61b1bd003a291520a367ab1712d6265c_cgraph.png" border="0" usemap="#aclass_adafruit___neo_pixel_a61b1bd003a291520a367ab1712d6265c_cgraph" loading="lazy" alt=""/></div>
<map name="aclass_adafruit___neo_pixel_a61b1bd003a291520a367ab1712d6265c_cgraph" id="aclass_adafruit___neo_pixel_a61b1bd003a291520a367ab1712d6265c_cgraph">
<area shape="rect" title="释放Adafruit_NeoPixel对象，将数据引脚恢复为输入模式。" alt="" coords="5,857,140,899"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#a4bcda7a15591065570d3598cbf970be7" title="将RAM中的像素数据传输到NeoPixels。" alt="" coords="188,865,353,891"/>
<area shape="poly" title=" " alt="" coords="138,876,174,876,170,880,141,880"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#a9e900a60b0ac2b43b99309bb118b929e" title="Check whether a call to show() will start sending data immediately or will &#39;block&#39; for a required int..." alt="" coords="401,827,535,870"/>
<area shape="poly" title=" " alt="" coords="352,863,388,859,384,862,355,868"/>
<area shape="rect" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f" title="Arduino Main Loop." alt="" coords="446,894,491,921"/>
<area shape="poly" title=" " alt="" coords="353,888,432,900,427,903,354,893"/>
<area shape="rect" href="namespace_command_router.html#a96ff3718682e9322a64815a3d41d001b" title="Main execution loop for the Router." alt="" coords="583,691,736,718"/>
<area shape="poly" title=" " alt="" coords="490,900,512,892,534,880,570,844,601,804,644,734,648,730,606,807,574,848,537,884,515,897,493,905"/>
<area shape="rect" href="namespace_control_logic.html#adc8c269923e0c76c6d104a005833a7f9" title="Main Control Loop." alt="" coords="836,1097,962,1123"/>
<area shape="poly" title=" " alt="" coords="492,915,857,1088,853,1091,491,920"/>
<area shape="rect" href="namespace_hardware.html#ad269fd29299dd87118b408e4551f4d2d" title="Millisecond Delay." alt="" coords="830,523,969,550"/>
<area shape="poly" title=" " alt="" coords="667,689,710,626,743,590,782,560,817,547,813,550,785,564,747,594,714,629,671,692"/>
<area shape="rect" href="namespace_control_logic.html#a300e5b18ebf53c086955bf02dfe16faa" title="Get current Boot Mode." alt="" coords="808,574,990,601"/>
<area shape="poly" title=" " alt="" coords="673,689,719,649,750,628,783,610,803,604,799,607,785,615,753,633,723,654,677,693"/>
<area shape="rect" href="namespace_hardware.html#a8ea28b07408691bc126683a81aa220f3" title="Get System Time in Milliseconds." alt="" coords="1638,843,1774,870"/>
<area shape="poly" title=" " alt="" coords="721,716,784,727,902,742,1002,750,1173,754,1256,757,1344,764,1443,778,1559,801,1613,816,1663,837,1657,837,1611,821,1558,806,1442,783,1343,769,1255,763,1173,760,1002,755,901,747,783,732,722,721"/>
<area shape="rect" href="class_bambu_bus_protocol.html#addece07a1980f5f561e151fd4a09b9ea" title="Map internal BambuBus package types to a unified command type." alt="" coords="784,691,1015,718"/>
<area shape="poly" title=" " alt="" coords="735,702,771,704,766,705,737,707"/>
<area shape="rect" href="class_bambu_bus_protocol.html#a81deddd553eeb25fa96580079d7c9bd0" title="Identify the type of BambuBus packet." alt="" coords="807,625,992,667"/>
<area shape="poly" title=" " alt="" coords="716,688,797,670,792,673,718,693"/>
<area shape="rect" href="namespace_command_router.html#a329f0a7e2f53debf5c7cb5f47579151b" title="Route an incoming command to its specific handler." alt="" coords="818,793,981,819"/>
<area shape="poly" title=" " alt="" coords="682,716,729,744,785,771,826,787,821,788,783,776,726,748,682,721"/>
<area shape="rect" href="namespace_control_logic.html#a9716be5fe9da72481bee41a80681d8e5" title="Update connectivity status (Online/Offline)." alt="" coords="1066,793,1283,819"/>
<area shape="poly" title=" " alt="" coords="669,716,688,743,714,775,746,805,785,829,828,843,873,851,918,853,964,851,1049,839,1122,823,1117,825,1050,844,964,857,918,858,872,856,826,848,783,834,743,810,710,778,684,746,668,721"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#afe96c8a3898aa7a50f68ab6d726860c3" title="Main Execution Loop." alt="" coords="842,402,956,429"/>
<area shape="poly" title=" " alt="" coords="665,689,710,610,743,559,782,509,823,469,868,436,864,440,827,473,786,513,748,562,714,613,670,692"/>
<area shape="rect" href="time64_8cpp.html#a146d483f58902ba0184ce16f728edfb0" title="Get 64&#45;bit System Time in Milliseconds." alt="" coords="1900,843,1985,870"/>
<area shape="poly" title=" " alt="" coords="1773,854,1887,856,1882,857,1774,859"/>
<area shape="rect" href="class_bambu_bus_protocol.html#a8b674c03ab157fa7e70fc2f6e271d539" title="Verify the CRC16 for a complete packet." alt="" coords="1063,625,1286,651"/>
<area shape="poly" title=" " alt="" coords="991,641,1050,641,1045,642,993,646"/>
<area shape="rect" href="class_bambu_bus_protocol.html#ad0e11ad5c710644e9f1ee2fb4f15a3b9" title="Extract data from a &quot;Long Packet&quot; (0x05 type)." alt="" coords="1345,609,1548,651"/>
<area shape="poly" title=" " alt="" coords="990,621,1063,610,1132,606,1201,605,1332,615,1327,617,1201,611,1132,611,1063,615,992,626"/>
<area shape="rect" href="namespace_command_router.html#a1d2e53549b25a63274ad073b375e5f21" title="wrapper to handle Long Packets by parsing and dispatching." alt="" coords="1076,675,1273,718"/>
<area shape="poly" title=" " alt="" coords="934,790,1107,723,1103,725,936,794"/>
<area shape="poly" title=" " alt="" coords="981,803,1053,805,1048,807,982,808"/>
<area shape="poly" title=" " alt="" coords="1264,672,1344,654,1339,656,1265,677"/>
<area shape="rect" href="namespace_control_logic.html#a1ff0bcee8062346fb963e4dd845c8bdf" title="Handler/Dispatcher for Long Packets." alt="" coords="1357,675,1536,718"/>
<area shape="poly" title=" " alt="" coords="1273,694,1344,696,1339,697,1275,699"/>
<area shape="poly" title=" " alt="" coords="1284,807,1416,815,1559,829,1625,840,1620,841,1558,834,1415,820,1284,813"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a6089e6db2e7edddf19fdf095b9826c88" title="Parse and Dispatch a JSON Packet." alt="" coords="1085,330,1264,357"/>
<area shape="poly" title=" " alt="" coords="952,399,1108,360,1103,362,954,404"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#afeb304003d4b85010afd5e183e1bbf16" title="Handler for GET_FILAMENT_INFO command." alt="" coords="1334,203,1559,230"/>
<area shape="poly" title=" " alt="" coords="1191,327,1252,284,1291,260,1333,239,1356,233,1351,236,1335,244,1294,265,1255,288,1195,332"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#ad0e99d2fdcfd1c0690f850816ac1f67c" title="Helper to send an Error response." alt="" coords="1632,351,1780,378"/>
<area shape="poly" title=" " alt="" coords="1264,337,1403,335,1559,341,1619,349,1614,350,1558,346,1403,340,1265,342"/>
<area shape="rect" href="namespace_hardware.html#ad3ec7cad074d6d73508844a06a7bea50" title="Send a buffer via UART1." alt="" coords="2080,301,2239,327"/>
<area shape="poly" title=" " alt="" coords="1177,328,1193,280,1223,212,1244,176,1269,142,1299,112,1333,88,1431,41,1521,13,1564,6,1606,3,1647,4,1688,9,1769,31,1852,66,1939,113,2034,172,2068,198,2098,228,2144,288,2139,287,2094,232,2064,202,2031,176,1937,118,1849,71,1767,36,1686,15,1646,10,1606,8,1565,11,1522,18,1433,46,1336,92,1302,116,1273,145,1248,179,1228,214,1198,282,1182,331"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#ae13dcd8cc2528c12d0a241046fcc304e" title="Handler for GET_SENSORS command." alt="" coords="1346,153,1547,179"/>
<area shape="poly" title=" " alt="" coords="1184,327,1242,261,1285,222,1333,189,1350,183,1345,186,1336,193,1288,226,1246,264,1188,331"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a12cef4b97fbfa7cfb7bdb1540e626ae9" title="Handler for MOVE command." alt="" coords="1365,507,1528,534"/>
<area shape="poly" title=" " alt="" coords="1186,354,1246,422,1288,461,1336,493,1353,502,1348,503,1333,497,1285,465,1242,426,1186,360"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a81f1646e6adb42482d4109a33b9bb9c5" title="Handler for PING command." alt="" coords="1368,558,1525,585"/>
<area shape="poly" title=" " alt="" coords="1183,355,1205,394,1238,445,1282,499,1308,523,1336,544,1356,555,1351,556,1333,548,1304,527,1278,502,1234,448,1201,397,1182,360"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a685b6d688593b458b5edafda4adfd4d4" title="Handler for SELECT_LANE command." alt="" coords="1348,406,1545,433"/>
<area shape="poly" title=" " alt="" coords="1216,354,1335,391,1368,401,1363,402,1334,396,1216,360"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a31ef4dae129916b85fdd8d1612553c77" title="Handler for SET_AUTO_FEED command." alt="" coords="1343,355,1550,382"/>
<area shape="poly" title=" " alt="" coords="1264,349,1330,357,1325,358,1266,354"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a76547f35e246989843f1870c760ea514" title="Handler for SET_FILAMENT_INFO command." alt="" coords="1335,254,1558,281"/>
<area shape="poly" title=" " alt="" coords="1224,327,1384,284,1379,286,1227,332"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a8f239072c1896e64e9f6075edaaea515" title="Handler for STATUS command." alt="" coords="1362,102,1531,129"/>
<area shape="poly" title=" " alt="" coords="1181,328,1201,290,1234,238,1278,184,1304,159,1333,138,1350,132,1345,135,1336,143,1308,163,1282,187,1238,241,1205,292,1185,331"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a5bc1dda1e0b24dccb6fdc1c475930c88" title="Handler for STOP command." alt="" coords="1367,457,1526,483"/>
<area shape="poly" title=" " alt="" coords="1193,354,1255,398,1294,422,1335,442,1356,451,1351,452,1333,447,1291,426,1252,402,1193,360"/>
<area shape="rect" href="class_unit_state.html#a221a5d98d4e870c593e5bd5ee6621c4c" title="Get the configuration specific to a filament index." alt="" coords="1628,250,1784,277"/>
<area shape="poly" title=" " alt="" coords="1524,228,1616,246,1610,247,1525,233"/>
<area shape="poly" title=" " alt="" coords="1539,228,1560,240,1579,262,1586,286,1592,309,1608,331,1627,344,1622,344,1605,334,1587,311,1581,287,1574,265,1557,244,1539,233"/>
<area shape="poly" title=" " alt="" coords="1531,228,1560,240,1575,252,1584,264,1593,276,1608,286,1644,297,1693,305,1815,315,1948,317,2068,317,2062,318,1948,322,1815,320,1693,311,1643,302,1606,291,1589,280,1580,268,1571,255,1557,244,1532,233"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a9ec392d53485800126189969c2c4981a" title="Serialize and send a JSON response." alt="" coords="1853,351,2032,378"/>
<area shape="poly" title=" " alt="" coords="1780,362,1840,364,1835,365,1781,367"/>
<area shape="poly" title=" " alt="" coords="2002,348,2087,330,2082,332,2004,353"/>
<area shape="rect" href="namespace_hardware.html#a0ada30189b8e1d1dbec145140849b778" title="Microsecond Delay." alt="" coords="2520,301,2658,327"/>
<area shape="poly" title=" " alt="" coords="2239,311,2507,313,2502,314,2240,316"/>
<area shape="rect" href="namespace_hardware.html#aaaf02ef3df5811e2ba28dd009eadfaae" title="Send a single byte blocking." alt="" coords="2287,326,2472,353"/>
<area shape="poly" title=" " alt="" coords="2239,320,2274,326,2268,327,2240,326"/>
<area shape="poly" title=" " alt="" coords="2471,325,2507,323,2502,325,2473,331"/>
<area shape="poly" title=" " alt="" coords="1546,177,1694,203,1759,219,1806,235,1842,258,1874,285,1924,340,1919,339,1871,289,1839,262,1804,240,1758,224,1692,208,1547,182"/>
<area shape="rect" href="namespace_control_logic.html#a4428a845041ff986ccbf2555a62d0656" title="Get a bitmask of sensor states." alt="" coords="1608,149,1804,175"/>
<area shape="poly" title=" " alt="" coords="1546,162,1595,163,1590,164,1548,167"/>
<area shape="poly" title=" " alt="" coords="1528,509,1557,493,1568,481,1575,469,1580,442,1586,415,1593,401,1605,388,1615,384,1620,381,1608,392,1597,404,1591,417,1585,443,1580,471,1573,484,1560,497,1530,514"/>
<area shape="rect" href="class_unit_state.html#a4833e917e0069069c7f455a24e28a516" title="Get the currently active filament index." alt="" coords="1607,503,1805,546"/>
<area shape="poly" title=" " alt="" coords="1528,519,1593,522,1588,523,1529,524"/>
<area shape="rect" href="namespace_control_logic.html#a484eadc314267f8bc9aa0f025c1137d9" title="Manually move an axis (Klipper Primitive)." alt="" coords="1626,453,1786,479"/>
<area shape="poly" title=" " alt="" coords="1512,504,1627,482,1622,484,1514,509"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a1d7d7986d99cb52ab4feb4826ffc4428" title="Helper to send a Success (OK) response." alt="" coords="1637,402,1774,429"/>
<area shape="poly" title=" " alt="" coords="1527,506,1557,493,1572,480,1580,467,1589,452,1605,438,1625,431,1620,434,1608,443,1593,456,1585,469,1576,484,1560,497,1529,511"/>
<area shape="poly" title=" " alt="" coords="1771,399,1864,381,1859,383,1773,404"/>
<area shape="poly" title=" " alt="" coords="1525,577,1560,594,1589,620,1614,649,1654,713,1682,776,1699,829,1694,827,1677,778,1649,716,1610,652,1585,623,1557,599,1525,583"/>
<area shape="poly" title=" " alt="" coords="1513,583,1578,591,1653,592,1731,582,1768,571,1804,555,1827,540,1848,521,1884,477,1911,431,1929,394,1933,390,1916,433,1889,480,1852,525,1831,544,1806,560,1770,576,1732,587,1653,598,1577,596,1513,588"/>
<area shape="poly" title=" " alt="" coords="1512,403,1627,381,1622,383,1514,408"/>
<area shape="poly" title=" " alt="" coords="1545,415,1624,416,1619,417,1546,420"/>
<area shape="poly" title=" " alt="" coords="1550,364,1619,365,1614,367,1551,369"/>
<area shape="poly" title=" " alt="" coords="1524,380,1624,400,1619,401,1525,385"/>
<area shape="poly" title=" " alt="" coords="1558,263,1615,264,1610,265,1559,268"/>
<area shape="poly" title=" " alt="" coords="1509,278,1560,297,1584,313,1608,330,1641,345,1635,346,1605,335,1581,318,1557,302,1510,284"/>
<area shape="poly" title=" " alt="" coords="1470,278,1514,306,1560,341,1584,366,1593,377,1608,388,1625,397,1620,398,1605,392,1590,381,1580,370,1557,345,1511,311,1470,284"/>
<area shape="poly" title=" " alt="" coords="1531,126,1560,138,1576,149,1586,160,1608,185,1676,240,1671,240,1605,189,1582,164,1572,153,1557,143,1532,132"/>
<area shape="poly" title=" " alt="" coords="1531,108,1662,111,1735,119,1806,134,1901,167,1991,209,2069,253,2128,291,2122,291,2066,258,1988,214,1899,172,1804,139,1734,125,1661,116,1532,113"/>
<area shape="poly" title=" " alt="" coords="1524,127,1616,144,1610,146,1525,132"/>
<area shape="poly" title=" " alt="" coords="1512,453,1627,431,1622,433,1514,458"/>
<area shape="poly" title=" " alt="" coords="963,1099,1101,1080,1275,1052,1441,1018,1508,1000,1558,981,1595,959,1629,932,1681,883,1686,880,1632,936,1598,963,1560,986,1510,1005,1442,1023,1275,1057,1102,1085,964,1105"/>
<area shape="rect" href="namespace_control_logic.html#aa3d38299372c0822e90d6e649344e8ad" title="Update Odometer and Speed from AS5600 sensors." alt="" coords="1100,1315,1249,1358"/>
<area shape="poly" title=" " alt="" coords="909,1121,933,1158,967,1206,1012,1257,1064,1301,1089,1316,1084,1315,1062,1305,1008,1261,963,1209,928,1161,907,1126"/>
<area shape="rect" href="namespace_hardware.html#a44347f62b4ee1789ecfed67b195572e4" title="Set Color of a specific LED." alt="" coords="1362,1113,1531,1139"/>
<area shape="poly" title=" " alt="" coords="963,1109,1349,1122,1343,1123,963,1114"/>
<area shape="rect" href="namespace_hardware.html#a365d946e0cf0fe8cfc8dbcb25cfbdad9" title="Update LED Hardware." alt="" coords="1099,1214,1250,1241"/>
<area shape="poly" title=" " alt="" coords="921,1121,984,1160,1064,1199,1087,1209,1082,1209,1062,1204,981,1165,920,1126"/>
<area shape="rect" href="namespace_control_logic.html#ab1b5b19d84cdbba6ef3ad97fba14ce13" title="Read Analog Sensors and Update State." alt="" coords="1093,878,1256,921"/>
<area shape="poly" title=" " alt="" coords="913,1094,976,1036,1061,965,1119,930,1124,927,1065,969,979,1040,916,1098"/>
<area shape="rect" href="namespace_control_logic.html#ac2d890c891494072159ebc2b30490197" title="State Machine for BambuBus Logic." alt="" coords="1107,979,1242,1022"/>
<area shape="poly" title=" " alt="" coords="931,1094,1062,1038,1094,1028,1099,1027,1064,1043,932,1099"/>
<area shape="rect" href="namespace_control_logic.html#acb78560c64e5ea050853ab319a03f14e" title="Check if pullback is required (Smart Pullback Logic)." alt="" coords="1092,1147,1258,1190"/>
<area shape="poly" title=" " alt="" coords="963,1121,1079,1148,1074,1148,963,1126"/>
<area shape="rect" href="namespace_control_logic.html#a175e5057d122e1fee05a99bb0e40bbf3" title="Commit settings to Flash memory." alt="" coords="1084,1265,1265,1291"/>
<area shape="poly" title=" " alt="" coords="913,1121,974,1184,1017,1220,1064,1250,1080,1259,1075,1259,1062,1255,1014,1224,970,1188,911,1126"/>
<area shape="rect" href="_hardware_8cpp.html#a766f13b53e03456789fd4fe8e009e157" title=" " alt="" coords="1666,1171,1746,1198"/>
<area shape="poly" title=" " alt="" coords="1509,1137,1654,1172,1648,1172,1508,1142"/>
<area shape="poly" title=" " alt="" coords="1250,1218,1654,1189,1648,1189,1251,1224"/>
<area shape="rect" href="namespace_hardware.html#aa54da804a3d4c6d89ba5d7a2931fc463" title="Get filtered ADC voltage values." alt="" coords="1356,843,1537,870"/>
<area shape="poly" title=" " alt="" coords="1256,884,1345,872,1339,874,1257,889"/>
<area shape="poly" title=" " alt="" coords="1220,976,1273,952,1334,930,1463,899,1626,871,1620,872,1464,905,1335,935,1275,957,1221,981"/>
<area shape="poly" title=" " alt="" coords="1242,1012,1314,1024,1404,1034,1506,1040,1616,1038,1729,1024,1785,1011,1839,995,1892,974,1941,948,1988,917,2030,880,2044,863,2057,840,2081,779,2101,704,2117,622,2141,460,2154,345,2157,341,2146,461,2123,623,2106,705,2086,780,2062,842,2049,866,2034,884,1991,921,1944,953,1894,979,1841,1000,1786,1017,1730,1029,1617,1043,1506,1045,1403,1040,1313,1029,1243,1018"/>
<area shape="poly" title=" " alt="" coords="1223,1020,1405,1106,1399,1106,1222,1025"/>
<area shape="rect" href="namespace_control_logic.html#a4ddc46100d9f991cb0d171e62707ee7c" title=" " alt="" coords="1363,945,1530,971"/>
<area shape="poly" title=" " alt="" coords="1242,987,1351,973,1345,974,1243,993"/>
<area shape="poly" title=" " alt="" coords="1502,941,1558,923,1663,878,1668,876,1560,928,1503,947"/>
<area shape="poly" title=" " alt="" coords="1258,1153,1349,1141,1344,1142,1259,1158"/>
<area shape="rect" href="_flash__saves_8cpp.html#ae5951341b70b0da0d768d418bfcb76ce" title="Save a buffer to Flash Memory." alt="" coords="1399,1265,1494,1291"/>
<area shape="poly" title=" " alt="" coords="1265,1275,1386,1278,1381,1278,1265,1281"/>
</map>
</div>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a8a44d3d56666547290d151ab4c44cf91" name="a8a44d3d56666547290d151ab4c44cf91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a44d3d56666547290d151ab4c44cf91">&#9670;&#160;</a></span>begin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Adafruit_NeoPixel::begin </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>配置NeoPixel引脚为输出模式。 </p>
<dl class="section return"><dt>Returns</dt><dd>如果无法分配所需资源则返回false </dd></dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00123">123</a> of file <a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  123</span>                                  {</div>
<div class="line"><span class="lineno">  124</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a> &gt;= 0) {</div>
<div class="line"><span class="lineno">  125</span>    pinMode(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>, OUTPUT);</div>
<div class="line"><span class="lineno">  126</span>    digitalWrite(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>, LOW);</div>
<div class="line"><span class="lineno">  127</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  128</span>    <a class="code hl_variable" href="#a2215c42c8ed043dc43d28592c2c1d750">begun</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  129</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  130</span>  }</div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span><span class="preprocessor">#if defined(ARDUINO_ARCH_RP2040)</span></div>
<div class="line"><span class="lineno">  133</span>  <span class="comment">// if we&#39;re calling begin() again, unclaim any existing PIO resc.</span></div>
<div class="line"><span class="lineno">  134</span>  rp2040releasePIO();</div>
<div class="line"><span class="lineno">  135</span>  <span class="keywordflow">if</span> (! rp2040claimPIO()) {</div>
<div class="line"><span class="lineno">  136</span>    <a class="code hl_variable" href="#a2215c42c8ed043dc43d28592c2c1d750">begun</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  137</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  138</span>  }</div>
<div class="line"><span class="lineno">  139</span>  </div>
<div class="line"><span class="lineno">  140</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>  <a class="code hl_variable" href="#a2215c42c8ed043dc43d28592c2c1d750">begun</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  143</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  144</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00400">begun</a>, and <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00403">pin</a>.</p>

</div>
</div>
<a id="a9e900a60b0ac2b43b99309bb118b929e" name="a9e900a60b0ac2b43b99309bb118b929e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e900a60b0ac2b43b99309bb118b929e">&#9670;&#160;</a></span>canShow()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Adafruit_NeoPixel::canShow </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check whether a call to <a class="el" href="#a4bcda7a15591065570d3598cbf970be7" title="将RAM中的像素数据传输到NeoPixels。">show()</a> will start sending data immediately or will 'block' for a required interval. NeoPixels require a short quiet time (about 300 microseconds) after the last bit is received before the data 'latches' and new data can start being received. Usually one's sketch is implicitly using this time to generate a new frame of animation...but if it finishes very quickly, this function could be used to see if there's some idle time available for some low-priority concurrent task. </p>
<dl class="section return"><dt>Returns</dt><dd>1 or true if <a class="el" href="#a4bcda7a15591065570d3598cbf970be7" title="将RAM中的像素数据传输到NeoPixels。">show()</a> will start sending immediately, 0 or false if <a class="el" href="#a4bcda7a15591065570d3598cbf970be7" title="将RAM中的像素数据传输到NeoPixels。">show()</a> would block (meaning some idle time is available). </dd></dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00257">257</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  257</span>                     {</div>
<div class="line"><span class="lineno">  258</span>    <span class="comment">// It&#39;s normal and possible for endTime to exceed micros() if the</span></div>
<div class="line"><span class="lineno">  259</span>    <span class="comment">// 32-bit clock counter has rolled over (about every 70 minutes).</span></div>
<div class="line"><span class="lineno">  260</span>    <span class="comment">// Since both are uint32_t, a negative delta correctly maps back to</span></div>
<div class="line"><span class="lineno">  261</span>    <span class="comment">// positive space, and it would seem like the subtraction below would</span></div>
<div class="line"><span class="lineno">  262</span>    <span class="comment">// suffice. But a problem arises if code invokes show() very</span></div>
<div class="line"><span class="lineno">  263</span>    <span class="comment">// infrequently...the micros() counter may roll over MULTIPLE times in</span></div>
<div class="line"><span class="lineno">  264</span>    <span class="comment">// that interval, the delta calculation is no longer correct and the</span></div>
<div class="line"><span class="lineno">  265</span>    <span class="comment">// next update may stall for a very long time. The check below resets</span></div>
<div class="line"><span class="lineno">  266</span>    <span class="comment">// the latch counter if a rollover has occurred. This can cause an</span></div>
<div class="line"><span class="lineno">  267</span>    <span class="comment">// extra delay of up to 300 microseconds in the rare case where a</span></div>
<div class="line"><span class="lineno">  268</span>    <span class="comment">// show() call happens precisely around the rollover, but that&#39;s</span></div>
<div class="line"><span class="lineno">  269</span>    <span class="comment">// neither likely nor especially harmful, vs. other code that might</span></div>
<div class="line"><span class="lineno">  270</span>    <span class="comment">// stall for 30+ minutes, or having to document and frequently remind</span></div>
<div class="line"><span class="lineno">  271</span>    <span class="comment">// and/or provide tech support explaining an unintuitive need for</span></div>
<div class="line"><span class="lineno">  272</span>    <span class="comment">// show() calls at least once an hour.</span></div>
<div class="line"><span class="lineno">  273</span>    uint32_t now = micros();</div>
<div class="line"><span class="lineno">  274</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a1774fd792c71e961624594e0c29e4541">endTime</a> &gt; now) {</div>
<div class="line"><span class="lineno">  275</span>      <a class="code hl_variable" href="#a1774fd792c71e961624594e0c29e4541">endTime</a> = now;</div>
<div class="line"><span class="lineno">  276</span>    }</div>
<div class="line"><span class="lineno">  277</span>    <span class="keywordflow">return</span> (now - <a class="code hl_variable" href="#a1774fd792c71e961624594e0c29e4541">endTime</a>) &gt;= 300L;</div>
<div class="line"><span class="lineno">  278</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00410">endTime</a>.</p>

<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00390">show()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_adafruit___neo_pixel_a9e900a60b0ac2b43b99309bb118b929e_icgraph.png" border="0" usemap="#aclass_adafruit___neo_pixel_a9e900a60b0ac2b43b99309bb118b929e_icgraph" loading="lazy" alt=""/></div>
<map name="aclass_adafruit___neo_pixel_a9e900a60b0ac2b43b99309bb118b929e_icgraph" id="aclass_adafruit___neo_pixel_a9e900a60b0ac2b43b99309bb118b929e_icgraph">
<area shape="rect" title="Check whether a call to show() will start sending data immediately or will &#39;block&#39; for a required int..." alt="" coords="401,5,535,48"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#a4bcda7a15591065570d3598cbf970be7" title="将RAM中的像素数据传输到NeoPixels。" alt="" coords="188,13,353,40"/>
<area shape="poly" title=" " alt="" coords="383,27,354,29,354,24,388,27"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#a61b1bd003a291520a367ab1712d6265c" title="释放Adafruit_NeoPixel对象，将数据引脚恢复为输入模式。" alt="" coords="5,5,140,48"/>
<area shape="poly" title=" " alt="" coords="170,27,140,29,140,24,175,26"/>
</map>
</div>

</div>
</div>
<a id="ae259682b202be0acd258d6879f4c7121" name="ae259682b202be0acd258d6879f4c7121"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae259682b202be0acd258d6879f4c7121">&#9670;&#160;</a></span>clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Adafruit_NeoPixel::clear </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fill the whole NeoPixel strip with 0 / black / off. </p>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03733">3733</a> of file <a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3733</span>{ memset(<a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>, 0, <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>); }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00402">numBytes</a>, and <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00405">pixels</a>.</p>

</div>
</div>
<a id="ae7c444138dd0e6ac1008621d0a67048b" name="ae7c444138dd0e6ac1008621d0a67048b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7c444138dd0e6ac1008621d0a67048b">&#9670;&#160;</a></span>Color() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Adafruit_NeoPixel::Color </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>r</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>g</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>b</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert separate red, green and blue values into a single "packed" 32-bit RGB color. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">r</td><td>Red brightness, 0 to 255. </td></tr>
    <tr><td class="paramname">g</td><td>Green brightness, 0 to 255. </td></tr>
    <tr><td class="paramname">b</td><td>Blue brightness, 0 to 255. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>32-bit packed RGB value, which can then be assigned to a variable for later use or passed to the <a class="el" href="#ab8763ccc6f9a090df1f753905fd5561e" title="Set a pixel&#39;s color using separate red, green and blue components. If using RGBW pixels,...">setPixelColor()</a> function. Packed RGB format is predictable, regardless of LED strand color order. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00346">346</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  346</span>                                                         {</div>
<div class="line"><span class="lineno">  347</span>    <span class="keywordflow">return</span> ((uint32_t)r &lt;&lt; 16) | ((uint32_t)g &lt;&lt; 8) | b;</div>
<div class="line"><span class="lineno">  348</span>  }</div>
</div><!-- fragment -->
</div>
</div>
<a id="af0c47eb0d6d9f28a4f85b8039f78060c" name="af0c47eb0d6d9f28a4f85b8039f78060c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0c47eb0d6d9f28a4f85b8039f78060c">&#9670;&#160;</a></span>Color() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Adafruit_NeoPixel::Color </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>r</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>g</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>b</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>w</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert separate red, green, blue and white values into a single "packed" 32-bit WRGB color. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">r</td><td>Red brightness, 0 to 255. </td></tr>
    <tr><td class="paramname">g</td><td>Green brightness, 0 to 255. </td></tr>
    <tr><td class="paramname">b</td><td>Blue brightness, 0 to 255. </td></tr>
    <tr><td class="paramname">w</td><td>White brightness, 0 to 255. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>32-bit packed WRGB value, which can then be assigned to a variable for later use or passed to the <a class="el" href="#ab8763ccc6f9a090df1f753905fd5561e" title="Set a pixel&#39;s color using separate red, green and blue components. If using RGBW pixels,...">setPixelColor()</a> function. Packed WRGB format is predictable, regardless of LED strand color order. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00361">361</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  361</span>                                                                    {</div>
<div class="line"><span class="lineno">  362</span>    <span class="keywordflow">return</span> ((uint32_t)w &lt;&lt; 24) | ((uint32_t)r &lt;&lt; 16) | ((uint32_t)g &lt;&lt; 8) | b;</div>
<div class="line"><span class="lineno">  363</span>  }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1f16aee5b96e16e62598f826e292b23b" name="a1f16aee5b96e16e62598f826e292b23b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f16aee5b96e16e62598f826e292b23b">&#9670;&#160;</a></span>ColorHSV()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Adafruit_NeoPixel::ColorHSV </td>
          <td>(</td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>hue</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>sat</em></span><span class="paramdefsep"> = </span><span class="paramdefval">255</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>val</em></span><span class="paramdefsep"> = </span><span class="paramdefval">255</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert hue, saturation and value into a packed 32-bit RGB color that can be passed to <a class="el" href="#ab8763ccc6f9a090df1f753905fd5561e" title="Set a pixel&#39;s color using separate red, green and blue components. If using RGBW pixels,...">setPixelColor()</a> or other RGB-compatible functions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hue</td><td>An unsigned 16-bit value, 0 to 65535, representing one full loop of the color wheel, which allows 16-bit hues to "roll
              over" while still doing the expected thing (and allowing more precision than the wheel() function that was common to prior NeoPixel examples). </td></tr>
    <tr><td class="paramname">sat</td><td>Saturation, 8-bit value, 0 (min or pure grayscale) to 255 (max or pure hue). Default of 255 if unspecified. </td></tr>
    <tr><td class="paramname">val</td><td>Value (brightness), 8-bit value, 0 (min / black / off) to 255 (max or full brightness). Default of 255 if unspecified. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Packed 32-bit RGB with the most significant byte set to 0 &ndash; the white element of WRGB pixels is NOT utilized. Result is linearly but not perceptually correct, so you may want to pass the result through the <a class="el" href="#a0151163f5aeaa42676bc31a978d6d666" title="A gamma-correction function for 32-bit packed RGB or WRGB colors. Makes color transitions appear more...">gamma32()</a> function (or your own gamma-correction operation) else colors may appear washed out. This is not done automatically by this function because coders may desire a more refined gamma-correction function than the simplified one-size-fits-all operation of <a class="el" href="#a0151163f5aeaa42676bc31a978d6d666" title="A gamma-correction function for 32-bit packed RGB or WRGB colors. Makes color transitions appear more...">gamma32()</a>. Diffusing the LEDs also really seems to help when using low-saturation colors. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03550">3550</a> of file <a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3550</span>                                                                           {</div>
<div class="line"><span class="lineno"> 3551</span> </div>
<div class="line"><span class="lineno"> 3552</span>  uint8_t r, g, b;</div>
<div class="line"><span class="lineno"> 3553</span> </div>
<div class="line"><span class="lineno"> 3554</span>  <span class="comment">// Remap 0-65535 to 0-1529. Pure red is CENTERED on the 64K rollover;</span></div>
<div class="line"><span class="lineno"> 3555</span>  <span class="comment">// 0 is not the start of pure red, but the midpoint...a few values above</span></div>
<div class="line"><span class="lineno"> 3556</span>  <span class="comment">// zero and a few below 65536 all yield pure red (similarly, 32768 is the</span></div>
<div class="line"><span class="lineno"> 3557</span>  <span class="comment">// midpoint, not start, of pure cyan). The 8-bit RGB hexcone (256 values</span></div>
<div class="line"><span class="lineno"> 3558</span>  <span class="comment">// each for red, green, blue) really only allows for 1530 distinct hues</span></div>
<div class="line"><span class="lineno"> 3559</span>  <span class="comment">// (not 1536, more on that below), but the full unsigned 16-bit type was</span></div>
<div class="line"><span class="lineno"> 3560</span>  <span class="comment">// chosen for hue so that one&#39;s code can easily handle a contiguous color</span></div>
<div class="line"><span class="lineno"> 3561</span>  <span class="comment">// wheel by allowing hue to roll over in either direction.</span></div>
<div class="line"><span class="lineno"> 3562</span>  hue = (hue * 1530L + 32768) / 65536;</div>
<div class="line"><span class="lineno"> 3563</span>  <span class="comment">// Because red is centered on the rollover point (the +32768 above,</span></div>
<div class="line"><span class="lineno"> 3564</span>  <span class="comment">// essentially a fixed-point +0.5), the above actually yields 0 to 1530,</span></div>
<div class="line"><span class="lineno"> 3565</span>  <span class="comment">// where 0 and 1530 would yield the same thing. Rather than apply a</span></div>
<div class="line"><span class="lineno"> 3566</span>  <span class="comment">// costly modulo operator, 1530 is handled as a special case below.</span></div>
<div class="line"><span class="lineno"> 3567</span> </div>
<div class="line"><span class="lineno"> 3568</span>  <span class="comment">// So you&#39;d think that the color &quot;hexcone&quot; (the thing that ramps from</span></div>
<div class="line"><span class="lineno"> 3569</span>  <span class="comment">// pure red, to pure yellow, to pure green and so forth back to red,</span></div>
<div class="line"><span class="lineno"> 3570</span>  <span class="comment">// yielding six slices), and with each color component having 256</span></div>
<div class="line"><span class="lineno"> 3571</span>  <span class="comment">// possible values (0-255), might have 1536 possible items (6*256),</span></div>
<div class="line"><span class="lineno"> 3572</span>  <span class="comment">// but in reality there&#39;s 1530. This is because the last element in</span></div>
<div class="line"><span class="lineno"> 3573</span>  <span class="comment">// each 256-element slice is equal to the first element of the next</span></div>
<div class="line"><span class="lineno"> 3574</span>  <span class="comment">// slice, and keeping those in there this would create small</span></div>
<div class="line"><span class="lineno"> 3575</span>  <span class="comment">// discontinuities in the color wheel. So the last element of each</span></div>
<div class="line"><span class="lineno"> 3576</span>  <span class="comment">// slice is dropped...we regard only elements 0-254, with item 255</span></div>
<div class="line"><span class="lineno"> 3577</span>  <span class="comment">// being picked up as element 0 of the next slice. Like this:</span></div>
<div class="line"><span class="lineno"> 3578</span>  <span class="comment">// Red to not-quite-pure-yellow is:        255,   0, 0 to 255, 254,   0</span></div>
<div class="line"><span class="lineno"> 3579</span>  <span class="comment">// Pure yellow to not-quite-pure-green is: 255, 255, 0 to   1, 255,   0</span></div>
<div class="line"><span class="lineno"> 3580</span>  <span class="comment">// Pure green to not-quite-pure-cyan is:     0, 255, 0 to   0, 255, 254</span></div>
<div class="line"><span class="lineno"> 3581</span>  <span class="comment">// and so forth. Hence, 1530 distinct hues (0 to 1529), and hence why</span></div>
<div class="line"><span class="lineno"> 3582</span>  <span class="comment">// the constants below are not the multiples of 256 you might expect.</span></div>
<div class="line"><span class="lineno"> 3583</span> </div>
<div class="line"><span class="lineno"> 3584</span>  <span class="comment">// Convert hue to R,G,B (nested ifs faster than divide+mod+switch):</span></div>
<div class="line"><span class="lineno"> 3585</span>  <span class="keywordflow">if</span> (hue &lt; 510) { <span class="comment">// Red to Green-1</span></div>
<div class="line"><span class="lineno"> 3586</span>    b = 0;</div>
<div class="line"><span class="lineno"> 3587</span>    <span class="keywordflow">if</span> (hue &lt; 255) { <span class="comment">//   Red to Yellow-1</span></div>
<div class="line"><span class="lineno"> 3588</span>      r = 255;</div>
<div class="line"><span class="lineno"> 3589</span>      g = hue;       <span class="comment">//     g = 0 to 254</span></div>
<div class="line"><span class="lineno"> 3590</span>    } <span class="keywordflow">else</span> {         <span class="comment">//   Yellow to Green-1</span></div>
<div class="line"><span class="lineno"> 3591</span>      r = 510 - hue; <span class="comment">//     r = 255 to 1</span></div>
<div class="line"><span class="lineno"> 3592</span>      g = 255;</div>
<div class="line"><span class="lineno"> 3593</span>    }</div>
<div class="line"><span class="lineno"> 3594</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hue &lt; 1020) { <span class="comment">// Green to Blue-1</span></div>
<div class="line"><span class="lineno"> 3595</span>    r = 0;</div>
<div class="line"><span class="lineno"> 3596</span>    <span class="keywordflow">if</span> (hue &lt; 765) { <span class="comment">//   Green to Cyan-1</span></div>
<div class="line"><span class="lineno"> 3597</span>      g = 255;</div>
<div class="line"><span class="lineno"> 3598</span>      b = hue - 510;  <span class="comment">//     b = 0 to 254</span></div>
<div class="line"><span class="lineno"> 3599</span>    } <span class="keywordflow">else</span> {          <span class="comment">//   Cyan to Blue-1</span></div>
<div class="line"><span class="lineno"> 3600</span>      g = 1020 - hue; <span class="comment">//     g = 255 to 1</span></div>
<div class="line"><span class="lineno"> 3601</span>      b = 255;</div>
<div class="line"><span class="lineno"> 3602</span>    }</div>
<div class="line"><span class="lineno"> 3603</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hue &lt; 1530) { <span class="comment">// Blue to Red-1</span></div>
<div class="line"><span class="lineno"> 3604</span>    g = 0;</div>
<div class="line"><span class="lineno"> 3605</span>    <span class="keywordflow">if</span> (hue &lt; 1275) { <span class="comment">//   Blue to Magenta-1</span></div>
<div class="line"><span class="lineno"> 3606</span>      r = hue - 1020; <span class="comment">//     r = 0 to 254</span></div>
<div class="line"><span class="lineno"> 3607</span>      b = 255;</div>
<div class="line"><span class="lineno"> 3608</span>    } <span class="keywordflow">else</span> { <span class="comment">//   Magenta to Red-1</span></div>
<div class="line"><span class="lineno"> 3609</span>      r = 255;</div>
<div class="line"><span class="lineno"> 3610</span>      b = 1530 - hue; <span class="comment">//     b = 255 to 1</span></div>
<div class="line"><span class="lineno"> 3611</span>    }</div>
<div class="line"><span class="lineno"> 3612</span>  } <span class="keywordflow">else</span> { <span class="comment">// Last 0.5 Red (quicker than % operator)</span></div>
<div class="line"><span class="lineno"> 3613</span>    r = 255;</div>
<div class="line"><span class="lineno"> 3614</span>    g = b = 0;</div>
<div class="line"><span class="lineno"> 3615</span>  }</div>
<div class="line"><span class="lineno"> 3616</span> </div>
<div class="line"><span class="lineno"> 3617</span>  <span class="comment">// Apply saturation and value to R,G,B, pack into 32-bit result:</span></div>
<div class="line"><span class="lineno"> 3618</span>  uint32_t v1 = 1 + val;  <span class="comment">// 1 to 256; allows &gt;&gt;8 instead of /255</span></div>
<div class="line"><span class="lineno"> 3619</span>  uint16_t s1 = 1 + sat;  <span class="comment">// 1 to 256; same reason</span></div>
<div class="line"><span class="lineno"> 3620</span>  uint8_t s2 = 255 - sat; <span class="comment">// 255 to 0</span></div>
<div class="line"><span class="lineno"> 3621</span>  <span class="keywordflow">return</span> ((((((r * s1) &gt;&gt; 8) + s2) * v1) &amp; 0xff00) &lt;&lt; 8) |</div>
<div class="line"><span class="lineno"> 3622</span>         (((((g * s1) &gt;&gt; 8) + s2) * v1) &amp; 0xff00) |</div>
<div class="line"><span class="lineno"> 3623</span>         (((((b * s1) &gt;&gt; 8) + s2) * v1) &gt;&gt; 8);</div>
<div class="line"><span class="lineno"> 3624</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03770">rainbow()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_adafruit___neo_pixel_a1f16aee5b96e16e62598f826e292b23b_icgraph.png" border="0" usemap="#aclass_adafruit___neo_pixel_a1f16aee5b96e16e62598f826e292b23b_icgraph" loading="lazy" alt=""/></div>
<map name="aclass_adafruit___neo_pixel_a1f16aee5b96e16e62598f826e292b23b_icgraph" id="aclass_adafruit___neo_pixel_a1f16aee5b96e16e62598f826e292b23b_icgraph">
<area shape="rect" title="Convert hue, saturation and value into a packed 32&#45;bit RGB color that can be passed to setPixelColor(..." alt="" coords="188,5,322,48"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#a914f61b78e4d36a03c91372ceded2d46" title="用一个或多个色调循环填充NeoPixel灯带。 大家都非常喜欢彩虹漩涡，现在它可是经典了！" alt="" coords="5,5,140,48"/>
<area shape="poly" title=" " alt="" coords="169,27,140,29,140,24,175,26"/>
</map>
</div>

</div>
</div>
<a id="a310844b3e5580056edf52ce3268d8084" name="a310844b3e5580056edf52ce3268d8084"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a310844b3e5580056edf52ce3268d8084">&#9670;&#160;</a></span>fill()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Adafruit_NeoPixel::fill </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>c</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>first</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>count</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fill all or part of the NeoPixel strip with a color. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>32-bit color value. Most significant byte is white (for RGBW pixels) or ignored (for RGB pixels), next is red, then green, and least significant byte is blue. If all arguments are unspecified, this will be 0 (off). </td></tr>
    <tr><td class="paramname">first</td><td>Index of first pixel to fill, starting from 0. Must be in-bounds, no clipping is performed. 0 if unspecified. </td></tr>
    <tr><td class="paramname">count</td><td>Number of pixels to fill, as a positive value. Passing 0 or leaving unspecified will fill to end of strip. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03504">3504</a> of file <a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3504</span>                                                                       {</div>
<div class="line"><span class="lineno"> 3505</span>  uint16_t i, end;</div>
<div class="line"><span class="lineno"> 3506</span> </div>
<div class="line"><span class="lineno"> 3507</span>  <span class="keywordflow">if</span> (first &gt;= <a class="code hl_variable" href="#ad8218520ee2ad574f805985ea2c2b0b6">numLEDs</a>) {</div>
<div class="line"><span class="lineno"> 3508</span>    <span class="keywordflow">return</span>; <span class="comment">// If first LED is past end of strip, nothing to do</span></div>
<div class="line"><span class="lineno"> 3509</span>  }</div>
<div class="line"><span class="lineno"> 3510</span> </div>
<div class="line"><span class="lineno"> 3511</span>  <span class="comment">// Calculate the index ONE AFTER the last pixel to fill</span></div>
<div class="line"><span class="lineno"> 3512</span>  <span class="keywordflow">if</span> (count == 0) {</div>
<div class="line"><span class="lineno"> 3513</span>    <span class="comment">// Fill to end of strip</span></div>
<div class="line"><span class="lineno"> 3514</span>    end = <a class="code hl_variable" href="#ad8218520ee2ad574f805985ea2c2b0b6">numLEDs</a>;</div>
<div class="line"><span class="lineno"> 3515</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3516</span>    <span class="comment">// Ensure that the loop won&#39;t go past the last pixel</span></div>
<div class="line"><span class="lineno"> 3517</span>    end = first + count;</div>
<div class="line"><span class="lineno"> 3518</span>    <span class="keywordflow">if</span> (end &gt; <a class="code hl_variable" href="#ad8218520ee2ad574f805985ea2c2b0b6">numLEDs</a>)</div>
<div class="line"><span class="lineno"> 3519</span>      end = <a class="code hl_variable" href="#ad8218520ee2ad574f805985ea2c2b0b6">numLEDs</a>;</div>
<div class="line"><span class="lineno"> 3520</span>  }</div>
<div class="line"><span class="lineno"> 3521</span> </div>
<div class="line"><span class="lineno"> 3522</span>  <span class="keywordflow">for</span> (i = first; i &lt; end; i++) {</div>
<div class="line"><span class="lineno"> 3523</span>    this-&gt;<a class="code hl_function" href="#ab8763ccc6f9a090df1f753905fd5561e">setPixelColor</a>(i, c);</div>
<div class="line"><span class="lineno"> 3524</span>  }</div>
<div class="line"><span class="lineno"> 3525</span>}</div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_ab8763ccc6f9a090df1f753905fd5561e"><div class="ttname"><a href="#ab8763ccc6f9a090df1f753905fd5561e">Adafruit_NeoPixel::setPixelColor</a></div><div class="ttdeci">void setPixelColor(uint16_t n, uint8_t r, uint8_t g, uint8_t b)</div><div class="ttdoc">Set a pixel&#39;s color using separate red, green and blue components. If using RGBW pixels,...</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8cpp_source.html#l03410">Adafruit_NeoPixel.cpp:3410</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00401">numLEDs</a>, and <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03410">setPixelColor()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_adafruit___neo_pixel_a310844b3e5580056edf52ce3268d8084_cgraph.png" border="0" usemap="#aclass_adafruit___neo_pixel_a310844b3e5580056edf52ce3268d8084_cgraph" loading="lazy" alt=""/></div>
<map name="aclass_adafruit___neo_pixel_a310844b3e5580056edf52ce3268d8084_cgraph" id="aclass_adafruit___neo_pixel_a310844b3e5580056edf52ce3268d8084_cgraph">
<area shape="rect" title="Fill all or part of the NeoPixel strip with a color." alt="" coords="5,13,153,40"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#ab8763ccc6f9a090df1f753905fd5561e" title="Set a pixel&#39;s color using separate red, green and blue components. If using RGBW pixels,..." alt="" coords="201,5,335,48"/>
<area shape="poly" title=" " alt="" coords="153,24,188,26,183,27,153,29"/>
</map>
</div>

</div>
</div>
<a id="a0151163f5aeaa42676bc31a978d6d666" name="a0151163f5aeaa42676bc31a978d6d666"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0151163f5aeaa42676bc31a978d6d666">&#9670;&#160;</a></span>gamma32()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Adafruit_NeoPixel::gamma32 </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>x</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A gamma-correction function for 32-bit packed RGB or WRGB colors. Makes color transitions appear more perceptially correct. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>32-bit packed RGB or WRGB color. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Gamma-adjusted packed color, can then be passed in one of the <a class="el" href="#ab8763ccc6f9a090df1f753905fd5561e" title="Set a pixel&#39;s color using separate red, green and blue components. If using RGBW pixels,...">setPixelColor()</a> functions. Like <a class="el" href="#ab932cb619cd3420f9e3f269b7401710e" title="An 8-bit gamma-correction function for basic pixel brightness adjustment. Makes color transitions app...">gamma8()</a>, this uses a fixed gamma correction exponent of 2.6, which seems reasonably okay for average NeoPixels in average tasks. If you need finer control you'll need to provide your own gamma-correction function instead. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03737">3737</a> of file <a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3737</span>                                              {</div>
<div class="line"><span class="lineno"> 3738</span>  uint8_t *y = (uint8_t *)&amp;x;</div>
<div class="line"><span class="lineno"> 3739</span>  <span class="comment">// All four bytes of a 32-bit value are filtered even if RGB (not WRGB),</span></div>
<div class="line"><span class="lineno"> 3740</span>  <span class="comment">// to avoid a bunch of shifting and masking that would be necessary for</span></div>
<div class="line"><span class="lineno"> 3741</span>  <span class="comment">// properly handling different endianisms (and each byte is a fairly</span></div>
<div class="line"><span class="lineno"> 3742</span>  <span class="comment">// trivial operation, so it might not even be wasting cycles vs a check</span></div>
<div class="line"><span class="lineno"> 3743</span>  <span class="comment">// and branch for the RGB case). In theory this might cause trouble *if*</span></div>
<div class="line"><span class="lineno"> 3744</span>  <span class="comment">// someone&#39;s storing information in the unused most significant byte</span></div>
<div class="line"><span class="lineno"> 3745</span>  <span class="comment">// of an RGB value, but this seems exceedingly rare and if it&#39;s</span></div>
<div class="line"><span class="lineno"> 3746</span>  <span class="comment">// encountered in reality they can mask values going in or coming out.</span></div>
<div class="line"><span class="lineno"> 3747</span>  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; 4; i++)</div>
<div class="line"><span class="lineno"> 3748</span>    y[i] = <a class="code hl_function" href="#ab932cb619cd3420f9e3f269b7401710e">gamma8</a>(y[i]);</div>
<div class="line"><span class="lineno"> 3749</span>  <span class="keywordflow">return</span> x; <span class="comment">// Packed 32-bit return</span></div>
<div class="line"><span class="lineno"> 3750</span>}</div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_ab932cb619cd3420f9e3f269b7401710e"><div class="ttname"><a href="#ab932cb619cd3420f9e3f269b7401710e">Adafruit_NeoPixel::gamma8</a></div><div class="ttdeci">static uint8_t gamma8(uint8_t x)</div><div class="ttdoc">An 8-bit gamma-correction function for basic pixel brightness adjustment. Makes color transitions app...</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8h_source.html#l00332">Adafruit_NeoPixel.h:332</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00332">gamma8()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03770">rainbow()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_adafruit___neo_pixel_a0151163f5aeaa42676bc31a978d6d666_cgraph.png" border="0" usemap="#aclass_adafruit___neo_pixel_a0151163f5aeaa42676bc31a978d6d666_cgraph" loading="lazy" alt=""/></div>
<map name="aclass_adafruit___neo_pixel_a0151163f5aeaa42676bc31a978d6d666_cgraph" id="aclass_adafruit___neo_pixel_a0151163f5aeaa42676bc31a978d6d666_cgraph">
<area shape="rect" title="A gamma&#45;correction function for 32&#45;bit packed RGB or WRGB colors. Makes color transitions appear more..." alt="" coords="5,5,140,48"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#ab932cb619cd3420f9e3f269b7401710e" title="An 8&#45;bit gamma&#45;correction function for basic pixel brightness adjustment. Makes color transitions app..." alt="" coords="188,5,322,48"/>
<area shape="poly" title=" " alt="" coords="140,24,175,26,170,27,140,29"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_adafruit___neo_pixel_a0151163f5aeaa42676bc31a978d6d666_icgraph.png" border="0" usemap="#aclass_adafruit___neo_pixel_a0151163f5aeaa42676bc31a978d6d666_icgraph" loading="lazy" alt=""/></div>
<map name="aclass_adafruit___neo_pixel_a0151163f5aeaa42676bc31a978d6d666_icgraph" id="aclass_adafruit___neo_pixel_a0151163f5aeaa42676bc31a978d6d666_icgraph">
<area shape="rect" title="A gamma&#45;correction function for 32&#45;bit packed RGB or WRGB colors. Makes color transitions appear more..." alt="" coords="188,5,322,48"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#a914f61b78e4d36a03c91372ceded2d46" title="用一个或多个色调循环填充NeoPixel灯带。 大家都非常喜欢彩虹漩涡，现在它可是经典了！" alt="" coords="5,5,140,48"/>
<area shape="poly" title=" " alt="" coords="169,27,140,29,140,24,175,26"/>
</map>
</div>

</div>
</div>
<a id="ab932cb619cd3420f9e3f269b7401710e" name="ab932cb619cd3420f9e3f269b7401710e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab932cb619cd3420f9e3f269b7401710e">&#9670;&#160;</a></span>gamma8()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t Adafruit_NeoPixel::gamma8 </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>x</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>An 8-bit gamma-correction function for basic pixel brightness adjustment. Makes color transitions appear more perceptially correct. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Input brightness, 0 (minimum or off/black) to 255 (maximum). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Gamma-adjusted brightness, can then be passed to one of the <a class="el" href="#ab8763ccc6f9a090df1f753905fd5561e" title="Set a pixel&#39;s color using separate red, green and blue components. If using RGBW pixels,...">setPixelColor()</a> functions. This uses a fixed gamma correction exponent of 2.6, which seems reasonably okay for average NeoPixels in average tasks. If you need finer control you'll need to provide your own gamma-correction function instead. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00332">332</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  332</span>                                   {</div>
<div class="line"><span class="lineno">  333</span>    <span class="keywordflow">return</span> pgm_read_byte(&amp;<a class="code hl_variable" href="_adafruit___neo_pixel_8h.html#a37900cafdbce69fda2b8a112f3f1bbb9">_NeoPixelGammaTable</a>[x]); <span class="comment">// 0-255 in, 0-255 out</span></div>
<div class="line"><span class="lineno">  334</span>  }</div>
<div class="ttc" id="a_adafruit___neo_pixel_8h_html_a37900cafdbce69fda2b8a112f3f1bbb9"><div class="ttname"><a href="_adafruit___neo_pixel_8h.html#a37900cafdbce69fda2b8a112f3f1bbb9">_NeoPixelGammaTable</a></div><div class="ttdeci">static const uint8_t PROGMEM _NeoPixelGammaTable[256]</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8h_source.html#l00191">Adafruit_NeoPixel.h:191</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00191">_NeoPixelGammaTable</a>.</p>

<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03737">gamma32()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_adafruit___neo_pixel_ab932cb619cd3420f9e3f269b7401710e_icgraph.png" border="0" usemap="#aclass_adafruit___neo_pixel_ab932cb619cd3420f9e3f269b7401710e_icgraph" loading="lazy" alt=""/></div>
<map name="aclass_adafruit___neo_pixel_ab932cb619cd3420f9e3f269b7401710e_icgraph" id="aclass_adafruit___neo_pixel_ab932cb619cd3420f9e3f269b7401710e_icgraph">
<area shape="rect" title="An 8&#45;bit gamma&#45;correction function for basic pixel brightness adjustment. Makes color transitions app..." alt="" coords="370,5,504,48"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#a0151163f5aeaa42676bc31a978d6d666" title="A gamma&#45;correction function for 32&#45;bit packed RGB or WRGB colors. Makes color transitions appear more..." alt="" coords="188,5,322,48"/>
<area shape="poly" title=" " alt="" coords="352,27,322,29,322,24,357,27"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#a914f61b78e4d36a03c91372ceded2d46" title="用一个或多个色调循环填充NeoPixel灯带。 大家都非常喜欢彩虹漩涡，现在它可是经典了！" alt="" coords="5,5,140,48"/>
<area shape="poly" title=" " alt="" coords="169,27,140,29,140,24,175,26"/>
</map>
</div>

</div>
</div>
<a id="ab1b7af02712d6a1e228783a89ec12832" name="ab1b7af02712d6a1e228783a89ec12832"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1b7af02712d6a1e228783a89ec12832">&#9670;&#160;</a></span>getBrightness()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t Adafruit_NeoPixel::getBrightness </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the last-set brightness value for the strip. </p>
<dl class="section return"><dt>Returns</dt><dd>Brightness value: 0 = minimum (off), 255 = maximum. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03728">3728</a> of file <a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3728</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a> - 1; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00404">brightness</a>.</p>

</div>
</div>
<a id="ac2d69741bcce8ad0b61c66757952db8e" name="ac2d69741bcce8ad0b61c66757952db8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2d69741bcce8ad0b61c66757952db8e">&#9670;&#160;</a></span>getPin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int16_t Adafruit_NeoPixel::getPin </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the pin number used for NeoPixel data output. </p>
<dl class="section return"><dt>Returns</dt><dd>Arduino pin number (-1 if not set). </dd></dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00299">299</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  299</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>; };</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00403">pin</a>.</p>

</div>
</div>
<a id="abccaba27e35bfae27c856e76b46c7924" name="abccaba27e35bfae27c856e76b46c7924"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abccaba27e35bfae27c856e76b46c7924">&#9670;&#160;</a></span>getPixelColor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Adafruit_NeoPixel::getPixelColor </td>
          <td>(</td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>n</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Query the color of a previously-set pixel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n</td><td>Index of pixel to read (0 = first). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>'Packed' 32-bit RGB or WRGB value. Most significant byte is white (for RGBW pixels) or 0 (for RGB pixels), next is red, then green, and least significant byte is blue. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>If the strip brightness has been changed from the default value of 255, the color read from a pixel may not exactly match what was previously written with one of the <a class="el" href="#ab8763ccc6f9a090df1f753905fd5561e" title="Set a pixel&#39;s color using separate red, green and blue components. If using RGBW pixels,...">setPixelColor()</a> functions. This gets more pronounced at lower brightness levels. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03637">3637</a> of file <a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3637</span>                                                          {</div>
<div class="line"><span class="lineno"> 3638</span>  <span class="keywordflow">if</span> (n &gt;= <a class="code hl_variable" href="#ad8218520ee2ad574f805985ea2c2b0b6">numLEDs</a>)</div>
<div class="line"><span class="lineno"> 3639</span>    <span class="keywordflow">return</span> 0; <span class="comment">// Out of bounds, return no color.</span></div>
<div class="line"><span class="lineno"> 3640</span> </div>
<div class="line"><span class="lineno"> 3641</span>  uint8_t *p;</div>
<div class="line"><span class="lineno"> 3642</span> </div>
<div class="line"><span class="lineno"> 3643</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#abb82afb6bb4c4e365561f18c6ff6b6a8">wOffset</a> == <a class="code hl_variable" href="#a8275f74399aea225b25aed014d740c99">rOffset</a>) { <span class="comment">// Is RGB-type device</span></div>
<div class="line"><span class="lineno"> 3644</span>    p = &amp;<a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>[n * 3];</div>
<div class="line"><span class="lineno"> 3645</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) {</div>
<div class="line"><span class="lineno"> 3646</span>      <span class="comment">// Stored color was decimated by setBrightness(). Returned value</span></div>
<div class="line"><span class="lineno"> 3647</span>      <span class="comment">// attempts to scale back to an approximation of the original 24-bit</span></div>
<div class="line"><span class="lineno"> 3648</span>      <span class="comment">// value used when setting the pixel color, but there will always be</span></div>
<div class="line"><span class="lineno"> 3649</span>      <span class="comment">// some error -- those bits are simply gone. Issue is most</span></div>
<div class="line"><span class="lineno"> 3650</span>      <span class="comment">// pronounced at low brightness levels.</span></div>
<div class="line"><span class="lineno"> 3651</span>      <span class="keywordflow">return</span> (((uint32_t)(p[<a class="code hl_variable" href="#a8275f74399aea225b25aed014d740c99">rOffset</a>] &lt;&lt; 8) / <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) &lt;&lt; 16) |</div>
<div class="line"><span class="lineno"> 3652</span>             (((uint32_t)(p[<a class="code hl_variable" href="#a3db2bc3b72073fd9a86438128186fc98">gOffset</a>] &lt;&lt; 8) / <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) &lt;&lt; 8) |</div>
<div class="line"><span class="lineno"> 3653</span>             ((uint32_t)(p[<a class="code hl_variable" href="#aeb2fc94bc0568778b3a643977a8b6a95">bOffset</a>] &lt;&lt; 8) / <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>);</div>
<div class="line"><span class="lineno"> 3654</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3655</span>      <span class="comment">// No brightness adjustment has been made -- return &#39;raw&#39; color</span></div>
<div class="line"><span class="lineno"> 3656</span>      <span class="keywordflow">return</span> ((uint32_t)p[<a class="code hl_variable" href="#a8275f74399aea225b25aed014d740c99">rOffset</a>] &lt;&lt; 16) | ((uint32_t)p[<a class="code hl_variable" href="#a3db2bc3b72073fd9a86438128186fc98">gOffset</a>] &lt;&lt; 8) |</div>
<div class="line"><span class="lineno"> 3657</span>             (uint32_t)p[<a class="code hl_variable" href="#aeb2fc94bc0568778b3a643977a8b6a95">bOffset</a>];</div>
<div class="line"><span class="lineno"> 3658</span>    }</div>
<div class="line"><span class="lineno"> 3659</span>  } <span class="keywordflow">else</span> { <span class="comment">// Is RGBW-type device</span></div>
<div class="line"><span class="lineno"> 3660</span>    p = &amp;<a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>[n * 4];</div>
<div class="line"><span class="lineno"> 3661</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) { <span class="comment">// Return scaled color</span></div>
<div class="line"><span class="lineno"> 3662</span>      <span class="keywordflow">return</span> (((uint32_t)(p[<a class="code hl_variable" href="#abb82afb6bb4c4e365561f18c6ff6b6a8">wOffset</a>] &lt;&lt; 8) / <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) &lt;&lt; 24) |</div>
<div class="line"><span class="lineno"> 3663</span>             (((uint32_t)(p[<a class="code hl_variable" href="#a8275f74399aea225b25aed014d740c99">rOffset</a>] &lt;&lt; 8) / <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) &lt;&lt; 16) |</div>
<div class="line"><span class="lineno"> 3664</span>             (((uint32_t)(p[<a class="code hl_variable" href="#a3db2bc3b72073fd9a86438128186fc98">gOffset</a>] &lt;&lt; 8) / <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) &lt;&lt; 8) |</div>
<div class="line"><span class="lineno"> 3665</span>             ((uint32_t)(p[<a class="code hl_variable" href="#aeb2fc94bc0568778b3a643977a8b6a95">bOffset</a>] &lt;&lt; 8) / <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>);</div>
<div class="line"><span class="lineno"> 3666</span>    } <span class="keywordflow">else</span> { <span class="comment">// Return raw color</span></div>
<div class="line"><span class="lineno"> 3667</span>      <span class="keywordflow">return</span> ((uint32_t)p[<a class="code hl_variable" href="#abb82afb6bb4c4e365561f18c6ff6b6a8">wOffset</a>] &lt;&lt; 24) | ((uint32_t)p[<a class="code hl_variable" href="#a8275f74399aea225b25aed014d740c99">rOffset</a>] &lt;&lt; 16) |</div>
<div class="line"><span class="lineno"> 3668</span>             ((uint32_t)p[<a class="code hl_variable" href="#a3db2bc3b72073fd9a86438128186fc98">gOffset</a>] &lt;&lt; 8) | (uint32_t)p[<a class="code hl_variable" href="#aeb2fc94bc0568778b3a643977a8b6a95">bOffset</a>];</div>
<div class="line"><span class="lineno"> 3669</span>    }</div>
<div class="line"><span class="lineno"> 3670</span>  }</div>
<div class="line"><span class="lineno"> 3671</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00408">bOffset</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00404">brightness</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00407">gOffset</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00401">numLEDs</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00405">pixels</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00406">rOffset</a>, and <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00409">wOffset</a>.</p>

</div>
</div>
<a id="ab484e9a9da6f1089091c2cda1a0841a7" name="ab484e9a9da6f1089091c2cda1a0841a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab484e9a9da6f1089091c2cda1a0841a7">&#9670;&#160;</a></span>getPixels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t * Adafruit_NeoPixel::getPixels </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a pointer directly to the NeoPixel data buffer in RAM. Pixel data is stored in a device-native format (a la the NEO_* constants) and is not translated here. Applications that access this buffer will need to be aware of the specific data format and handle colors appropriately. </p>
<dl class="section return"><dt>Returns</dt><dd>Pointer to NeoPixel buffer (uint8_t* array). </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This is for high-performance applications where calling <a class="el" href="#ab8763ccc6f9a090df1f753905fd5561e" title="Set a pixel&#39;s color using separate red, green and blue components. If using RGBW pixels,...">setPixelColor()</a> on every single pixel would be too slow (e.g. POV or light-painting projects). There is no bounds checking on the array, creating tremendous potential for mayhem if one writes past the ends of the buffer. Great power, great responsibility and all that. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00293">293</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  293</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>; };</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00405">pixels</a>.</p>

</div>
</div>
<a id="a515921e2c768750698f199c27613a143" name="a515921e2c768750698f199c27613a143"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a515921e2c768750698f199c27613a143">&#9670;&#160;</a></span>numPixels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t Adafruit_NeoPixel::numPixels </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the number of pixels in an <a class="el" href="class_adafruit___neo_pixel.html" title="Class that stores state and functions for interacting with Adafruit NeoPixels and compatible devices.">Adafruit_NeoPixel</a> strip object. </p>
<dl class="section return"><dt>Returns</dt><dd>Pixel count (0 if not set). </dd></dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00304">304</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  304</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="#ad8218520ee2ad574f805985ea2c2b0b6">numLEDs</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00401">numLEDs</a>.</p>

</div>
</div>
<a id="a914f61b78e4d36a03c91372ceded2d46" name="a914f61b78e4d36a03c91372ceded2d46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a914f61b78e4d36a03c91372ceded2d46">&#9670;&#160;</a></span>rainbow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Adafruit_NeoPixel::rainbow </td>
          <td>(</td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>first_hue</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t</td>          <td class="paramname"><span class="paramname"><em>reps</em></span><span class="paramdefsep"> = </span><span class="paramdefval">1</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>saturation</em></span><span class="paramdefsep"> = </span><span class="paramdefval">255</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>brightness</em></span><span class="paramdefsep"> = </span><span class="paramdefval">255</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>gammify</em></span><span class="paramdefsep"> = </span><span class="paramdefval">true</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>用一个或多个色调循环填充NeoPixel灯带。 大家都非常喜欢彩虹漩涡，现在它可是经典了！ </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">first_hue</td><td>第一个像素的色调，0-65535，表示一个完整的色调范围 色轮的循环。每个后续像素将 （能量/数据等）被抵消以完成一个或多个周期 条带的长度。 </td></tr>
    <tr><td class="paramname">reps</td><td>在整个长度上色轮的循环次数 条带的宽度。默认值为1。负值可以 用于颠倒色调顺序。 </td></tr>
    <tr><td class="paramname">saturation</td><td>饱和度（可选），0-255 表示从灰色到纯色调， 默认值 = 255。 </td></tr>
    <tr><td class="paramname">brightness</td><td>亮度/值（可选），0-255 表示从关闭到最大亮度， 默认值 = 255。这是独特的，并且是结合使用的 具有任何配置的全局条带亮度。 </td></tr>
    <tr><td class="paramname">gammify</td><td>如果为true（默认值），则对颜色应用伽马校正 为了提升外观。 </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03770">3770</a> of file <a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3771</span>                                                        {</div>
<div class="line"><span class="lineno"> 3772</span>  <span class="keywordflow">for</span> (uint16_t i=0; i&lt;<a class="code hl_variable" href="#ad8218520ee2ad574f805985ea2c2b0b6">numLEDs</a>; i++) {</div>
<div class="line"><span class="lineno"> 3773</span>    uint16_t hue = first_hue + (i * reps * 65536) / <a class="code hl_variable" href="#ad8218520ee2ad574f805985ea2c2b0b6">numLEDs</a>;</div>
<div class="line"><span class="lineno"> 3774</span>    uint32_t color = <a class="code hl_function" href="#a1f16aee5b96e16e62598f826e292b23b">ColorHSV</a>(hue, saturation, <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>);</div>
<div class="line"><span class="lineno"> 3775</span>    <span class="keywordflow">if</span> (gammify) color = <a class="code hl_function" href="#a0151163f5aeaa42676bc31a978d6d666">gamma32</a>(color);</div>
<div class="line"><span class="lineno"> 3776</span>    <a class="code hl_function" href="#ab8763ccc6f9a090df1f753905fd5561e">setPixelColor</a>(i, color);</div>
<div class="line"><span class="lineno"> 3777</span>  }</div>
<div class="line"><span class="lineno"> 3778</span>}</div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_a0151163f5aeaa42676bc31a978d6d666"><div class="ttname"><a href="#a0151163f5aeaa42676bc31a978d6d666">Adafruit_NeoPixel::gamma32</a></div><div class="ttdeci">static uint32_t gamma32(uint32_t x)</div><div class="ttdoc">A gamma-correction function for 32-bit packed RGB or WRGB colors. Makes color transitions appear more...</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8cpp_source.html#l03737">Adafruit_NeoPixel.cpp:3737</a></div></div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_a1f16aee5b96e16e62598f826e292b23b"><div class="ttname"><a href="#a1f16aee5b96e16e62598f826e292b23b">Adafruit_NeoPixel::ColorHSV</a></div><div class="ttdeci">static uint32_t ColorHSV(uint16_t hue, uint8_t sat=255, uint8_t val=255)</div><div class="ttdoc">Convert hue, saturation and value into a packed 32-bit RGB color that can be passed to setPixelColor(...</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8cpp_source.html#l03550">Adafruit_NeoPixel.cpp:3550</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00404">brightness</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03550">ColorHSV()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03737">gamma32()</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00401">numLEDs</a>, and <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03410">setPixelColor()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_adafruit___neo_pixel_a914f61b78e4d36a03c91372ceded2d46_cgraph.png" border="0" usemap="#aclass_adafruit___neo_pixel_a914f61b78e4d36a03c91372ceded2d46_cgraph" loading="lazy" alt=""/></div>
<map name="aclass_adafruit___neo_pixel_a914f61b78e4d36a03c91372ceded2d46_cgraph" id="aclass_adafruit___neo_pixel_a914f61b78e4d36a03c91372ceded2d46_cgraph">
<area shape="rect" title="用一个或多个色调循环填充NeoPixel灯带。 大家都非常喜欢彩虹漩涡，现在它可是经典了！" alt="" coords="5,72,140,115"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#a1f16aee5b96e16e62598f826e292b23b" title="Convert hue, saturation and value into a packed 32&#45;bit RGB color that can be passed to setPixelColor(..." alt="" coords="188,5,322,48"/>
<area shape="poly" title=" " alt="" coords="131,69,182,52,178,55,134,74"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#a0151163f5aeaa42676bc31a978d6d666" title="A gamma&#45;correction function for 32&#45;bit packed RGB or WRGB colors. Makes color transitions appear more..." alt="" coords="188,72,322,115"/>
<area shape="poly" title=" " alt="" coords="140,91,175,92,170,94,141,96"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#ab8763ccc6f9a090df1f753905fd5561e" title="Set a pixel&#39;s color using separate red, green and blue components. If using RGBW pixels,..." alt="" coords="188,139,322,181"/>
<area shape="poly" title=" " alt="" coords="133,113,183,132,178,133,132,118"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#ab932cb619cd3420f9e3f269b7401710e" title="An 8&#45;bit gamma&#45;correction function for basic pixel brightness adjustment. Makes color transitions app..." alt="" coords="370,72,504,115"/>
<area shape="poly" title=" " alt="" coords="322,91,357,93,352,94,323,96"/>
</map>
</div>

</div>
</div>
<a id="aa05f7d37828c43fef00e6242dcf75959" name="aa05f7d37828c43fef00e6242dcf75959"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa05f7d37828c43fef00e6242dcf75959">&#9670;&#160;</a></span>setBrightness()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Adafruit_NeoPixel::setBrightness </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>b</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adjust output brightness. Does not immediately affect what's currently displayed on the LEDs. The next call to <a class="el" href="#a4bcda7a15591065570d3598cbf970be7" title="将RAM中的像素数据传输到NeoPixels。">show()</a> will refresh the LEDs at this level. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>Brightness setting, 0=minimum (off), 255=brightest. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This was intended for one-time use in one's <a class="el" href="main_8cpp.html#a4fc01d736fe50cf5b977f755b675f11d" title="Arduino Setup Function.">setup()</a> function, not as an animation effect in itself. Because of the way this library "pre-multiplies" LED colors in RAM, changing the brightness is often a "lossy" operation &ndash; what you write to pixels isn't necessary the same as what you'll read back. Repeated brightness changes using this function exacerbate the problem. Smart programs therefore treat the strip as a write-only resource, maintaining their own state to render each frame of an animation, not relying on read-modify-write. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03688">3688</a> of file <a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3688</span>                                               {</div>
<div class="line"><span class="lineno"> 3689</span>  <span class="comment">// Stored brightness value is different than what&#39;s passed.</span></div>
<div class="line"><span class="lineno"> 3690</span>  <span class="comment">// This simplifies the actual scaling math later, allowing a fast</span></div>
<div class="line"><span class="lineno"> 3691</span>  <span class="comment">// 8x8-bit multiply and taking the MSB. &#39;brightness&#39; is a uint8_t,</span></div>
<div class="line"><span class="lineno"> 3692</span>  <span class="comment">// adding 1 here may (intentionally) roll over...so 0 = max brightness</span></div>
<div class="line"><span class="lineno"> 3693</span>  <span class="comment">// (color values are interpreted literally; no scaling), 1 = min</span></div>
<div class="line"><span class="lineno"> 3694</span>  <span class="comment">// brightness (off), 255 = just below max brightness.</span></div>
<div class="line"><span class="lineno"> 3695</span>  uint8_t newBrightness = b + 1;</div>
<div class="line"><span class="lineno"> 3696</span>  <span class="keywordflow">if</span> (newBrightness != <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) { <span class="comment">// Compare against prior value</span></div>
<div class="line"><span class="lineno"> 3697</span>    <span class="comment">// Brightness has changed -- re-scale existing data in RAM,</span></div>
<div class="line"><span class="lineno"> 3698</span>    <span class="comment">// This process is potentially &quot;lossy,&quot; especially when increasing</span></div>
<div class="line"><span class="lineno"> 3699</span>    <span class="comment">// brightness. The tight timing in the WS2811/WS2812 code means there</span></div>
<div class="line"><span class="lineno"> 3700</span>    <span class="comment">// aren&#39;t enough free cycles to perform this scaling on the fly as data</span></div>
<div class="line"><span class="lineno"> 3701</span>    <span class="comment">// is issued. So we make a pass through the existing color data in RAM</span></div>
<div class="line"><span class="lineno"> 3702</span>    <span class="comment">// and scale it (subsequent graphics commands also work at this</span></div>
<div class="line"><span class="lineno"> 3703</span>    <span class="comment">// brightness level). If there&#39;s a significant step up in brightness,</span></div>
<div class="line"><span class="lineno"> 3704</span>    <span class="comment">// the limited number of steps (quantization) in the old data will be</span></div>
<div class="line"><span class="lineno"> 3705</span>    <span class="comment">// quite visible in the re-scaled version. For a non-destructive</span></div>
<div class="line"><span class="lineno"> 3706</span>    <span class="comment">// change, you&#39;ll need to re-render the full strip data. C&#39;est la vie.</span></div>
<div class="line"><span class="lineno"> 3707</span>    uint8_t c, *ptr = <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>,</div>
<div class="line"><span class="lineno"> 3708</span>               oldBrightness = <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a> - 1; <span class="comment">// De-wrap old brightness value</span></div>
<div class="line"><span class="lineno"> 3709</span>    uint16_t scale;</div>
<div class="line"><span class="lineno"> 3710</span>    <span class="keywordflow">if</span> (oldBrightness == 0)</div>
<div class="line"><span class="lineno"> 3711</span>      scale = 0; <span class="comment">// Avoid /0</span></div>
<div class="line"><span class="lineno"> 3712</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (b == 255)</div>
<div class="line"><span class="lineno"> 3713</span>      scale = 65535 / oldBrightness;</div>
<div class="line"><span class="lineno"> 3714</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3715</span>      scale = (((uint16_t)newBrightness &lt;&lt; 8) - 1) / oldBrightness;</div>
<div class="line"><span class="lineno"> 3716</span>    <span class="keywordflow">for</span> (uint16_t i = 0; i &lt; <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>; i++) {</div>
<div class="line"><span class="lineno"> 3717</span>      c = *ptr;</div>
<div class="line"><span class="lineno"> 3718</span>      *ptr++ = (c * scale) &gt;&gt; 8;</div>
<div class="line"><span class="lineno"> 3719</span>    }</div>
<div class="line"><span class="lineno"> 3720</span>    <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a> = newBrightness;</div>
<div class="line"><span class="lineno"> 3721</span>  }</div>
<div class="line"><span class="lineno"> 3722</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00404">brightness</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00402">numBytes</a>, and <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00405">pixels</a>.</p>

</div>
</div>
<a id="aa1898f089b9a4e02841cec2e63b88c33" name="aa1898f089b9a4e02841cec2e63b88c33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1898f089b9a4e02841cec2e63b88c33">&#9670;&#160;</a></span>setPin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Adafruit_NeoPixel::setPin </td>
          <td>(</td>
          <td class="paramtype">int16_t</td>          <td class="paramname"><span class="paramname"><em>p</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set/change the NeoPixel output pin number. Previous pin, if any, is set to INPUT and the new pin is set to OUTPUT. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Arduino pin number (-1 = no pin). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03364">3364</a> of file <a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3364</span>                                        {</div>
<div class="line"><span class="lineno"> 3365</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a2215c42c8ed043dc43d28592c2c1d750">begun</a> &amp;&amp; (<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a> &gt;= 0))</div>
<div class="line"><span class="lineno"> 3366</span>    pinMode(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>, INPUT); <span class="comment">// Disable existing out pin</span></div>
<div class="line"><span class="lineno"> 3367</span>  <a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a> = p;</div>
<div class="line"><span class="lineno"> 3368</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a2215c42c8ed043dc43d28592c2c1d750">begun</a>) {</div>
<div class="line"><span class="lineno"> 3369</span>    pinMode(p, OUTPUT);</div>
<div class="line"><span class="lineno"> 3370</span>    digitalWrite(p, LOW);</div>
<div class="line"><span class="lineno"> 3371</span>  }</div>
<div class="line"><span class="lineno"> 3372</span><span class="preprocessor">#if defined(__AVR__)</span></div>
<div class="line"><span class="lineno"> 3373</span>  port = portOutputRegister(digitalPinToPort(p));</div>
<div class="line"><span class="lineno"> 3374</span>  pinMask = digitalPinToBitMask(p);</div>
<div class="line"><span class="lineno"> 3375</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3376</span><span class="preprocessor">#if defined(ARDUINO_ARCH_STM32) || defined(ARDUINO_ARCH_ARDUINO_CORE_STM32)</span></div>
<div class="line"><span class="lineno"> 3377</span>  gpioPort = digitalPinToPort(p);</div>
<div class="line"><span class="lineno"> 3378</span>  gpioPin = STM_LL_GPIO_PIN(digitalPinToPinName(p));</div>
<div class="line"><span class="lineno"> 3379</span><span class="preprocessor">#elif defined(_PY32_DEF_)</span></div>
<div class="line"><span class="lineno"> 3380</span>  gpioPort = digitalPinToPort(p);</div>
<div class="line"><span class="lineno"> 3381</span>  gpioPin = PY32_LL_GPIO_PIN(digitalPinToPinName(p));</div>
<div class="line"><span class="lineno"> 3382</span><span class="preprocessor">#elif defined(ARDUINO_ARCH_CH32)</span></div>
<div class="line"><span class="lineno"> 3383</span>  PinName <span class="keyword">const</span> pin_name = digitalPinToPinName(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>);</div>
<div class="line"><span class="lineno"> 3384</span>  gpioPort = get_GPIO_Port(CH_PORT(pin_name));</div>
<div class="line"><span class="lineno"> 3385</span>  gpioPin = CH_GPIO_PIN(pin_name);</div>
<div class="line"><span class="lineno"> 3386</span><span class="preprocessor">  #if defined (CH32V20x_D6)</span></div>
<div class="line"><span class="lineno"> 3387</span>  <span class="keywordflow">if</span> (gpioPort == GPIOC &amp;&amp; ((*(<span class="keyword">volatile</span> uint32_t*)0x40022030) &amp; 0x0F000000) == 0) {</div>
<div class="line"><span class="lineno"> 3388</span>    gpioPin = gpioPin &gt;&gt; 13;</div>
<div class="line"><span class="lineno"> 3389</span>  }</div>
<div class="line"><span class="lineno"> 3390</span><span class="preprocessor">  #endif</span></div>
<div class="line"><span class="lineno"> 3391</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3392</span><span class="preprocessor">#if defined(TARGET_GIGA) || defined(TARGET_M4)</span></div>
<div class="line"><span class="lineno"> 3393</span>  gpio = digitalPinToGpio(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>);</div>
<div class="line"><span class="lineno"> 3394</span>  <span class="keywordflow">if</span> (gpio == NULL)</div>
<div class="line"><span class="lineno"> 3395</span>  {</div>
<div class="line"><span class="lineno"> 3396</span>      gpio = <span class="keyword">new</span> mbed::DigitalInOut(digitalPinToPinName(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>), PIN_OUTPUT, PullNone, 0);</div>
<div class="line"><span class="lineno"> 3397</span>      digitalPinToGpio(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>) = gpio;</div>
<div class="line"><span class="lineno"> 3398</span>  }</div>
<div class="line"><span class="lineno"> 3399</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3400</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00400">begun</a>, and <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00403">pin</a>.</p>

<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00068">Adafruit_NeoPixel()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_adafruit___neo_pixel_aa1898f089b9a4e02841cec2e63b88c33_icgraph.png" border="0" usemap="#aclass_adafruit___neo_pixel_aa1898f089b9a4e02841cec2e63b88c33_icgraph" loading="lazy" alt=""/></div>
<map name="aclass_adafruit___neo_pixel_aa1898f089b9a4e02841cec2e63b88c33_icgraph" id="aclass_adafruit___neo_pixel_aa1898f089b9a4e02841cec2e63b88c33_icgraph">
<area shape="rect" title="Set/change the NeoPixel output pin number. Previous pin, if any, is set to INPUT and the new pin is s..." alt="" coords="188,5,322,48"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#aac61dab69181d4554be8cdde40e4bce6" title="当长度、引脚和像素类型在编译时已知时的NeoPixel构造函数" alt="" coords="5,5,140,48"/>
<area shape="poly" title=" " alt="" coords="169,27,140,29,140,24,175,26"/>
</map>
</div>

</div>
</div>
<a id="a19fc274330c0e65907929ee03b93b1c3" name="a19fc274330c0e65907929ee03b93b1c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19fc274330c0e65907929ee03b93b1c3">&#9670;&#160;</a></span>setPixelColor() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Adafruit_NeoPixel::setPixelColor </td>
          <td>(</td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>n</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>c</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a pixel's color using a 32-bit 'packed' RGB or RGBW value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n</td><td>Pixel index, starting from 0. </td></tr>
    <tr><td class="paramname">c</td><td>32-bit color value. Most significant byte is white (for RGBW pixels) or ignored (for RGB pixels), next is red, then green, and least significant byte is blue. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03472">3472</a> of file <a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3472</span>                                                            {</div>
<div class="line"><span class="lineno"> 3473</span>  <span class="keywordflow">if</span> (n &lt; <a class="code hl_variable" href="#ad8218520ee2ad574f805985ea2c2b0b6">numLEDs</a>) {</div>
<div class="line"><span class="lineno"> 3474</span>    uint8_t *p, r = (uint8_t)(c &gt;&gt; 16), g = (uint8_t)(c &gt;&gt; 8), b = (uint8_t)c;</div>
<div class="line"><span class="lineno"> 3475</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) { <span class="comment">// See notes in setBrightness()</span></div>
<div class="line"><span class="lineno"> 3476</span>      r = (r * <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) &gt;&gt; 8;</div>
<div class="line"><span class="lineno"> 3477</span>      g = (g * <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) &gt;&gt; 8;</div>
<div class="line"><span class="lineno"> 3478</span>      b = (b * <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) &gt;&gt; 8;</div>
<div class="line"><span class="lineno"> 3479</span>    }</div>
<div class="line"><span class="lineno"> 3480</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#abb82afb6bb4c4e365561f18c6ff6b6a8">wOffset</a> == <a class="code hl_variable" href="#a8275f74399aea225b25aed014d740c99">rOffset</a>) {</div>
<div class="line"><span class="lineno"> 3481</span>      p = &amp;<a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>[n * 3];</div>
<div class="line"><span class="lineno"> 3482</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3483</span>      p = &amp;<a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>[n * 4];</div>
<div class="line"><span class="lineno"> 3484</span>      uint8_t w = (uint8_t)(c &gt;&gt; 24);</div>
<div class="line"><span class="lineno"> 3485</span>      p[<a class="code hl_variable" href="#abb82afb6bb4c4e365561f18c6ff6b6a8">wOffset</a>] = <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a> ? ((w * <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) &gt;&gt; 8) : w;</div>
<div class="line"><span class="lineno"> 3486</span>    }</div>
<div class="line"><span class="lineno"> 3487</span>    p[<a class="code hl_variable" href="#a8275f74399aea225b25aed014d740c99">rOffset</a>] = r;</div>
<div class="line"><span class="lineno"> 3488</span>    p[<a class="code hl_variable" href="#a3db2bc3b72073fd9a86438128186fc98">gOffset</a>] = g;</div>
<div class="line"><span class="lineno"> 3489</span>    p[<a class="code hl_variable" href="#aeb2fc94bc0568778b3a643977a8b6a95">bOffset</a>] = b;</div>
<div class="line"><span class="lineno"> 3490</span>  }</div>
<div class="line"><span class="lineno"> 3491</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00408">bOffset</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00404">brightness</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00407">gOffset</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00401">numLEDs</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00405">pixels</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00406">rOffset</a>, and <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00409">wOffset</a>.</p>

</div>
</div>
<a id="ab8763ccc6f9a090df1f753905fd5561e" name="ab8763ccc6f9a090df1f753905fd5561e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8763ccc6f9a090df1f753905fd5561e">&#9670;&#160;</a></span>setPixelColor() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Adafruit_NeoPixel::setPixelColor </td>
          <td>(</td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>n</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>r</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>g</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>b</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a pixel's color using separate red, green and blue components. If using RGBW pixels, white will be set to 0. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n</td><td>Pixel index, starting from 0. </td></tr>
    <tr><td class="paramname">r</td><td>Red brightness, 0 = minimum (off), 255 = maximum. </td></tr>
    <tr><td class="paramname">g</td><td>Green brightness, 0 = minimum (off), 255 = maximum. </td></tr>
    <tr><td class="paramname">b</td><td>Blue brightness, 0 = minimum (off), 255 = maximum. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03410">3410</a> of file <a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3411</span>                                                 {</div>
<div class="line"><span class="lineno"> 3412</span> </div>
<div class="line"><span class="lineno"> 3413</span>  <span class="keywordflow">if</span> (n &lt; <a class="code hl_variable" href="#ad8218520ee2ad574f805985ea2c2b0b6">numLEDs</a>) {</div>
<div class="line"><span class="lineno"> 3414</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) { <span class="comment">// See notes in setBrightness()</span></div>
<div class="line"><span class="lineno"> 3415</span>      r = (r * <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) &gt;&gt; 8;</div>
<div class="line"><span class="lineno"> 3416</span>      g = (g * <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) &gt;&gt; 8;</div>
<div class="line"><span class="lineno"> 3417</span>      b = (b * <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) &gt;&gt; 8;</div>
<div class="line"><span class="lineno"> 3418</span>    }</div>
<div class="line"><span class="lineno"> 3419</span>    uint8_t *p;</div>
<div class="line"><span class="lineno"> 3420</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#abb82afb6bb4c4e365561f18c6ff6b6a8">wOffset</a> == <a class="code hl_variable" href="#a8275f74399aea225b25aed014d740c99">rOffset</a>) { <span class="comment">// Is an RGB-type strip</span></div>
<div class="line"><span class="lineno"> 3421</span>      p = &amp;<a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>[n * 3];     <span class="comment">// 3 bytes per pixel</span></div>
<div class="line"><span class="lineno"> 3422</span>    } <span class="keywordflow">else</span> {                  <span class="comment">// Is a WRGB-type strip</span></div>
<div class="line"><span class="lineno"> 3423</span>      p = &amp;<a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>[n * 4];     <span class="comment">// 4 bytes per pixel</span></div>
<div class="line"><span class="lineno"> 3424</span>      p[<a class="code hl_variable" href="#abb82afb6bb4c4e365561f18c6ff6b6a8">wOffset</a>] = 0;         <span class="comment">// But only R,G,B passed -- set W to 0</span></div>
<div class="line"><span class="lineno"> 3425</span>    }</div>
<div class="line"><span class="lineno"> 3426</span>    p[<a class="code hl_variable" href="#a8275f74399aea225b25aed014d740c99">rOffset</a>] = r; <span class="comment">// R,G,B always stored</span></div>
<div class="line"><span class="lineno"> 3427</span>    p[<a class="code hl_variable" href="#a3db2bc3b72073fd9a86438128186fc98">gOffset</a>] = g;</div>
<div class="line"><span class="lineno"> 3428</span>    p[<a class="code hl_variable" href="#aeb2fc94bc0568778b3a643977a8b6a95">bOffset</a>] = b;</div>
<div class="line"><span class="lineno"> 3429</span>  }</div>
<div class="line"><span class="lineno"> 3430</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00408">bOffset</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00404">brightness</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00407">gOffset</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00401">numLEDs</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00405">pixels</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00406">rOffset</a>, and <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00409">wOffset</a>.</p>

<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03504">fill()</a>, and <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03770">rainbow()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_adafruit___neo_pixel_ab8763ccc6f9a090df1f753905fd5561e_icgraph.png" border="0" usemap="#aclass_adafruit___neo_pixel_ab8763ccc6f9a090df1f753905fd5561e_icgraph" loading="lazy" alt=""/></div>
<map name="aclass_adafruit___neo_pixel_ab8763ccc6f9a090df1f753905fd5561e_icgraph" id="aclass_adafruit___neo_pixel_ab8763ccc6f9a090df1f753905fd5561e_icgraph">
<area shape="rect" title="Set a pixel&#39;s color using separate red, green and blue components. If using RGBW pixels,..." alt="" coords="201,27,335,69"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#a310844b3e5580056edf52ce3268d8084" title="Fill all or part of the NeoPixel strip with a color." alt="" coords="5,5,153,32"/>
<area shape="poly" title=" " alt="" coords="183,36,153,33,153,27,188,35"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#a914f61b78e4d36a03c91372ceded2d46" title="用一个或多个色调循环填充NeoPixel灯带。 大家都非常喜欢彩虹漩涡，现在它可是经典了！" alt="" coords="12,56,146,99"/>
<area shape="poly" title=" " alt="" coords="183,61,147,70,146,64,188,60"/>
</map>
</div>

</div>
</div>
<a id="ac7b3529b3d190f3af5d8e5b9ead27688" name="ac7b3529b3d190f3af5d8e5b9ead27688"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7b3529b3d190f3af5d8e5b9ead27688">&#9670;&#160;</a></span>setPixelColor() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Adafruit_NeoPixel::setPixelColor </td>
          <td>(</td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>n</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>r</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>g</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>b</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>w</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a pixel's color using separate red, green, blue and white components (for RGBW NeoPixels only). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n</td><td>Pixel index, starting from 0. </td></tr>
    <tr><td class="paramname">r</td><td>Red brightness, 0 = minimum (off), 255 = maximum. </td></tr>
    <tr><td class="paramname">g</td><td>Green brightness, 0 = minimum (off), 255 = maximum. </td></tr>
    <tr><td class="paramname">b</td><td>Blue brightness, 0 = minimum (off), 255 = maximum. </td></tr>
    <tr><td class="paramname">w</td><td>White brightness, 0 = minimum (off), 255 = maximum, ignored if using RGB pixels. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03442">3442</a> of file <a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3443</span>                                                            {</div>
<div class="line"><span class="lineno"> 3444</span> </div>
<div class="line"><span class="lineno"> 3445</span>  <span class="keywordflow">if</span> (n &lt; <a class="code hl_variable" href="#ad8218520ee2ad574f805985ea2c2b0b6">numLEDs</a>) {</div>
<div class="line"><span class="lineno"> 3446</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) { <span class="comment">// See notes in setBrightness()</span></div>
<div class="line"><span class="lineno"> 3447</span>      r = (r * <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) &gt;&gt; 8;</div>
<div class="line"><span class="lineno"> 3448</span>      g = (g * <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) &gt;&gt; 8;</div>
<div class="line"><span class="lineno"> 3449</span>      b = (b * <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) &gt;&gt; 8;</div>
<div class="line"><span class="lineno"> 3450</span>      w = (w * <a class="code hl_variable" href="#a983265c34a4008d2c7a9eeb12eebea84">brightness</a>) &gt;&gt; 8;</div>
<div class="line"><span class="lineno"> 3451</span>    }</div>
<div class="line"><span class="lineno"> 3452</span>    uint8_t *p;</div>
<div class="line"><span class="lineno"> 3453</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#abb82afb6bb4c4e365561f18c6ff6b6a8">wOffset</a> == <a class="code hl_variable" href="#a8275f74399aea225b25aed014d740c99">rOffset</a>) { <span class="comment">// Is an RGB-type strip</span></div>
<div class="line"><span class="lineno"> 3454</span>      p = &amp;<a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>[n * 3];     <span class="comment">// 3 bytes per pixel (ignore W)</span></div>
<div class="line"><span class="lineno"> 3455</span>    } <span class="keywordflow">else</span> {                  <span class="comment">// Is a WRGB-type strip</span></div>
<div class="line"><span class="lineno"> 3456</span>      p = &amp;<a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>[n * 4];     <span class="comment">// 4 bytes per pixel</span></div>
<div class="line"><span class="lineno"> 3457</span>      p[<a class="code hl_variable" href="#abb82afb6bb4c4e365561f18c6ff6b6a8">wOffset</a>] = w;         <span class="comment">// Store W</span></div>
<div class="line"><span class="lineno"> 3458</span>    }</div>
<div class="line"><span class="lineno"> 3459</span>    p[<a class="code hl_variable" href="#a8275f74399aea225b25aed014d740c99">rOffset</a>] = r; <span class="comment">// Store R,G,B</span></div>
<div class="line"><span class="lineno"> 3460</span>    p[<a class="code hl_variable" href="#a3db2bc3b72073fd9a86438128186fc98">gOffset</a>] = g;</div>
<div class="line"><span class="lineno"> 3461</span>    p[<a class="code hl_variable" href="#aeb2fc94bc0568778b3a643977a8b6a95">bOffset</a>] = b;</div>
<div class="line"><span class="lineno"> 3462</span>  }</div>
<div class="line"><span class="lineno"> 3463</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00408">bOffset</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00404">brightness</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00407">gOffset</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00401">numLEDs</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00405">pixels</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00406">rOffset</a>, and <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00409">wOffset</a>.</p>

</div>
</div>
<a id="a4bcda7a15591065570d3598cbf970be7" name="a4bcda7a15591065570d3598cbf970be7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bcda7a15591065570d3598cbf970be7">&#9670;&#160;</a></span>show()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Adafruit_NeoPixel::show </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>将RAM中的像素数据传输到NeoPixels。 </p>
<dl class="section note"><dt>Note</dt><dd>在大多数架构中，中断会被暂时禁用 为了实现正确的NeoPixel信号时序。这意味着 Arduino的millis()和micros()函数，这两个函数需要 中断，每当发生这种情况时，都会损失一小段时间间隔 函数被调用（每个RGB像素大约30微秒，40个像素为 RGBW像素）。这个问题没有简单的解决办法，但有一些 存在使用...的专门替代库或配套库 需要使用非常针对特定设备的外设来解决这个问题。 </dd></dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00390">390</a> of file <a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  390</span>                                 {</div>
<div class="line"><span class="lineno">  391</span> </div>
<div class="line"><span class="lineno">  392</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>)</div>
<div class="line"><span class="lineno">  393</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  394</span> </div>
<div class="line"><span class="lineno">  395</span>  <span class="comment">// Data latch = 300+ microsecond pause in the output stream. Rather than</span></div>
<div class="line"><span class="lineno">  396</span>  <span class="comment">// put a delay at the end of the function, the ending time is noted and</span></div>
<div class="line"><span class="lineno">  397</span>  <span class="comment">// the function will simply hold off (if needed) on issuing the</span></div>
<div class="line"><span class="lineno">  398</span>  <span class="comment">// subsequent round of data until the latch time has elapsed. This</span></div>
<div class="line"><span class="lineno">  399</span>  <span class="comment">// allows the mainline code to start generating the next frame of data</span></div>
<div class="line"><span class="lineno">  400</span>  <span class="comment">// rather than stalling for the latch.</span></div>
<div class="line"><span class="lineno">  401</span>  <span class="keywordflow">while</span> (!<a class="code hl_function" href="#a9e900a60b0ac2b43b99309bb118b929e">canShow</a>())</div>
<div class="line"><span class="lineno">  402</span>    ;</div>
<div class="line"><span class="lineno">  403</span>    <span class="comment">// endTime is a private member (rather than global var) so that multiple</span></div>
<div class="line"><span class="lineno">  404</span>    <span class="comment">// instances on different pins can be quickly issued in succession (each</span></div>
<div class="line"><span class="lineno">  405</span>    <span class="comment">// instance doesn&#39;t delay the next).</span></div>
<div class="line"><span class="lineno">  406</span> </div>
<div class="line"><span class="lineno">  407</span>    <span class="comment">// In order to make this code runtime-configurable to work with any pin,</span></div>
<div class="line"><span class="lineno">  408</span>    <span class="comment">// SBI/CBI instructions are eschewed in favor of full PORT writes via the</span></div>
<div class="line"><span class="lineno">  409</span>    <span class="comment">// OUT or ST instructions. It relies on two facts: that peripheral</span></div>
<div class="line"><span class="lineno">  410</span>    <span class="comment">// functions (such as PWM) take precedence on output pins, so our PORT-</span></div>
<div class="line"><span class="lineno">  411</span>    <span class="comment">// wide writes won&#39;t interfere, and that interrupts are globally disabled</span></div>
<div class="line"><span class="lineno">  412</span>    <span class="comment">// while data is being issued to the LEDs, so no other code will be</span></div>
<div class="line"><span class="lineno">  413</span>    <span class="comment">// accessing the PORT. The code takes an initial &#39;snapshot&#39; of the PORT</span></div>
<div class="line"><span class="lineno">  414</span>    <span class="comment">// state, computes &#39;pin high&#39; and &#39;pin low&#39; values, and writes these back</span></div>
<div class="line"><span class="lineno">  415</span>    <span class="comment">// to the PORT register as needed.</span></div>
<div class="line"><span class="lineno">  416</span> </div>
<div class="line"><span class="lineno">  417</span>  <span class="comment">// NRF52 may use PWM + DMA (if available), may not need to disable interrupt</span></div>
<div class="line"><span class="lineno">  418</span>  <span class="comment">// ESP32 may not disable interrupts because espShow() uses RMT which tries to acquire locks</span></div>
<div class="line"><span class="lineno">  419</span><span class="preprocessor">#if !(defined(NRF52) || defined(NRF52_SERIES) || defined(ESP32))</span></div>
<div class="line"><span class="lineno">  420</span>  noInterrupts(); <span class="comment">// Need 100% focus on instruction timing</span></div>
<div class="line"><span class="lineno">  421</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  422</span> </div>
<div class="line"><span class="lineno">  423</span><span class="preprocessor">#if defined(__AVR__)</span></div>
<div class="line"><span class="lineno">  424</span>  <span class="comment">// AVR MCUs -- ATmega &amp; ATtiny (no XMEGA) ---------------------------------</span></div>
<div class="line"><span class="lineno">  425</span> </div>
<div class="line"><span class="lineno">  426</span>  <span class="keyword">volatile</span> uint16_t i = <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>; <span class="comment">// Loop counter</span></div>
<div class="line"><span class="lineno">  427</span>  <span class="keyword">volatile</span> uint8_t *ptr = <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>, <span class="comment">// Pointer to next byte</span></div>
<div class="line"><span class="lineno">  428</span>      b = *ptr++,                 <span class="comment">// Current byte value</span></div>
<div class="line"><span class="lineno">  429</span>      hi,                         <span class="comment">// PORT w/output bit set high</span></div>
<div class="line"><span class="lineno">  430</span>      lo;                         <span class="comment">// PORT w/output bit set low</span></div>
<div class="line"><span class="lineno">  431</span> </div>
<div class="line"><span class="lineno">  432</span>  <span class="comment">// Hand-tuned assembly code issues data to the LED drivers at a specific</span></div>
<div class="line"><span class="lineno">  433</span>  <span class="comment">// rate. There&#39;s separate code for different CPU speeds (8, 12, 16 MHz)</span></div>
<div class="line"><span class="lineno">  434</span>  <span class="comment">// for both the WS2811 (400 KHz) and WS2812 (800 KHz) drivers. The</span></div>
<div class="line"><span class="lineno">  435</span>  <span class="comment">// datastream timing for the LED drivers allows a little wiggle room each</span></div>
<div class="line"><span class="lineno">  436</span>  <span class="comment">// way (listed in the datasheets), so the conditions for compiling each</span></div>
<div class="line"><span class="lineno">  437</span>  <span class="comment">// case are set up for a range of frequencies rather than just the exact</span></div>
<div class="line"><span class="lineno">  438</span>  <span class="comment">// 8, 12 or 16 MHz values, permitting use with some close-but-not-spot-on</span></div>
<div class="line"><span class="lineno">  439</span>  <span class="comment">// devices (e.g. 16.5 MHz DigiSpark). The ranges were arrived at based</span></div>
<div class="line"><span class="lineno">  440</span>  <span class="comment">// on the datasheet figures and have not been extensively tested outside</span></div>
<div class="line"><span class="lineno">  441</span>  <span class="comment">// the canonical 8/12/16 MHz speeds; there&#39;s no guarantee these will work</span></div>
<div class="line"><span class="lineno">  442</span>  <span class="comment">// close to the extremes (or possibly they could be pushed further).</span></div>
<div class="line"><span class="lineno">  443</span>  <span class="comment">// Keep in mind only one CPU speed case actually gets compiled; the</span></div>
<div class="line"><span class="lineno">  444</span>  <span class="comment">// resulting program isn&#39;t as massive as it might look from source here.</span></div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span><span class="comment">// 8 MHz(ish) AVR ---------------------------------------------------------</span></div>
<div class="line"><span class="lineno">  447</span><span class="preprocessor">#if (F_CPU &gt;= 7400000UL) &amp;&amp; (F_CPU &lt;= 9500000UL)</span></div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span><span class="preprocessor">#if defined(NEO_KHZ400) </span><span class="comment">// 800 KHz check needed only if 400 KHz support enabled</span></div>
<div class="line"><span class="lineno">  450</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>) {</div>
<div class="line"><span class="lineno">  451</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  452</span> </div>
<div class="line"><span class="lineno">  453</span>    <span class="keyword">volatile</span> uint8_t n1, n2 = 0; <span class="comment">// First, next bits out</span></div>
<div class="line"><span class="lineno">  454</span> </div>
<div class="line"><span class="lineno">  455</span>    <span class="comment">// Squeezing an 800 KHz stream out of an 8 MHz chip requires code</span></div>
<div class="line"><span class="lineno">  456</span>    <span class="comment">// specific to each PORT register.</span></div>
<div class="line"><span class="lineno">  457</span> </div>
<div class="line"><span class="lineno">  458</span>    <span class="comment">// 10 instruction clocks per bit: HHxxxxxLLL</span></div>
<div class="line"><span class="lineno">  459</span>    <span class="comment">// OUT instructions:              ^ ^    ^   (T=0,2,7)</span></div>
<div class="line"><span class="lineno">  460</span> </div>
<div class="line"><span class="lineno">  461</span>    <span class="comment">// PORTD OUTPUT ----------------------------------------------------</span></div>
<div class="line"><span class="lineno">  462</span> </div>
<div class="line"><span class="lineno">  463</span><span class="preprocessor">#if defined(PORTD)</span></div>
<div class="line"><span class="lineno">  464</span><span class="preprocessor">#if defined(PORTB) || defined(PORTC) || defined(PORTF)</span></div>
<div class="line"><span class="lineno">  465</span>    <span class="keywordflow">if</span> (port == &amp;PORTD) {</div>
<div class="line"><span class="lineno">  466</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTB/C/F)</span></div>
<div class="line"><span class="lineno">  467</span> </div>
<div class="line"><span class="lineno">  468</span>      hi = PORTD | pinMask;</div>
<div class="line"><span class="lineno">  469</span>      lo = PORTD &amp; ~pinMask;</div>
<div class="line"><span class="lineno">  470</span>      n1 = lo;</div>
<div class="line"><span class="lineno">  471</span>      <span class="keywordflow">if</span> (b &amp; 0x80)</div>
<div class="line"><span class="lineno">  472</span>        n1 = hi;</div>
<div class="line"><span class="lineno">  473</span> </div>
<div class="line"><span class="lineno">  474</span>      <span class="comment">// Dirty trick: RJMPs proceeding to the next instruction are used</span></div>
<div class="line"><span class="lineno">  475</span>      <span class="comment">// to delay two clock cycles in one instruction word (rather than</span></div>
<div class="line"><span class="lineno">  476</span>      <span class="comment">// using two NOPs). This was necessary in order to squeeze the</span></div>
<div class="line"><span class="lineno">  477</span>      <span class="comment">// loop down to exactly 64 words -- the maximum possible for a</span></div>
<div class="line"><span class="lineno">  478</span>      <span class="comment">// relative branch.</span></div>
<div class="line"><span class="lineno">  479</span> </div>
<div class="line"><span class="lineno">  480</span>      <span class="keyword">asm</span> <span class="keyword">volatile</span>(</div>
<div class="line"><span class="lineno">  481</span>          <span class="stringliteral">&quot;headD:&quot;</span></div>
<div class="line"><span class="lineno">  482</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// Clk  Pseudocode</span></div>
<div class="line"><span class="lineno">  483</span>                 <span class="comment">// Bit 7:</span></div>
<div class="line"><span class="lineno">  484</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  485</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = hi</span></div>
<div class="line"><span class="lineno">  486</span>          <span class="stringliteral">&quot;mov  %[n2]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  487</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    n2   = lo</span></div>
<div class="line"><span class="lineno">  488</span>          <span class="stringliteral">&quot;out  %[port] , %[n1]&quot;</span></div>
<div class="line"><span class="lineno">  489</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = n1</span></div>
<div class="line"><span class="lineno">  490</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  491</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop</span></div>
<div class="line"><span class="lineno">  492</span>          <span class="stringliteral">&quot;sbrc %[byte] , 6&quot;</span></div>
<div class="line"><span class="lineno">  493</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1-2  if(b &amp; 0x40)</span></div>
<div class="line"><span class="lineno">  494</span>          <span class="stringliteral">&quot;mov %[n2]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  495</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 0-1   n2 = hi</span></div>
<div class="line"><span class="lineno">  496</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  497</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = lo</span></div>
<div class="line"><span class="lineno">  498</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  499</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop</span></div>
<div class="line"><span class="lineno">  500</span>          <span class="comment">// Bit 6:</span></div>
<div class="line"><span class="lineno">  501</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  502</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = hi</span></div>
<div class="line"><span class="lineno">  503</span>          <span class="stringliteral">&quot;mov  %[n1]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  504</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    n1   = lo</span></div>
<div class="line"><span class="lineno">  505</span>          <span class="stringliteral">&quot;out  %[port] , %[n2]&quot;</span></div>
<div class="line"><span class="lineno">  506</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = n2</span></div>
<div class="line"><span class="lineno">  507</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  508</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop</span></div>
<div class="line"><span class="lineno">  509</span>          <span class="stringliteral">&quot;sbrc %[byte] , 5&quot;</span></div>
<div class="line"><span class="lineno">  510</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1-2  if(b &amp; 0x20)</span></div>
<div class="line"><span class="lineno">  511</span>          <span class="stringliteral">&quot;mov %[n1]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  512</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 0-1   n1 = hi</span></div>
<div class="line"><span class="lineno">  513</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  514</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = lo</span></div>
<div class="line"><span class="lineno">  515</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  516</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop</span></div>
<div class="line"><span class="lineno">  517</span>          <span class="comment">// Bit 5:</span></div>
<div class="line"><span class="lineno">  518</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  519</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = hi</span></div>
<div class="line"><span class="lineno">  520</span>          <span class="stringliteral">&quot;mov  %[n2]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  521</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    n2   = lo</span></div>
<div class="line"><span class="lineno">  522</span>          <span class="stringliteral">&quot;out  %[port] , %[n1]&quot;</span></div>
<div class="line"><span class="lineno">  523</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = n1</span></div>
<div class="line"><span class="lineno">  524</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  525</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop</span></div>
<div class="line"><span class="lineno">  526</span>          <span class="stringliteral">&quot;sbrc %[byte] , 4&quot;</span></div>
<div class="line"><span class="lineno">  527</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1-2  if(b &amp; 0x10)</span></div>
<div class="line"><span class="lineno">  528</span>          <span class="stringliteral">&quot;mov %[n2]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  529</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 0-1   n2 = hi</span></div>
<div class="line"><span class="lineno">  530</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  531</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = lo</span></div>
<div class="line"><span class="lineno">  532</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  533</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop</span></div>
<div class="line"><span class="lineno">  534</span>          <span class="comment">// Bit 4:</span></div>
<div class="line"><span class="lineno">  535</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  536</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = hi</span></div>
<div class="line"><span class="lineno">  537</span>          <span class="stringliteral">&quot;mov  %[n1]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  538</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    n1   = lo</span></div>
<div class="line"><span class="lineno">  539</span>          <span class="stringliteral">&quot;out  %[port] , %[n2]&quot;</span></div>
<div class="line"><span class="lineno">  540</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = n2</span></div>
<div class="line"><span class="lineno">  541</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  542</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop</span></div>
<div class="line"><span class="lineno">  543</span>          <span class="stringliteral">&quot;sbrc %[byte] , 3&quot;</span></div>
<div class="line"><span class="lineno">  544</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1-2  if(b &amp; 0x08)</span></div>
<div class="line"><span class="lineno">  545</span>          <span class="stringliteral">&quot;mov %[n1]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  546</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 0-1   n1 = hi</span></div>
<div class="line"><span class="lineno">  547</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  548</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = lo</span></div>
<div class="line"><span class="lineno">  549</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  550</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop</span></div>
<div class="line"><span class="lineno">  551</span>          <span class="comment">// Bit 3:</span></div>
<div class="line"><span class="lineno">  552</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  553</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = hi</span></div>
<div class="line"><span class="lineno">  554</span>          <span class="stringliteral">&quot;mov  %[n2]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  555</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    n2   = lo</span></div>
<div class="line"><span class="lineno">  556</span>          <span class="stringliteral">&quot;out  %[port] , %[n1]&quot;</span></div>
<div class="line"><span class="lineno">  557</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = n1</span></div>
<div class="line"><span class="lineno">  558</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  559</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop</span></div>
<div class="line"><span class="lineno">  560</span>          <span class="stringliteral">&quot;sbrc %[byte] , 2&quot;</span></div>
<div class="line"><span class="lineno">  561</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1-2  if(b &amp; 0x04)</span></div>
<div class="line"><span class="lineno">  562</span>          <span class="stringliteral">&quot;mov %[n2]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  563</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 0-1   n2 = hi</span></div>
<div class="line"><span class="lineno">  564</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  565</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = lo</span></div>
<div class="line"><span class="lineno">  566</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  567</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop</span></div>
<div class="line"><span class="lineno">  568</span>          <span class="comment">// Bit 2:</span></div>
<div class="line"><span class="lineno">  569</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  570</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = hi</span></div>
<div class="line"><span class="lineno">  571</span>          <span class="stringliteral">&quot;mov  %[n1]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  572</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    n1   = lo</span></div>
<div class="line"><span class="lineno">  573</span>          <span class="stringliteral">&quot;out  %[port] , %[n2]&quot;</span></div>
<div class="line"><span class="lineno">  574</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = n2</span></div>
<div class="line"><span class="lineno">  575</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  576</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop</span></div>
<div class="line"><span class="lineno">  577</span>          <span class="stringliteral">&quot;sbrc %[byte] , 1&quot;</span></div>
<div class="line"><span class="lineno">  578</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1-2  if(b &amp; 0x02)</span></div>
<div class="line"><span class="lineno">  579</span>          <span class="stringliteral">&quot;mov %[n1]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  580</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 0-1   n1 = hi</span></div>
<div class="line"><span class="lineno">  581</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  582</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = lo</span></div>
<div class="line"><span class="lineno">  583</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  584</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop</span></div>
<div class="line"><span class="lineno">  585</span>          <span class="comment">// Bit 1:</span></div>
<div class="line"><span class="lineno">  586</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  587</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = hi</span></div>
<div class="line"><span class="lineno">  588</span>          <span class="stringliteral">&quot;mov  %[n2]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  589</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    n2   = lo</span></div>
<div class="line"><span class="lineno">  590</span>          <span class="stringliteral">&quot;out  %[port] , %[n1]&quot;</span></div>
<div class="line"><span class="lineno">  591</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = n1</span></div>
<div class="line"><span class="lineno">  592</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  593</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop</span></div>
<div class="line"><span class="lineno">  594</span>          <span class="stringliteral">&quot;sbrc %[byte] , 0&quot;</span></div>
<div class="line"><span class="lineno">  595</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1-2  if(b &amp; 0x01)</span></div>
<div class="line"><span class="lineno">  596</span>          <span class="stringliteral">&quot;mov %[n2]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  597</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 0-1   n2 = hi</span></div>
<div class="line"><span class="lineno">  598</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  599</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = lo</span></div>
<div class="line"><span class="lineno">  600</span>          <span class="stringliteral">&quot;sbiw %[count], 1&quot;</span></div>
<div class="line"><span class="lineno">  601</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    i-- (don&#39;t act on Z flag yet)</span></div>
<div class="line"><span class="lineno">  602</span>          <span class="comment">// Bit 0:</span></div>
<div class="line"><span class="lineno">  603</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  604</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = hi</span></div>
<div class="line"><span class="lineno">  605</span>          <span class="stringliteral">&quot;mov  %[n1]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  606</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    n1   = lo</span></div>
<div class="line"><span class="lineno">  607</span>          <span class="stringliteral">&quot;out  %[port] , %[n2]&quot;</span></div>
<div class="line"><span class="lineno">  608</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = n2</span></div>
<div class="line"><span class="lineno">  609</span>          <span class="stringliteral">&quot;ld   %[byte] , %a[ptr]+&quot;</span></div>
<div class="line"><span class="lineno">  610</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    b = *ptr++</span></div>
<div class="line"><span class="lineno">  611</span>          <span class="stringliteral">&quot;sbrc %[byte] , 7&quot;</span></div>
<div class="line"><span class="lineno">  612</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1-2  if(b &amp; 0x80)</span></div>
<div class="line"><span class="lineno">  613</span>          <span class="stringliteral">&quot;mov %[n1]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  614</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 0-1   n1 = hi</span></div>
<div class="line"><span class="lineno">  615</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  616</span>          <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = lo</span></div>
<div class="line"><span class="lineno">  617</span>          <span class="stringliteral">&quot;brne headD&quot;</span></div>
<div class="line"><span class="lineno">  618</span>          <span class="stringliteral">&quot;\n&quot;</span> <span class="comment">// 2    while(i) (Z flag set above)</span></div>
<div class="line"><span class="lineno">  619</span>          : [byte] <span class="stringliteral">&quot;+r&quot;</span>(b), [n1] <span class="stringliteral">&quot;+r&quot;</span>(n1), [n2] <span class="stringliteral">&quot;+r&quot;</span>(n2), [count] <span class="stringliteral">&quot;+w&quot;</span>(i)</div>
<div class="line"><span class="lineno">  620</span>          : [port] <span class="stringliteral">&quot;I&quot;</span>(_SFR_IO_ADDR(PORTD)), [ptr] <span class="stringliteral">&quot;e&quot;</span>(ptr), [hi] <span class="stringliteral">&quot;r&quot;</span>(hi),</div>
<div class="line"><span class="lineno">  621</span>            [lo] <span class="stringliteral">&quot;r&quot;</span>(lo));</div>
<div class="line"><span class="lineno">  622</span> </div>
<div class="line"><span class="lineno">  623</span><span class="preprocessor">#if defined(PORTB) || defined(PORTC) || defined(PORTF)</span></div>
<div class="line"><span class="lineno">  624</span>    } <span class="keywordflow">else</span> <span class="comment">// other PORT(s)</span></div>
<div class="line"><span class="lineno">  625</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTB/C/F)</span></div>
<div class="line"><span class="lineno">  626</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTD)</span></div>
<div class="line"><span class="lineno">  627</span> </div>
<div class="line"><span class="lineno">  628</span>    <span class="comment">// PORTB OUTPUT ----------------------------------------------------</span></div>
<div class="line"><span class="lineno">  629</span> </div>
<div class="line"><span class="lineno">  630</span><span class="preprocessor">#if defined(PORTB)</span></div>
<div class="line"><span class="lineno">  631</span><span class="preprocessor">#if defined(PORTD) || defined(PORTC) || defined(PORTF)</span></div>
<div class="line"><span class="lineno">  632</span>        <span class="keywordflow">if</span> (port == &amp;PORTB) {</div>
<div class="line"><span class="lineno">  633</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTD/C/F)</span></div>
<div class="line"><span class="lineno">  634</span> </div>
<div class="line"><span class="lineno">  635</span>      <span class="comment">// Same as above, just switched to PORTB and stripped of comments.</span></div>
<div class="line"><span class="lineno">  636</span>      hi = PORTB | pinMask;</div>
<div class="line"><span class="lineno">  637</span>      lo = PORTB &amp; ~pinMask;</div>
<div class="line"><span class="lineno">  638</span>      n1 = lo;</div>
<div class="line"><span class="lineno">  639</span>      <span class="keywordflow">if</span> (b &amp; 0x80)</div>
<div class="line"><span class="lineno">  640</span>        n1 = hi;</div>
<div class="line"><span class="lineno">  641</span> </div>
<div class="line"><span class="lineno">  642</span>      <span class="keyword">asm</span> <span class="keyword">volatile</span>(</div>
<div class="line"><span class="lineno">  643</span>          <span class="stringliteral">&quot;headB:&quot;</span></div>
<div class="line"><span class="lineno">  644</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  645</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  646</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  647</span>          <span class="stringliteral">&quot;mov  %[n2]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  648</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  649</span>          <span class="stringliteral">&quot;out  %[port] , %[n1]&quot;</span></div>
<div class="line"><span class="lineno">  650</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  651</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  652</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  653</span>          <span class="stringliteral">&quot;sbrc %[byte] , 6&quot;</span></div>
<div class="line"><span class="lineno">  654</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  655</span>          <span class="stringliteral">&quot;mov %[n2]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  656</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  657</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  658</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  659</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  660</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  661</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  662</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  663</span>          <span class="stringliteral">&quot;mov  %[n1]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  664</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  665</span>          <span class="stringliteral">&quot;out  %[port] , %[n2]&quot;</span></div>
<div class="line"><span class="lineno">  666</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  667</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  668</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  669</span>          <span class="stringliteral">&quot;sbrc %[byte] , 5&quot;</span></div>
<div class="line"><span class="lineno">  670</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  671</span>          <span class="stringliteral">&quot;mov %[n1]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  672</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  673</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  674</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  675</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  676</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  677</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  678</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  679</span>          <span class="stringliteral">&quot;mov  %[n2]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  680</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  681</span>          <span class="stringliteral">&quot;out  %[port] , %[n1]&quot;</span></div>
<div class="line"><span class="lineno">  682</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  683</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  684</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  685</span>          <span class="stringliteral">&quot;sbrc %[byte] , 4&quot;</span></div>
<div class="line"><span class="lineno">  686</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  687</span>          <span class="stringliteral">&quot;mov %[n2]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  688</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  689</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  690</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  691</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  692</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  693</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  694</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  695</span>          <span class="stringliteral">&quot;mov  %[n1]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  696</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  697</span>          <span class="stringliteral">&quot;out  %[port] , %[n2]&quot;</span></div>
<div class="line"><span class="lineno">  698</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  699</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  700</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  701</span>          <span class="stringliteral">&quot;sbrc %[byte] , 3&quot;</span></div>
<div class="line"><span class="lineno">  702</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  703</span>          <span class="stringliteral">&quot;mov %[n1]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  704</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  705</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  706</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  707</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  708</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  709</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  710</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  711</span>          <span class="stringliteral">&quot;mov  %[n2]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  712</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  713</span>          <span class="stringliteral">&quot;out  %[port] , %[n1]&quot;</span></div>
<div class="line"><span class="lineno">  714</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  715</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  716</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  717</span>          <span class="stringliteral">&quot;sbrc %[byte] , 2&quot;</span></div>
<div class="line"><span class="lineno">  718</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  719</span>          <span class="stringliteral">&quot;mov %[n2]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  720</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  721</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  722</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  723</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  724</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  725</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  726</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  727</span>          <span class="stringliteral">&quot;mov  %[n1]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  728</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  729</span>          <span class="stringliteral">&quot;out  %[port] , %[n2]&quot;</span></div>
<div class="line"><span class="lineno">  730</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  731</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  732</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  733</span>          <span class="stringliteral">&quot;sbrc %[byte] , 1&quot;</span></div>
<div class="line"><span class="lineno">  734</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  735</span>          <span class="stringliteral">&quot;mov %[n1]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  736</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  737</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  738</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  739</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  740</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  741</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  742</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  743</span>          <span class="stringliteral">&quot;mov  %[n2]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  744</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  745</span>          <span class="stringliteral">&quot;out  %[port] , %[n1]&quot;</span></div>
<div class="line"><span class="lineno">  746</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  747</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  748</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  749</span>          <span class="stringliteral">&quot;sbrc %[byte] , 0&quot;</span></div>
<div class="line"><span class="lineno">  750</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  751</span>          <span class="stringliteral">&quot;mov %[n2]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  752</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  753</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  754</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  755</span>          <span class="stringliteral">&quot;sbiw %[count], 1&quot;</span></div>
<div class="line"><span class="lineno">  756</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  757</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  758</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  759</span>          <span class="stringliteral">&quot;mov  %[n1]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  760</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  761</span>          <span class="stringliteral">&quot;out  %[port] , %[n2]&quot;</span></div>
<div class="line"><span class="lineno">  762</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  763</span>          <span class="stringliteral">&quot;ld   %[byte] , %a[ptr]+&quot;</span></div>
<div class="line"><span class="lineno">  764</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  765</span>          <span class="stringliteral">&quot;sbrc %[byte] , 7&quot;</span></div>
<div class="line"><span class="lineno">  766</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  767</span>          <span class="stringliteral">&quot;mov %[n1]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  768</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  769</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  770</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  771</span>          <span class="stringliteral">&quot;brne headB&quot;</span></div>
<div class="line"><span class="lineno">  772</span>          <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno">  773</span>          : [byte] <span class="stringliteral">&quot;+r&quot;</span>(b), [n1] <span class="stringliteral">&quot;+r&quot;</span>(n1), [n2] <span class="stringliteral">&quot;+r&quot;</span>(n2), [count] <span class="stringliteral">&quot;+w&quot;</span>(i)</div>
<div class="line"><span class="lineno">  774</span>          : [port] <span class="stringliteral">&quot;I&quot;</span>(_SFR_IO_ADDR(PORTB)), [ptr] <span class="stringliteral">&quot;e&quot;</span>(ptr), [hi] <span class="stringliteral">&quot;r&quot;</span>(hi),</div>
<div class="line"><span class="lineno">  775</span>            [lo] <span class="stringliteral">&quot;r&quot;</span>(lo));</div>
<div class="line"><span class="lineno">  776</span> </div>
<div class="line"><span class="lineno">  777</span><span class="preprocessor">#if defined(PORTD) || defined(PORTC) || defined(PORTF)</span></div>
<div class="line"><span class="lineno">  778</span>    }</div>
<div class="line"><span class="lineno">  779</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  780</span><span class="preprocessor">#if defined(PORTC) || defined(PORTF)</span></div>
<div class="line"><span class="lineno">  781</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  782</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTC/F)</span></div>
<div class="line"><span class="lineno">  783</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTB)</span></div>
<div class="line"><span class="lineno">  784</span> </div>
<div class="line"><span class="lineno">  785</span>    <span class="comment">// PORTC OUTPUT ----------------------------------------------------</span></div>
<div class="line"><span class="lineno">  786</span> </div>
<div class="line"><span class="lineno">  787</span><span class="preprocessor">#if defined(PORTC)</span></div>
<div class="line"><span class="lineno">  788</span><span class="preprocessor">#if defined(PORTD) || defined(PORTB) || defined(PORTF)</span></div>
<div class="line"><span class="lineno">  789</span>        <span class="keywordflow">if</span> (port == &amp;PORTC) {</div>
<div class="line"><span class="lineno">  790</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTD/B/F)</span></div>
<div class="line"><span class="lineno">  791</span> </div>
<div class="line"><span class="lineno">  792</span>      <span class="comment">// Same as above, just switched to PORTC and stripped of comments.</span></div>
<div class="line"><span class="lineno">  793</span>      hi = PORTC | pinMask;</div>
<div class="line"><span class="lineno">  794</span>      lo = PORTC &amp; ~pinMask;</div>
<div class="line"><span class="lineno">  795</span>      n1 = lo;</div>
<div class="line"><span class="lineno">  796</span>      <span class="keywordflow">if</span> (b &amp; 0x80)</div>
<div class="line"><span class="lineno">  797</span>        n1 = hi;</div>
<div class="line"><span class="lineno">  798</span> </div>
<div class="line"><span class="lineno">  799</span>      <span class="keyword">asm</span> <span class="keyword">volatile</span>(</div>
<div class="line"><span class="lineno">  800</span>          <span class="stringliteral">&quot;headC:&quot;</span></div>
<div class="line"><span class="lineno">  801</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  802</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  803</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  804</span>          <span class="stringliteral">&quot;mov  %[n2]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  805</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  806</span>          <span class="stringliteral">&quot;out  %[port] , %[n1]&quot;</span></div>
<div class="line"><span class="lineno">  807</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  808</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  809</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  810</span>          <span class="stringliteral">&quot;sbrc %[byte] , 6&quot;</span></div>
<div class="line"><span class="lineno">  811</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  812</span>          <span class="stringliteral">&quot;mov %[n2]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  813</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  814</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  815</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  816</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  817</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  818</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  819</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  820</span>          <span class="stringliteral">&quot;mov  %[n1]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  821</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  822</span>          <span class="stringliteral">&quot;out  %[port] , %[n2]&quot;</span></div>
<div class="line"><span class="lineno">  823</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  824</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  825</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  826</span>          <span class="stringliteral">&quot;sbrc %[byte] , 5&quot;</span></div>
<div class="line"><span class="lineno">  827</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  828</span>          <span class="stringliteral">&quot;mov %[n1]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  829</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  830</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  831</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  832</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  833</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  834</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  835</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  836</span>          <span class="stringliteral">&quot;mov  %[n2]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  837</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  838</span>          <span class="stringliteral">&quot;out  %[port] , %[n1]&quot;</span></div>
<div class="line"><span class="lineno">  839</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  840</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  841</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  842</span>          <span class="stringliteral">&quot;sbrc %[byte] , 4&quot;</span></div>
<div class="line"><span class="lineno">  843</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  844</span>          <span class="stringliteral">&quot;mov %[n2]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  845</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  846</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  847</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  848</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  849</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  850</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  851</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  852</span>          <span class="stringliteral">&quot;mov  %[n1]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  853</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  854</span>          <span class="stringliteral">&quot;out  %[port] , %[n2]&quot;</span></div>
<div class="line"><span class="lineno">  855</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  856</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  857</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  858</span>          <span class="stringliteral">&quot;sbrc %[byte] , 3&quot;</span></div>
<div class="line"><span class="lineno">  859</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  860</span>          <span class="stringliteral">&quot;mov %[n1]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  861</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  862</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  863</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  864</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  865</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  866</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  867</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  868</span>          <span class="stringliteral">&quot;mov  %[n2]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  869</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  870</span>          <span class="stringliteral">&quot;out  %[port] , %[n1]&quot;</span></div>
<div class="line"><span class="lineno">  871</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  872</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  873</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  874</span>          <span class="stringliteral">&quot;sbrc %[byte] , 2&quot;</span></div>
<div class="line"><span class="lineno">  875</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  876</span>          <span class="stringliteral">&quot;mov %[n2]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  877</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  878</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  879</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  880</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  881</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  882</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  883</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  884</span>          <span class="stringliteral">&quot;mov  %[n1]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  885</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  886</span>          <span class="stringliteral">&quot;out  %[port] , %[n2]&quot;</span></div>
<div class="line"><span class="lineno">  887</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  888</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  889</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  890</span>          <span class="stringliteral">&quot;sbrc %[byte] , 1&quot;</span></div>
<div class="line"><span class="lineno">  891</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  892</span>          <span class="stringliteral">&quot;mov %[n1]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  893</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  894</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  895</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  896</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  897</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  898</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  899</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  900</span>          <span class="stringliteral">&quot;mov  %[n2]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  901</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  902</span>          <span class="stringliteral">&quot;out  %[port] , %[n1]&quot;</span></div>
<div class="line"><span class="lineno">  903</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  904</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  905</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  906</span>          <span class="stringliteral">&quot;sbrc %[byte] , 0&quot;</span></div>
<div class="line"><span class="lineno">  907</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  908</span>          <span class="stringliteral">&quot;mov %[n2]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  909</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  910</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  911</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  912</span>          <span class="stringliteral">&quot;sbiw %[count], 1&quot;</span></div>
<div class="line"><span class="lineno">  913</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  914</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  915</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  916</span>          <span class="stringliteral">&quot;mov  %[n1]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  917</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  918</span>          <span class="stringliteral">&quot;out  %[port] , %[n2]&quot;</span></div>
<div class="line"><span class="lineno">  919</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  920</span>          <span class="stringliteral">&quot;ld   %[byte] , %a[ptr]+&quot;</span></div>
<div class="line"><span class="lineno">  921</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  922</span>          <span class="stringliteral">&quot;sbrc %[byte] , 7&quot;</span></div>
<div class="line"><span class="lineno">  923</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  924</span>          <span class="stringliteral">&quot;mov %[n1]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  925</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  926</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  927</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  928</span>          <span class="stringliteral">&quot;brne headC&quot;</span></div>
<div class="line"><span class="lineno">  929</span>          <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno">  930</span>          : [byte] <span class="stringliteral">&quot;+r&quot;</span>(b), [n1] <span class="stringliteral">&quot;+r&quot;</span>(n1), [n2] <span class="stringliteral">&quot;+r&quot;</span>(n2), [count] <span class="stringliteral">&quot;+w&quot;</span>(i)</div>
<div class="line"><span class="lineno">  931</span>          : [port] <span class="stringliteral">&quot;I&quot;</span>(_SFR_IO_ADDR(PORTC)), [ptr] <span class="stringliteral">&quot;e&quot;</span>(ptr), [hi] <span class="stringliteral">&quot;r&quot;</span>(hi),</div>
<div class="line"><span class="lineno">  932</span>            [lo] <span class="stringliteral">&quot;r&quot;</span>(lo));</div>
<div class="line"><span class="lineno">  933</span> </div>
<div class="line"><span class="lineno">  934</span><span class="preprocessor">#if defined(PORTD) || defined(PORTB) || defined(PORTF)</span></div>
<div class="line"><span class="lineno">  935</span>    }</div>
<div class="line"><span class="lineno">  936</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTD/B/F)</span></div>
<div class="line"><span class="lineno">  937</span><span class="preprocessor">#if defined(PORTF)</span></div>
<div class="line"><span class="lineno">  938</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  939</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  940</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTC)</span></div>
<div class="line"><span class="lineno">  941</span> </div>
<div class="line"><span class="lineno">  942</span>    <span class="comment">// PORTF OUTPUT ----------------------------------------------------</span></div>
<div class="line"><span class="lineno">  943</span> </div>
<div class="line"><span class="lineno">  944</span><span class="preprocessor">#if defined(PORTF)</span></div>
<div class="line"><span class="lineno">  945</span><span class="preprocessor">#if defined(PORTD) || defined(PORTB) || defined(PORTC)</span></div>
<div class="line"><span class="lineno">  946</span>        <span class="keywordflow">if</span> (port == &amp;PORTF) {</div>
<div class="line"><span class="lineno">  947</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTD/B/C)</span></div>
<div class="line"><span class="lineno">  948</span> </div>
<div class="line"><span class="lineno">  949</span>      hi = PORTF | pinMask;</div>
<div class="line"><span class="lineno">  950</span>      lo = PORTF &amp; ~pinMask;</div>
<div class="line"><span class="lineno">  951</span>      n1 = lo;</div>
<div class="line"><span class="lineno">  952</span>      <span class="keywordflow">if</span> (b &amp; 0x80)</div>
<div class="line"><span class="lineno">  953</span>        n1 = hi;</div>
<div class="line"><span class="lineno">  954</span> </div>
<div class="line"><span class="lineno">  955</span>      <span class="keyword">asm</span> <span class="keyword">volatile</span>(</div>
<div class="line"><span class="lineno">  956</span>          <span class="stringliteral">&quot;headF:&quot;</span></div>
<div class="line"><span class="lineno">  957</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  958</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  959</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  960</span>          <span class="stringliteral">&quot;mov  %[n2]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  961</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  962</span>          <span class="stringliteral">&quot;out  %[port] , %[n1]&quot;</span></div>
<div class="line"><span class="lineno">  963</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  964</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  965</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  966</span>          <span class="stringliteral">&quot;sbrc %[byte] , 6&quot;</span></div>
<div class="line"><span class="lineno">  967</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  968</span>          <span class="stringliteral">&quot;mov %[n2]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  969</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  970</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  971</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  972</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  973</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  974</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  975</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  976</span>          <span class="stringliteral">&quot;mov  %[n1]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  977</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  978</span>          <span class="stringliteral">&quot;out  %[port] , %[n2]&quot;</span></div>
<div class="line"><span class="lineno">  979</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  980</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  981</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  982</span>          <span class="stringliteral">&quot;sbrc %[byte] , 5&quot;</span></div>
<div class="line"><span class="lineno">  983</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  984</span>          <span class="stringliteral">&quot;mov %[n1]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  985</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  986</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  987</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  988</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  989</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  990</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno">  991</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  992</span>          <span class="stringliteral">&quot;mov  %[n2]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno">  993</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  994</span>          <span class="stringliteral">&quot;out  %[port] , %[n1]&quot;</span></div>
<div class="line"><span class="lineno">  995</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  996</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno">  997</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno">  998</span>          <span class="stringliteral">&quot;sbrc %[byte] , 4&quot;</span></div>
<div class="line"><span class="lineno">  999</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1000</span>          <span class="stringliteral">&quot;mov %[n2]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1001</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1002</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1003</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1004</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1005</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1006</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1007</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1008</span>          <span class="stringliteral">&quot;mov  %[n1]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1009</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1010</span>          <span class="stringliteral">&quot;out  %[port] , %[n2]&quot;</span></div>
<div class="line"><span class="lineno"> 1011</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1012</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1013</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1014</span>          <span class="stringliteral">&quot;sbrc %[byte] , 3&quot;</span></div>
<div class="line"><span class="lineno"> 1015</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1016</span>          <span class="stringliteral">&quot;mov %[n1]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1017</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1018</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1019</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1020</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1021</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1022</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1023</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1024</span>          <span class="stringliteral">&quot;mov  %[n2]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1025</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1026</span>          <span class="stringliteral">&quot;out  %[port] , %[n1]&quot;</span></div>
<div class="line"><span class="lineno"> 1027</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1028</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1029</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1030</span>          <span class="stringliteral">&quot;sbrc %[byte] , 2&quot;</span></div>
<div class="line"><span class="lineno"> 1031</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1032</span>          <span class="stringliteral">&quot;mov %[n2]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1033</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1034</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1035</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1036</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1037</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1038</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1039</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1040</span>          <span class="stringliteral">&quot;mov  %[n1]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1041</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1042</span>          <span class="stringliteral">&quot;out  %[port] , %[n2]&quot;</span></div>
<div class="line"><span class="lineno"> 1043</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1044</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1045</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1046</span>          <span class="stringliteral">&quot;sbrc %[byte] , 1&quot;</span></div>
<div class="line"><span class="lineno"> 1047</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1048</span>          <span class="stringliteral">&quot;mov %[n1]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1049</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1050</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1051</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1052</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1053</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1054</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1055</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1056</span>          <span class="stringliteral">&quot;mov  %[n2]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1057</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1058</span>          <span class="stringliteral">&quot;out  %[port] , %[n1]&quot;</span></div>
<div class="line"><span class="lineno"> 1059</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1060</span>          <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1061</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1062</span>          <span class="stringliteral">&quot;sbrc %[byte] , 0&quot;</span></div>
<div class="line"><span class="lineno"> 1063</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1064</span>          <span class="stringliteral">&quot;mov %[n2]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1065</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1066</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1067</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1068</span>          <span class="stringliteral">&quot;sbiw %[count], 1&quot;</span></div>
<div class="line"><span class="lineno"> 1069</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1070</span>          <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1071</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1072</span>          <span class="stringliteral">&quot;mov  %[n1]   , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1073</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1074</span>          <span class="stringliteral">&quot;out  %[port] , %[n2]&quot;</span></div>
<div class="line"><span class="lineno"> 1075</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1076</span>          <span class="stringliteral">&quot;ld   %[byte] , %a[ptr]+&quot;</span></div>
<div class="line"><span class="lineno"> 1077</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1078</span>          <span class="stringliteral">&quot;sbrc %[byte] , 7&quot;</span></div>
<div class="line"><span class="lineno"> 1079</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1080</span>          <span class="stringliteral">&quot;mov %[n1]   , %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1081</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1082</span>          <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1083</span>          <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1084</span>          <span class="stringliteral">&quot;brne headF&quot;</span></div>
<div class="line"><span class="lineno"> 1085</span>          <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno"> 1086</span>          : [byte] <span class="stringliteral">&quot;+r&quot;</span>(b), [n1] <span class="stringliteral">&quot;+r&quot;</span>(n1), [n2] <span class="stringliteral">&quot;+r&quot;</span>(n2), [count] <span class="stringliteral">&quot;+w&quot;</span>(i)</div>
<div class="line"><span class="lineno"> 1087</span>          : [port] <span class="stringliteral">&quot;I&quot;</span>(_SFR_IO_ADDR(PORTF)), [ptr] <span class="stringliteral">&quot;e&quot;</span>(ptr), [hi] <span class="stringliteral">&quot;r&quot;</span>(hi),</div>
<div class="line"><span class="lineno"> 1088</span>            [lo] <span class="stringliteral">&quot;r&quot;</span>(lo));</div>
<div class="line"><span class="lineno"> 1089</span> </div>
<div class="line"><span class="lineno"> 1090</span><span class="preprocessor">#if defined(PORTD) || defined(PORTB) || defined(PORTC)</span></div>
<div class="line"><span class="lineno"> 1091</span>    }</div>
<div class="line"><span class="lineno"> 1092</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTD/B/C)</span></div>
<div class="line"><span class="lineno"> 1093</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTF)</span></div>
<div class="line"><span class="lineno"> 1094</span> </div>
<div class="line"><span class="lineno"> 1095</span><span class="preprocessor">#if defined(NEO_KHZ400)</span></div>
<div class="line"><span class="lineno"> 1096</span>  } <span class="keywordflow">else</span> { <span class="comment">// end 800 KHz, do 400 KHz</span></div>
<div class="line"><span class="lineno"> 1097</span> </div>
<div class="line"><span class="lineno"> 1098</span>    <span class="comment">// Timing is more relaxed; unrolling the inner loop for each bit is</span></div>
<div class="line"><span class="lineno"> 1099</span>    <span class="comment">// not necessary. Still using the peculiar RJMPs as 2X NOPs, not out</span></div>
<div class="line"><span class="lineno"> 1100</span>    <span class="comment">// of need but just to trim the code size down a little.</span></div>
<div class="line"><span class="lineno"> 1101</span>    <span class="comment">// This 400-KHz-datastream-on-8-MHz-CPU code is not quite identical</span></div>
<div class="line"><span class="lineno"> 1102</span>    <span class="comment">// to the 800-on-16 code later -- the hi/lo timing between WS2811 and</span></div>
<div class="line"><span class="lineno"> 1103</span>    <span class="comment">// WS2812 is not simply a 2:1 scale!</span></div>
<div class="line"><span class="lineno"> 1104</span> </div>
<div class="line"><span class="lineno"> 1105</span>    <span class="comment">// 20 inst. clocks per bit: HHHHxxxxxxLLLLLLLLLL</span></div>
<div class="line"><span class="lineno"> 1106</span>    <span class="comment">// ST instructions:         ^   ^     ^          (T=0,4,10)</span></div>
<div class="line"><span class="lineno"> 1107</span> </div>
<div class="line"><span class="lineno"> 1108</span>    <span class="keyword">volatile</span> uint8_t next, bit;</div>
<div class="line"><span class="lineno"> 1109</span> </div>
<div class="line"><span class="lineno"> 1110</span>    hi = *port | pinMask;</div>
<div class="line"><span class="lineno"> 1111</span>    lo = *port &amp; ~pinMask;</div>
<div class="line"><span class="lineno"> 1112</span>    next = lo;</div>
<div class="line"><span class="lineno"> 1113</span>    bit = 8;</div>
<div class="line"><span class="lineno"> 1114</span> </div>
<div class="line"><span class="lineno"> 1115</span>    <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;head20%=:&quot;</span></div>
<div class="line"><span class="lineno"> 1116</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// Clk  Pseudocode    (T =  0)</span></div>
<div class="line"><span class="lineno"> 1117</span>                 <span class="stringliteral">&quot;st   %a[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1118</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    PORT = hi     (T =  2)</span></div>
<div class="line"><span class="lineno"> 1119</span>                 <span class="stringliteral">&quot;sbrc %[byte] , 7&quot;</span></div>
<div class="line"><span class="lineno"> 1120</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1-2  if(b &amp; 128)</span></div>
<div class="line"><span class="lineno"> 1121</span>                 <span class="stringliteral">&quot;mov  %[next], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1122</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 0-1   next = hi    (T =  4)</span></div>
<div class="line"><span class="lineno"> 1123</span>                 <span class="stringliteral">&quot;st   %a[port], %[next]&quot;</span></div>
<div class="line"><span class="lineno"> 1124</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    PORT = next   (T =  6)</span></div>
<div class="line"><span class="lineno"> 1125</span>                 <span class="stringliteral">&quot;mov  %[next] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1126</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    next = lo     (T =  7)</span></div>
<div class="line"><span class="lineno"> 1127</span>                 <span class="stringliteral">&quot;dec  %[bit]&quot;</span></div>
<div class="line"><span class="lineno"> 1128</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    bit--         (T =  8)</span></div>
<div class="line"><span class="lineno"> 1129</span>                 <span class="stringliteral">&quot;breq nextbyte20%=&quot;</span></div>
<div class="line"><span class="lineno"> 1130</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1-2  if(bit == 0)</span></div>
<div class="line"><span class="lineno"> 1131</span>                 <span class="stringliteral">&quot;rol  %[byte]&quot;</span></div>
<div class="line"><span class="lineno"> 1132</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    b &lt;&lt;= 1       (T = 10)</span></div>
<div class="line"><span class="lineno"> 1133</span>                 <span class="stringliteral">&quot;st   %a[port], %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1134</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    PORT = lo     (T = 12)</span></div>
<div class="line"><span class="lineno"> 1135</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1136</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 14)</span></div>
<div class="line"><span class="lineno"> 1137</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1138</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 16)</span></div>
<div class="line"><span class="lineno"> 1139</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1140</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 18)</span></div>
<div class="line"><span class="lineno"> 1141</span>                 <span class="stringliteral">&quot;rjmp head20%=&quot;</span></div>
<div class="line"><span class="lineno"> 1142</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    -&gt; head20 (next bit out)</span></div>
<div class="line"><span class="lineno"> 1143</span>                 <span class="stringliteral">&quot;nextbyte20%=:&quot;</span></div>
<div class="line"><span class="lineno"> 1144</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//                    (T = 10)</span></div>
<div class="line"><span class="lineno"> 1145</span>                 <span class="stringliteral">&quot;st   %a[port], %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1146</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    PORT = lo     (T = 12)</span></div>
<div class="line"><span class="lineno"> 1147</span>                 <span class="stringliteral">&quot;nop&quot;</span></div>
<div class="line"><span class="lineno"> 1148</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    nop           (T = 13)</span></div>
<div class="line"><span class="lineno"> 1149</span>                 <span class="stringliteral">&quot;ldi  %[bit]  , 8&quot;</span></div>
<div class="line"><span class="lineno"> 1150</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    bit = 8       (T = 14)</span></div>
<div class="line"><span class="lineno"> 1151</span>                 <span class="stringliteral">&quot;ld   %[byte] , %a[ptr]+&quot;</span></div>
<div class="line"><span class="lineno"> 1152</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    b = *ptr++    (T = 16)</span></div>
<div class="line"><span class="lineno"> 1153</span>                 <span class="stringliteral">&quot;sbiw %[count], 1&quot;</span></div>
<div class="line"><span class="lineno"> 1154</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    i--           (T = 18)</span></div>
<div class="line"><span class="lineno"> 1155</span>                 <span class="stringliteral">&quot;brne head20%=&quot;</span></div>
<div class="line"><span class="lineno"> 1156</span>                 <span class="stringliteral">&quot;\n&quot;</span> <span class="comment">// 2    if(i != 0) -&gt; (next byte)</span></div>
<div class="line"><span class="lineno"> 1157</span>                 : [port] <span class="stringliteral">&quot;+e&quot;</span>(port), [byte] <span class="stringliteral">&quot;+r&quot;</span>(b), [bit] <span class="stringliteral">&quot;+r&quot;</span>(bit),</div>
<div class="line"><span class="lineno"> 1158</span>                   [next] <span class="stringliteral">&quot;+r&quot;</span>(next), [count] <span class="stringliteral">&quot;+w&quot;</span>(i)</div>
<div class="line"><span class="lineno"> 1159</span>                 : [hi] <span class="stringliteral">&quot;r&quot;</span>(hi), [lo] <span class="stringliteral">&quot;r&quot;</span>(lo), [ptr] <span class="stringliteral">&quot;e&quot;</span>(ptr));</div>
<div class="line"><span class="lineno"> 1160</span>  }</div>
<div class="line"><span class="lineno"> 1161</span><span class="preprocessor">#endif </span><span class="comment">// NEO_KHZ400</span></div>
<div class="line"><span class="lineno"> 1162</span> </div>
<div class="line"><span class="lineno"> 1163</span><span class="comment">// 12 MHz(ish) AVR --------------------------------------------------------</span></div>
<div class="line"><span class="lineno"> 1164</span><span class="preprocessor">#elif (F_CPU &gt;= 11100000UL) &amp;&amp; (F_CPU &lt;= 14300000UL)</span></div>
<div class="line"><span class="lineno"> 1165</span> </div>
<div class="line"><span class="lineno"> 1166</span><span class="preprocessor">#if defined(NEO_KHZ400) </span><span class="comment">// 800 KHz check needed only if 400 KHz support enabled</span></div>
<div class="line"><span class="lineno"> 1167</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>) {</div>
<div class="line"><span class="lineno"> 1168</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1169</span> </div>
<div class="line"><span class="lineno"> 1170</span>    <span class="comment">// In the 12 MHz case, an optimized 800 KHz datastream (no dead time</span></div>
<div class="line"><span class="lineno"> 1171</span>    <span class="comment">// between bytes) requires a PORT-specific loop similar to the 8 MHz</span></div>
<div class="line"><span class="lineno"> 1172</span>    <span class="comment">// code (but a little more relaxed in this case).</span></div>
<div class="line"><span class="lineno"> 1173</span> </div>
<div class="line"><span class="lineno"> 1174</span>    <span class="comment">// 15 instruction clocks per bit: HHHHxxxxxxLLLLL</span></div>
<div class="line"><span class="lineno"> 1175</span>    <span class="comment">// OUT instructions:              ^   ^     ^     (T=0,4,10)</span></div>
<div class="line"><span class="lineno"> 1176</span> </div>
<div class="line"><span class="lineno"> 1177</span>    <span class="keyword">volatile</span> uint8_t next;</div>
<div class="line"><span class="lineno"> 1178</span> </div>
<div class="line"><span class="lineno"> 1179</span>    <span class="comment">// PORTD OUTPUT ----------------------------------------------------</span></div>
<div class="line"><span class="lineno"> 1180</span> </div>
<div class="line"><span class="lineno"> 1181</span><span class="preprocessor">#if defined(PORTD)</span></div>
<div class="line"><span class="lineno"> 1182</span><span class="preprocessor">#if defined(PORTB) || defined(PORTC) || defined(PORTF)</span></div>
<div class="line"><span class="lineno"> 1183</span>    <span class="keywordflow">if</span> (port == &amp;PORTD) {</div>
<div class="line"><span class="lineno"> 1184</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTB/C/F)</span></div>
<div class="line"><span class="lineno"> 1185</span> </div>
<div class="line"><span class="lineno"> 1186</span>      hi = PORTD | pinMask;</div>
<div class="line"><span class="lineno"> 1187</span>      lo = PORTD &amp; ~pinMask;</div>
<div class="line"><span class="lineno"> 1188</span>      next = lo;</div>
<div class="line"><span class="lineno"> 1189</span>      <span class="keywordflow">if</span> (b &amp; 0x80)</div>
<div class="line"><span class="lineno"> 1190</span>        next = hi;</div>
<div class="line"><span class="lineno"> 1191</span> </div>
<div class="line"><span class="lineno"> 1192</span>      <span class="comment">// Don&#39;t &quot;optimize&quot; the OUT calls into the bitTime subroutine;</span></div>
<div class="line"><span class="lineno"> 1193</span>      <span class="comment">// we&#39;re exploiting the RCALL and RET as 3- and 4-cycle NOPs!</span></div>
<div class="line"><span class="lineno"> 1194</span>      <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;headD:&quot;</span></div>
<div class="line"><span class="lineno"> 1195</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//        (T =  0)</span></div>
<div class="line"><span class="lineno"> 1196</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1197</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//        (T =  1)</span></div>
<div class="line"><span class="lineno"> 1198</span>                   <span class="stringliteral">&quot;rcall bitTimeD&quot;</span></div>
<div class="line"><span class="lineno"> 1199</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// Bit 7  (T = 15)</span></div>
<div class="line"><span class="lineno"> 1200</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1201</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1202</span>                   <span class="stringliteral">&quot;rcall bitTimeD&quot;</span></div>
<div class="line"><span class="lineno"> 1203</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// Bit 6</span></div>
<div class="line"><span class="lineno"> 1204</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1205</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1206</span>                   <span class="stringliteral">&quot;rcall bitTimeD&quot;</span></div>
<div class="line"><span class="lineno"> 1207</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// Bit 5</span></div>
<div class="line"><span class="lineno"> 1208</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1209</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1210</span>                   <span class="stringliteral">&quot;rcall bitTimeD&quot;</span></div>
<div class="line"><span class="lineno"> 1211</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// Bit 4</span></div>
<div class="line"><span class="lineno"> 1212</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1213</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1214</span>                   <span class="stringliteral">&quot;rcall bitTimeD&quot;</span></div>
<div class="line"><span class="lineno"> 1215</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// Bit 3</span></div>
<div class="line"><span class="lineno"> 1216</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1217</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1218</span>                   <span class="stringliteral">&quot;rcall bitTimeD&quot;</span></div>
<div class="line"><span class="lineno"> 1219</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// Bit 2</span></div>
<div class="line"><span class="lineno"> 1220</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1221</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1222</span>                   <span class="stringliteral">&quot;rcall bitTimeD&quot;</span></div>
<div class="line"><span class="lineno"> 1223</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// Bit 1</span></div>
<div class="line"><span class="lineno"> 1224</span>                   <span class="comment">// Bit 0:</span></div>
<div class="line"><span class="lineno"> 1225</span>                   <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1226</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = hi    (T =  1)</span></div>
<div class="line"><span class="lineno"> 1227</span>                   <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1228</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop      (T =  3)</span></div>
<div class="line"><span class="lineno"> 1229</span>                   <span class="stringliteral">&quot;ld   %[byte] , %a[ptr]+&quot;</span></div>
<div class="line"><span class="lineno"> 1230</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    b = *ptr++   (T =  5)</span></div>
<div class="line"><span class="lineno"> 1231</span>                   <span class="stringliteral">&quot;out  %[port] , %[next]&quot;</span></div>
<div class="line"><span class="lineno"> 1232</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = next  (T =  6)</span></div>
<div class="line"><span class="lineno"> 1233</span>                   <span class="stringliteral">&quot;mov  %[next] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1234</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    next = lo    (T =  7)</span></div>
<div class="line"><span class="lineno"> 1235</span>                   <span class="stringliteral">&quot;sbrc %[byte] , 7&quot;</span></div>
<div class="line"><span class="lineno"> 1236</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1-2  if(b &amp; 0x80) (T =  8)</span></div>
<div class="line"><span class="lineno"> 1237</span>                   <span class="stringliteral">&quot;mov %[next] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1238</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 0-1    next = hi  (T =  9)</span></div>
<div class="line"><span class="lineno"> 1239</span>                   <span class="stringliteral">&quot;nop&quot;</span></div>
<div class="line"><span class="lineno"> 1240</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1                 (T = 10)</span></div>
<div class="line"><span class="lineno"> 1241</span>                   <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1242</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = lo    (T = 11)</span></div>
<div class="line"><span class="lineno"> 1243</span>                   <span class="stringliteral">&quot;sbiw %[count], 1&quot;</span></div>
<div class="line"><span class="lineno"> 1244</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    i--          (T = 13)</span></div>
<div class="line"><span class="lineno"> 1245</span>                   <span class="stringliteral">&quot;brne headD&quot;</span></div>
<div class="line"><span class="lineno"> 1246</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    if(i != 0) -&gt; (next byte)</span></div>
<div class="line"><span class="lineno"> 1247</span>                   <span class="stringliteral">&quot;rjmp doneD&quot;</span></div>
<div class="line"><span class="lineno"> 1248</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1249</span>                   <span class="stringliteral">&quot;bitTimeD:&quot;</span></div>
<div class="line"><span class="lineno"> 1250</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//      nop nop nop     (T =  4)</span></div>
<div class="line"><span class="lineno"> 1251</span>                   <span class="stringliteral">&quot;out  %[port], %[next]&quot;</span></div>
<div class="line"><span class="lineno"> 1252</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = next     (T =  5)</span></div>
<div class="line"><span class="lineno"> 1253</span>                   <span class="stringliteral">&quot;mov  %[next], %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1254</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    next = lo       (T =  6)</span></div>
<div class="line"><span class="lineno"> 1255</span>                   <span class="stringliteral">&quot;rol  %[byte]&quot;</span></div>
<div class="line"><span class="lineno"> 1256</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    b &lt;&lt;= 1         (T =  7)</span></div>
<div class="line"><span class="lineno"> 1257</span>                   <span class="stringliteral">&quot;sbrc %[byte], 7&quot;</span></div>
<div class="line"><span class="lineno"> 1258</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1-2  if(b &amp; 0x80)    (T =  8)</span></div>
<div class="line"><span class="lineno"> 1259</span>                   <span class="stringliteral">&quot;mov %[next], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1260</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 0-1   next = hi      (T =  9)</span></div>
<div class="line"><span class="lineno"> 1261</span>                   <span class="stringliteral">&quot;nop&quot;</span></div>
<div class="line"><span class="lineno"> 1262</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1                    (T = 10)</span></div>
<div class="line"><span class="lineno"> 1263</span>                   <span class="stringliteral">&quot;out  %[port], %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1264</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    PORT = lo       (T = 11)</span></div>
<div class="line"><span class="lineno"> 1265</span>                   <span class="stringliteral">&quot;ret&quot;</span></div>
<div class="line"><span class="lineno"> 1266</span>                   <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 4    nop nop nop nop (T = 15)</span></div>
<div class="line"><span class="lineno"> 1267</span>                   <span class="stringliteral">&quot;doneD:&quot;</span></div>
<div class="line"><span class="lineno"> 1268</span>                   <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno"> 1269</span>                   : [byte] <span class="stringliteral">&quot;+r&quot;</span>(b), [next] <span class="stringliteral">&quot;+r&quot;</span>(next), [count] <span class="stringliteral">&quot;+w&quot;</span>(i)</div>
<div class="line"><span class="lineno"> 1270</span>                   : [port] <span class="stringliteral">&quot;I&quot;</span>(_SFR_IO_ADDR(PORTD)), [ptr] <span class="stringliteral">&quot;e&quot;</span>(ptr),</div>
<div class="line"><span class="lineno"> 1271</span>                     [hi] <span class="stringliteral">&quot;r&quot;</span>(hi), [lo] <span class="stringliteral">&quot;r&quot;</span>(lo));</div>
<div class="line"><span class="lineno"> 1272</span> </div>
<div class="line"><span class="lineno"> 1273</span><span class="preprocessor">#if defined(PORTB) || defined(PORTC) || defined(PORTF)</span></div>
<div class="line"><span class="lineno"> 1274</span>    } <span class="keywordflow">else</span> <span class="comment">// other PORT(s)</span></div>
<div class="line"><span class="lineno"> 1275</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTB/C/F)</span></div>
<div class="line"><span class="lineno"> 1276</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTD)</span></div>
<div class="line"><span class="lineno"> 1277</span> </div>
<div class="line"><span class="lineno"> 1278</span>    <span class="comment">// PORTB OUTPUT ----------------------------------------------------</span></div>
<div class="line"><span class="lineno"> 1279</span> </div>
<div class="line"><span class="lineno"> 1280</span><span class="preprocessor">#if defined(PORTB)</span></div>
<div class="line"><span class="lineno"> 1281</span><span class="preprocessor">#if defined(PORTD) || defined(PORTC) || defined(PORTF)</span></div>
<div class="line"><span class="lineno"> 1282</span>        <span class="keywordflow">if</span> (port == &amp;PORTB) {</div>
<div class="line"><span class="lineno"> 1283</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTD/C/F)</span></div>
<div class="line"><span class="lineno"> 1284</span> </div>
<div class="line"><span class="lineno"> 1285</span>      hi = PORTB | pinMask;</div>
<div class="line"><span class="lineno"> 1286</span>      lo = PORTB &amp; ~pinMask;</div>
<div class="line"><span class="lineno"> 1287</span>      next = lo;</div>
<div class="line"><span class="lineno"> 1288</span>      <span class="keywordflow">if</span> (b &amp; 0x80)</div>
<div class="line"><span class="lineno"> 1289</span>        next = hi;</div>
<div class="line"><span class="lineno"> 1290</span> </div>
<div class="line"><span class="lineno"> 1291</span>      <span class="comment">// Same as above, just set for PORTB &amp; stripped of comments</span></div>
<div class="line"><span class="lineno"> 1292</span>      <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;headB:&quot;</span></div>
<div class="line"><span class="lineno"> 1293</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1294</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1295</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1296</span>                   <span class="stringliteral">&quot;rcall bitTimeB&quot;</span></div>
<div class="line"><span class="lineno"> 1297</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1298</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1299</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1300</span>                   <span class="stringliteral">&quot;rcall bitTimeB&quot;</span></div>
<div class="line"><span class="lineno"> 1301</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1302</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1303</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1304</span>                   <span class="stringliteral">&quot;rcall bitTimeB&quot;</span></div>
<div class="line"><span class="lineno"> 1305</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1306</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1307</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1308</span>                   <span class="stringliteral">&quot;rcall bitTimeB&quot;</span></div>
<div class="line"><span class="lineno"> 1309</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1310</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1311</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1312</span>                   <span class="stringliteral">&quot;rcall bitTimeB&quot;</span></div>
<div class="line"><span class="lineno"> 1313</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1314</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1315</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1316</span>                   <span class="stringliteral">&quot;rcall bitTimeB&quot;</span></div>
<div class="line"><span class="lineno"> 1317</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1318</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1319</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1320</span>                   <span class="stringliteral">&quot;rcall bitTimeB&quot;</span></div>
<div class="line"><span class="lineno"> 1321</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1322</span>                   <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1323</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1324</span>                   <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1325</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1326</span>                   <span class="stringliteral">&quot;ld   %[byte] , %a[ptr]+&quot;</span></div>
<div class="line"><span class="lineno"> 1327</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1328</span>                   <span class="stringliteral">&quot;out  %[port] , %[next]&quot;</span></div>
<div class="line"><span class="lineno"> 1329</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1330</span>                   <span class="stringliteral">&quot;mov  %[next] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1331</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1332</span>                   <span class="stringliteral">&quot;sbrc %[byte] , 7&quot;</span></div>
<div class="line"><span class="lineno"> 1333</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1334</span>                   <span class="stringliteral">&quot;mov %[next] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1335</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1336</span>                   <span class="stringliteral">&quot;nop&quot;</span></div>
<div class="line"><span class="lineno"> 1337</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1338</span>                   <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1339</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1340</span>                   <span class="stringliteral">&quot;sbiw %[count], 1&quot;</span></div>
<div class="line"><span class="lineno"> 1341</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1342</span>                   <span class="stringliteral">&quot;brne headB&quot;</span></div>
<div class="line"><span class="lineno"> 1343</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1344</span>                   <span class="stringliteral">&quot;rjmp doneB&quot;</span></div>
<div class="line"><span class="lineno"> 1345</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1346</span>                   <span class="stringliteral">&quot;bitTimeB:&quot;</span></div>
<div class="line"><span class="lineno"> 1347</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1348</span>                   <span class="stringliteral">&quot;out  %[port], %[next]&quot;</span></div>
<div class="line"><span class="lineno"> 1349</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1350</span>                   <span class="stringliteral">&quot;mov  %[next], %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1351</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1352</span>                   <span class="stringliteral">&quot;rol  %[byte]&quot;</span></div>
<div class="line"><span class="lineno"> 1353</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1354</span>                   <span class="stringliteral">&quot;sbrc %[byte], 7&quot;</span></div>
<div class="line"><span class="lineno"> 1355</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1356</span>                   <span class="stringliteral">&quot;mov %[next], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1357</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1358</span>                   <span class="stringliteral">&quot;nop&quot;</span></div>
<div class="line"><span class="lineno"> 1359</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1360</span>                   <span class="stringliteral">&quot;out  %[port], %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1361</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1362</span>                   <span class="stringliteral">&quot;ret&quot;</span></div>
<div class="line"><span class="lineno"> 1363</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1364</span>                   <span class="stringliteral">&quot;doneB:&quot;</span></div>
<div class="line"><span class="lineno"> 1365</span>                   <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno"> 1366</span>                   : [byte] <span class="stringliteral">&quot;+r&quot;</span>(b), [next] <span class="stringliteral">&quot;+r&quot;</span>(next), [count] <span class="stringliteral">&quot;+w&quot;</span>(i)</div>
<div class="line"><span class="lineno"> 1367</span>                   : [port] <span class="stringliteral">&quot;I&quot;</span>(_SFR_IO_ADDR(PORTB)), [ptr] <span class="stringliteral">&quot;e&quot;</span>(ptr),</div>
<div class="line"><span class="lineno"> 1368</span>                     [hi] <span class="stringliteral">&quot;r&quot;</span>(hi), [lo] <span class="stringliteral">&quot;r&quot;</span>(lo));</div>
<div class="line"><span class="lineno"> 1369</span> </div>
<div class="line"><span class="lineno"> 1370</span><span class="preprocessor">#if defined(PORTD) || defined(PORTC) || defined(PORTF)</span></div>
<div class="line"><span class="lineno"> 1371</span>    }</div>
<div class="line"><span class="lineno"> 1372</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1373</span><span class="preprocessor">#if defined(PORTC) || defined(PORTF)</span></div>
<div class="line"><span class="lineno"> 1374</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1375</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTC/F)</span></div>
<div class="line"><span class="lineno"> 1376</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTB)</span></div>
<div class="line"><span class="lineno"> 1377</span> </div>
<div class="line"><span class="lineno"> 1378</span>    <span class="comment">// PORTC OUTPUT ----------------------------------------------------</span></div>
<div class="line"><span class="lineno"> 1379</span> </div>
<div class="line"><span class="lineno"> 1380</span><span class="preprocessor">#if defined(PORTC)</span></div>
<div class="line"><span class="lineno"> 1381</span><span class="preprocessor">#if defined(PORTD) || defined(PORTB) || defined(PORTF)</span></div>
<div class="line"><span class="lineno"> 1382</span>        <span class="keywordflow">if</span> (port == &amp;PORTC) {</div>
<div class="line"><span class="lineno"> 1383</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTD/B/F)</span></div>
<div class="line"><span class="lineno"> 1384</span> </div>
<div class="line"><span class="lineno"> 1385</span>      hi = PORTC | pinMask;</div>
<div class="line"><span class="lineno"> 1386</span>      lo = PORTC &amp; ~pinMask;</div>
<div class="line"><span class="lineno"> 1387</span>      next = lo;</div>
<div class="line"><span class="lineno"> 1388</span>      <span class="keywordflow">if</span> (b &amp; 0x80)</div>
<div class="line"><span class="lineno"> 1389</span>        next = hi;</div>
<div class="line"><span class="lineno"> 1390</span> </div>
<div class="line"><span class="lineno"> 1391</span>      <span class="comment">// Same as above, just set for PORTC &amp; stripped of comments</span></div>
<div class="line"><span class="lineno"> 1392</span>      <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;headC:&quot;</span></div>
<div class="line"><span class="lineno"> 1393</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1394</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1395</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1396</span>                   <span class="stringliteral">&quot;rcall bitTimeC&quot;</span></div>
<div class="line"><span class="lineno"> 1397</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1398</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1399</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1400</span>                   <span class="stringliteral">&quot;rcall bitTimeC&quot;</span></div>
<div class="line"><span class="lineno"> 1401</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1402</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1403</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1404</span>                   <span class="stringliteral">&quot;rcall bitTimeC&quot;</span></div>
<div class="line"><span class="lineno"> 1405</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1406</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1407</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1408</span>                   <span class="stringliteral">&quot;rcall bitTimeC&quot;</span></div>
<div class="line"><span class="lineno"> 1409</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1410</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1411</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1412</span>                   <span class="stringliteral">&quot;rcall bitTimeC&quot;</span></div>
<div class="line"><span class="lineno"> 1413</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1414</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1415</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1416</span>                   <span class="stringliteral">&quot;rcall bitTimeC&quot;</span></div>
<div class="line"><span class="lineno"> 1417</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1418</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1419</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1420</span>                   <span class="stringliteral">&quot;rcall bitTimeC&quot;</span></div>
<div class="line"><span class="lineno"> 1421</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1422</span>                   <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1423</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1424</span>                   <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1425</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1426</span>                   <span class="stringliteral">&quot;ld   %[byte] , %a[ptr]+&quot;</span></div>
<div class="line"><span class="lineno"> 1427</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1428</span>                   <span class="stringliteral">&quot;out  %[port] , %[next]&quot;</span></div>
<div class="line"><span class="lineno"> 1429</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1430</span>                   <span class="stringliteral">&quot;mov  %[next] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1431</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1432</span>                   <span class="stringliteral">&quot;sbrc %[byte] , 7&quot;</span></div>
<div class="line"><span class="lineno"> 1433</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1434</span>                   <span class="stringliteral">&quot;mov %[next] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1435</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1436</span>                   <span class="stringliteral">&quot;nop&quot;</span></div>
<div class="line"><span class="lineno"> 1437</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1438</span>                   <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1439</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1440</span>                   <span class="stringliteral">&quot;sbiw %[count], 1&quot;</span></div>
<div class="line"><span class="lineno"> 1441</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1442</span>                   <span class="stringliteral">&quot;brne headC&quot;</span></div>
<div class="line"><span class="lineno"> 1443</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1444</span>                   <span class="stringliteral">&quot;rjmp doneC&quot;</span></div>
<div class="line"><span class="lineno"> 1445</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1446</span>                   <span class="stringliteral">&quot;bitTimeC:&quot;</span></div>
<div class="line"><span class="lineno"> 1447</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1448</span>                   <span class="stringliteral">&quot;out  %[port], %[next]&quot;</span></div>
<div class="line"><span class="lineno"> 1449</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1450</span>                   <span class="stringliteral">&quot;mov  %[next], %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1451</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1452</span>                   <span class="stringliteral">&quot;rol  %[byte]&quot;</span></div>
<div class="line"><span class="lineno"> 1453</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1454</span>                   <span class="stringliteral">&quot;sbrc %[byte], 7&quot;</span></div>
<div class="line"><span class="lineno"> 1455</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1456</span>                   <span class="stringliteral">&quot;mov %[next], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1457</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1458</span>                   <span class="stringliteral">&quot;nop&quot;</span></div>
<div class="line"><span class="lineno"> 1459</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1460</span>                   <span class="stringliteral">&quot;out  %[port], %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1461</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1462</span>                   <span class="stringliteral">&quot;ret&quot;</span></div>
<div class="line"><span class="lineno"> 1463</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1464</span>                   <span class="stringliteral">&quot;doneC:&quot;</span></div>
<div class="line"><span class="lineno"> 1465</span>                   <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno"> 1466</span>                   : [byte] <span class="stringliteral">&quot;+r&quot;</span>(b), [next] <span class="stringliteral">&quot;+r&quot;</span>(next), [count] <span class="stringliteral">&quot;+w&quot;</span>(i)</div>
<div class="line"><span class="lineno"> 1467</span>                   : [port] <span class="stringliteral">&quot;I&quot;</span>(_SFR_IO_ADDR(PORTC)), [ptr] <span class="stringliteral">&quot;e&quot;</span>(ptr),</div>
<div class="line"><span class="lineno"> 1468</span>                     [hi] <span class="stringliteral">&quot;r&quot;</span>(hi), [lo] <span class="stringliteral">&quot;r&quot;</span>(lo));</div>
<div class="line"><span class="lineno"> 1469</span> </div>
<div class="line"><span class="lineno"> 1470</span><span class="preprocessor">#if defined(PORTD) || defined(PORTB) || defined(PORTF)</span></div>
<div class="line"><span class="lineno"> 1471</span>    }</div>
<div class="line"><span class="lineno"> 1472</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTD/B/F)</span></div>
<div class="line"><span class="lineno"> 1473</span><span class="preprocessor">#if defined(PORTF)</span></div>
<div class="line"><span class="lineno"> 1474</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1475</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1476</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTC)</span></div>
<div class="line"><span class="lineno"> 1477</span> </div>
<div class="line"><span class="lineno"> 1478</span>    <span class="comment">// PORTF OUTPUT ----------------------------------------------------</span></div>
<div class="line"><span class="lineno"> 1479</span> </div>
<div class="line"><span class="lineno"> 1480</span><span class="preprocessor">#if defined(PORTF)</span></div>
<div class="line"><span class="lineno"> 1481</span><span class="preprocessor">#if defined(PORTD) || defined(PORTB) || defined(PORTC)</span></div>
<div class="line"><span class="lineno"> 1482</span>        <span class="keywordflow">if</span> (port == &amp;PORTF) {</div>
<div class="line"><span class="lineno"> 1483</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTD/B/C)</span></div>
<div class="line"><span class="lineno"> 1484</span> </div>
<div class="line"><span class="lineno"> 1485</span>      hi = PORTF | pinMask;</div>
<div class="line"><span class="lineno"> 1486</span>      lo = PORTF &amp; ~pinMask;</div>
<div class="line"><span class="lineno"> 1487</span>      next = lo;</div>
<div class="line"><span class="lineno"> 1488</span>      <span class="keywordflow">if</span> (b &amp; 0x80)</div>
<div class="line"><span class="lineno"> 1489</span>        next = hi;</div>
<div class="line"><span class="lineno"> 1490</span> </div>
<div class="line"><span class="lineno"> 1491</span>      <span class="comment">// Same as above, just set for PORTF &amp; stripped of comments</span></div>
<div class="line"><span class="lineno"> 1492</span>      <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;headF:&quot;</span></div>
<div class="line"><span class="lineno"> 1493</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1494</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1495</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1496</span>                   <span class="stringliteral">&quot;rcall bitTimeC&quot;</span></div>
<div class="line"><span class="lineno"> 1497</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1498</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1499</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1500</span>                   <span class="stringliteral">&quot;rcall bitTimeC&quot;</span></div>
<div class="line"><span class="lineno"> 1501</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1502</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1503</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1504</span>                   <span class="stringliteral">&quot;rcall bitTimeC&quot;</span></div>
<div class="line"><span class="lineno"> 1505</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1506</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1507</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1508</span>                   <span class="stringliteral">&quot;rcall bitTimeC&quot;</span></div>
<div class="line"><span class="lineno"> 1509</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1510</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1511</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1512</span>                   <span class="stringliteral">&quot;rcall bitTimeC&quot;</span></div>
<div class="line"><span class="lineno"> 1513</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1514</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1515</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1516</span>                   <span class="stringliteral">&quot;rcall bitTimeC&quot;</span></div>
<div class="line"><span class="lineno"> 1517</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1518</span>                   <span class="stringliteral">&quot;out   %[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1519</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1520</span>                   <span class="stringliteral">&quot;rcall bitTimeC&quot;</span></div>
<div class="line"><span class="lineno"> 1521</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1522</span>                   <span class="stringliteral">&quot;out  %[port] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1523</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1524</span>                   <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1525</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1526</span>                   <span class="stringliteral">&quot;ld   %[byte] , %a[ptr]+&quot;</span></div>
<div class="line"><span class="lineno"> 1527</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1528</span>                   <span class="stringliteral">&quot;out  %[port] , %[next]&quot;</span></div>
<div class="line"><span class="lineno"> 1529</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1530</span>                   <span class="stringliteral">&quot;mov  %[next] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1531</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1532</span>                   <span class="stringliteral">&quot;sbrc %[byte] , 7&quot;</span></div>
<div class="line"><span class="lineno"> 1533</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1534</span>                   <span class="stringliteral">&quot;mov %[next] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1535</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1536</span>                   <span class="stringliteral">&quot;nop&quot;</span></div>
<div class="line"><span class="lineno"> 1537</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1538</span>                   <span class="stringliteral">&quot;out  %[port] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1539</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1540</span>                   <span class="stringliteral">&quot;sbiw %[count], 1&quot;</span></div>
<div class="line"><span class="lineno"> 1541</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1542</span>                   <span class="stringliteral">&quot;brne headF&quot;</span></div>
<div class="line"><span class="lineno"> 1543</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1544</span>                   <span class="stringliteral">&quot;rjmp doneC&quot;</span></div>
<div class="line"><span class="lineno"> 1545</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1546</span>                   <span class="stringliteral">&quot;bitTimeC:&quot;</span></div>
<div class="line"><span class="lineno"> 1547</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1548</span>                   <span class="stringliteral">&quot;out  %[port], %[next]&quot;</span></div>
<div class="line"><span class="lineno"> 1549</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1550</span>                   <span class="stringliteral">&quot;mov  %[next], %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1551</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1552</span>                   <span class="stringliteral">&quot;rol  %[byte]&quot;</span></div>
<div class="line"><span class="lineno"> 1553</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1554</span>                   <span class="stringliteral">&quot;sbrc %[byte], 7&quot;</span></div>
<div class="line"><span class="lineno"> 1555</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1556</span>                   <span class="stringliteral">&quot;mov %[next], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1557</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1558</span>                   <span class="stringliteral">&quot;nop&quot;</span></div>
<div class="line"><span class="lineno"> 1559</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1560</span>                   <span class="stringliteral">&quot;out  %[port], %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1561</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1562</span>                   <span class="stringliteral">&quot;ret&quot;</span></div>
<div class="line"><span class="lineno"> 1563</span>                   <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 1564</span>                   <span class="stringliteral">&quot;doneC:&quot;</span></div>
<div class="line"><span class="lineno"> 1565</span>                   <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno"> 1566</span>                   : [byte] <span class="stringliteral">&quot;+r&quot;</span>(b), [next] <span class="stringliteral">&quot;+r&quot;</span>(next), [count] <span class="stringliteral">&quot;+w&quot;</span>(i)</div>
<div class="line"><span class="lineno"> 1567</span>                   : [port] <span class="stringliteral">&quot;I&quot;</span>(_SFR_IO_ADDR(PORTF)), [ptr] <span class="stringliteral">&quot;e&quot;</span>(ptr),</div>
<div class="line"><span class="lineno"> 1568</span>                     [hi] <span class="stringliteral">&quot;r&quot;</span>(hi), [lo] <span class="stringliteral">&quot;r&quot;</span>(lo));</div>
<div class="line"><span class="lineno"> 1569</span> </div>
<div class="line"><span class="lineno"> 1570</span><span class="preprocessor">#if defined(PORTD) || defined(PORTB) || defined(PORTC)</span></div>
<div class="line"><span class="lineno"> 1571</span>    }</div>
<div class="line"><span class="lineno"> 1572</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTD/B/C)</span></div>
<div class="line"><span class="lineno"> 1573</span><span class="preprocessor">#endif </span><span class="comment">// defined(PORTF)</span></div>
<div class="line"><span class="lineno"> 1574</span> </div>
<div class="line"><span class="lineno"> 1575</span><span class="preprocessor">#if defined(NEO_KHZ400)</span></div>
<div class="line"><span class="lineno"> 1576</span>  } <span class="keywordflow">else</span> { <span class="comment">// 400 KHz</span></div>
<div class="line"><span class="lineno"> 1577</span> </div>
<div class="line"><span class="lineno"> 1578</span>    <span class="comment">// 30 instruction clocks per bit: HHHHHHxxxxxxxxxLLLLLLLLLLLLLLL</span></div>
<div class="line"><span class="lineno"> 1579</span>    <span class="comment">// ST instructions:               ^     ^        ^    (T=0,6,15)</span></div>
<div class="line"><span class="lineno"> 1580</span> </div>
<div class="line"><span class="lineno"> 1581</span>    <span class="keyword">volatile</span> uint8_t next, bit;</div>
<div class="line"><span class="lineno"> 1582</span> </div>
<div class="line"><span class="lineno"> 1583</span>    hi = *port | pinMask;</div>
<div class="line"><span class="lineno"> 1584</span>    lo = *port &amp; ~pinMask;</div>
<div class="line"><span class="lineno"> 1585</span>    next = lo;</div>
<div class="line"><span class="lineno"> 1586</span>    bit = 8;</div>
<div class="line"><span class="lineno"> 1587</span> </div>
<div class="line"><span class="lineno"> 1588</span>    <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;head30:&quot;</span></div>
<div class="line"><span class="lineno"> 1589</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// Clk  Pseudocode    (T =  0)</span></div>
<div class="line"><span class="lineno"> 1590</span>                 <span class="stringliteral">&quot;st   %a[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1591</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    PORT = hi     (T =  2)</span></div>
<div class="line"><span class="lineno"> 1592</span>                 <span class="stringliteral">&quot;sbrc %[byte] , 7&quot;</span></div>
<div class="line"><span class="lineno"> 1593</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1-2  if(b &amp; 128)</span></div>
<div class="line"><span class="lineno"> 1594</span>                 <span class="stringliteral">&quot;mov  %[next], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1595</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 0-1   next = hi    (T =  4)</span></div>
<div class="line"><span class="lineno"> 1596</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1597</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T =  6)</span></div>
<div class="line"><span class="lineno"> 1598</span>                 <span class="stringliteral">&quot;st   %a[port], %[next]&quot;</span></div>
<div class="line"><span class="lineno"> 1599</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    PORT = next   (T =  8)</span></div>
<div class="line"><span class="lineno"> 1600</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1601</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 10)</span></div>
<div class="line"><span class="lineno"> 1602</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1603</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 12)</span></div>
<div class="line"><span class="lineno"> 1604</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1605</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 14)</span></div>
<div class="line"><span class="lineno"> 1606</span>                 <span class="stringliteral">&quot;nop&quot;</span></div>
<div class="line"><span class="lineno"> 1607</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    nop           (T = 15)</span></div>
<div class="line"><span class="lineno"> 1608</span>                 <span class="stringliteral">&quot;st   %a[port], %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1609</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    PORT = lo     (T = 17)</span></div>
<div class="line"><span class="lineno"> 1610</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1611</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 19)</span></div>
<div class="line"><span class="lineno"> 1612</span>                 <span class="stringliteral">&quot;dec  %[bit]&quot;</span></div>
<div class="line"><span class="lineno"> 1613</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    bit--         (T = 20)</span></div>
<div class="line"><span class="lineno"> 1614</span>                 <span class="stringliteral">&quot;breq nextbyte30&quot;</span></div>
<div class="line"><span class="lineno"> 1615</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1-2  if(bit == 0)</span></div>
<div class="line"><span class="lineno"> 1616</span>                 <span class="stringliteral">&quot;rol  %[byte]&quot;</span></div>
<div class="line"><span class="lineno"> 1617</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    b &lt;&lt;= 1       (T = 22)</span></div>
<div class="line"><span class="lineno"> 1618</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1619</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 24)</span></div>
<div class="line"><span class="lineno"> 1620</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1621</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 26)</span></div>
<div class="line"><span class="lineno"> 1622</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1623</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 28)</span></div>
<div class="line"><span class="lineno"> 1624</span>                 <span class="stringliteral">&quot;rjmp head30&quot;</span></div>
<div class="line"><span class="lineno"> 1625</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    -&gt; head30 (next bit out)</span></div>
<div class="line"><span class="lineno"> 1626</span>                 <span class="stringliteral">&quot;nextbyte30:&quot;</span></div>
<div class="line"><span class="lineno"> 1627</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//                    (T = 22)</span></div>
<div class="line"><span class="lineno"> 1628</span>                 <span class="stringliteral">&quot;nop&quot;</span></div>
<div class="line"><span class="lineno"> 1629</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    nop           (T = 23)</span></div>
<div class="line"><span class="lineno"> 1630</span>                 <span class="stringliteral">&quot;ldi  %[bit]  , 8&quot;</span></div>
<div class="line"><span class="lineno"> 1631</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    bit = 8       (T = 24)</span></div>
<div class="line"><span class="lineno"> 1632</span>                 <span class="stringliteral">&quot;ld   %[byte] , %a[ptr]+&quot;</span></div>
<div class="line"><span class="lineno"> 1633</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    b = *ptr++    (T = 26)</span></div>
<div class="line"><span class="lineno"> 1634</span>                 <span class="stringliteral">&quot;sbiw %[count], 1&quot;</span></div>
<div class="line"><span class="lineno"> 1635</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    i--           (T = 28)</span></div>
<div class="line"><span class="lineno"> 1636</span>                 <span class="stringliteral">&quot;brne head30&quot;</span></div>
<div class="line"><span class="lineno"> 1637</span>                 <span class="stringliteral">&quot;\n&quot;</span> <span class="comment">// 1-2  if(i != 0) -&gt; (next byte)</span></div>
<div class="line"><span class="lineno"> 1638</span>                 : [port] <span class="stringliteral">&quot;+e&quot;</span>(port), [byte] <span class="stringliteral">&quot;+r&quot;</span>(b), [bit] <span class="stringliteral">&quot;+r&quot;</span>(bit),</div>
<div class="line"><span class="lineno"> 1639</span>                   [next] <span class="stringliteral">&quot;+r&quot;</span>(next), [count] <span class="stringliteral">&quot;+w&quot;</span>(i)</div>
<div class="line"><span class="lineno"> 1640</span>                 : [hi] <span class="stringliteral">&quot;r&quot;</span>(hi), [lo] <span class="stringliteral">&quot;r&quot;</span>(lo), [ptr] <span class="stringliteral">&quot;e&quot;</span>(ptr));</div>
<div class="line"><span class="lineno"> 1641</span>  }</div>
<div class="line"><span class="lineno"> 1642</span><span class="preprocessor">#endif </span><span class="comment">// NEO_KHZ400</span></div>
<div class="line"><span class="lineno"> 1643</span> </div>
<div class="line"><span class="lineno"> 1644</span><span class="comment">// 16 MHz(ish) AVR --------------------------------------------------------</span></div>
<div class="line"><span class="lineno"> 1645</span><span class="preprocessor">#elif (F_CPU &gt;= 15400000UL) &amp;&amp; (F_CPU &lt;= 19000000L)</span></div>
<div class="line"><span class="lineno"> 1646</span> </div>
<div class="line"><span class="lineno"> 1647</span><span class="preprocessor">#if defined(NEO_KHZ400) </span><span class="comment">// 800 KHz check needed only if 400 KHz support enabled</span></div>
<div class="line"><span class="lineno"> 1648</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>) {</div>
<div class="line"><span class="lineno"> 1649</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1650</span> </div>
<div class="line"><span class="lineno"> 1651</span>    <span class="comment">// WS2811 and WS2812 have different hi/lo duty cycles; this is</span></div>
<div class="line"><span class="lineno"> 1652</span>    <span class="comment">// similar but NOT an exact copy of the prior 400-on-8 code.</span></div>
<div class="line"><span class="lineno"> 1653</span> </div>
<div class="line"><span class="lineno"> 1654</span>    <span class="comment">// 20 inst. clocks per bit: HHHHHxxxxxxxxLLLLLLL</span></div>
<div class="line"><span class="lineno"> 1655</span>    <span class="comment">// ST instructions:         ^   ^        ^       (T=0,5,13)</span></div>
<div class="line"><span class="lineno"> 1656</span> </div>
<div class="line"><span class="lineno"> 1657</span>    <span class="keyword">volatile</span> uint8_t next, bit;</div>
<div class="line"><span class="lineno"> 1658</span> </div>
<div class="line"><span class="lineno"> 1659</span>    hi = *port | pinMask;</div>
<div class="line"><span class="lineno"> 1660</span>    lo = *port &amp; ~pinMask;</div>
<div class="line"><span class="lineno"> 1661</span>    next = lo;</div>
<div class="line"><span class="lineno"> 1662</span>    bit = 8;</div>
<div class="line"><span class="lineno"> 1663</span> </div>
<div class="line"><span class="lineno"> 1664</span>    <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;head20%=:&quot;</span></div>
<div class="line"><span class="lineno"> 1665</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// Clk  Pseudocode    (T =  0)</span></div>
<div class="line"><span class="lineno"> 1666</span>                 <span class="stringliteral">&quot;st   %a[port],  %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1667</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    PORT = hi     (T =  2)</span></div>
<div class="line"><span class="lineno"> 1668</span>                 <span class="stringliteral">&quot;sbrc %[byte],  7&quot;</span></div>
<div class="line"><span class="lineno"> 1669</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1-2  if(b &amp; 128)</span></div>
<div class="line"><span class="lineno"> 1670</span>                 <span class="stringliteral">&quot;mov  %[next], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1671</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 0-1   next = hi    (T =  4)</span></div>
<div class="line"><span class="lineno"> 1672</span>                 <span class="stringliteral">&quot;dec  %[bit]&quot;</span></div>
<div class="line"><span class="lineno"> 1673</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    bit--         (T =  5)</span></div>
<div class="line"><span class="lineno"> 1674</span>                 <span class="stringliteral">&quot;st   %a[port],  %[next]&quot;</span></div>
<div class="line"><span class="lineno"> 1675</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    PORT = next   (T =  7)</span></div>
<div class="line"><span class="lineno"> 1676</span>                 <span class="stringliteral">&quot;mov  %[next] ,  %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1677</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    next = lo     (T =  8)</span></div>
<div class="line"><span class="lineno"> 1678</span>                 <span class="stringliteral">&quot;breq nextbyte20%=&quot;</span></div>
<div class="line"><span class="lineno"> 1679</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1-2  if(bit == 0) (from dec above)</span></div>
<div class="line"><span class="lineno"> 1680</span>                 <span class="stringliteral">&quot;rol  %[byte]&quot;</span></div>
<div class="line"><span class="lineno"> 1681</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    b &lt;&lt;= 1       (T = 10)</span></div>
<div class="line"><span class="lineno"> 1682</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1683</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 12)</span></div>
<div class="line"><span class="lineno"> 1684</span>                 <span class="stringliteral">&quot;nop&quot;</span></div>
<div class="line"><span class="lineno"> 1685</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    nop           (T = 13)</span></div>
<div class="line"><span class="lineno"> 1686</span>                 <span class="stringliteral">&quot;st   %a[port],  %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1687</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    PORT = lo     (T = 15)</span></div>
<div class="line"><span class="lineno"> 1688</span>                 <span class="stringliteral">&quot;nop&quot;</span></div>
<div class="line"><span class="lineno"> 1689</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    nop           (T = 16)</span></div>
<div class="line"><span class="lineno"> 1690</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1691</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 18)</span></div>
<div class="line"><span class="lineno"> 1692</span>                 <span class="stringliteral">&quot;rjmp head20%=&quot;</span></div>
<div class="line"><span class="lineno"> 1693</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    -&gt; head20 (next bit out)</span></div>
<div class="line"><span class="lineno"> 1694</span>                 <span class="stringliteral">&quot;nextbyte20%=:&quot;</span></div>
<div class="line"><span class="lineno"> 1695</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//                    (T = 10)</span></div>
<div class="line"><span class="lineno"> 1696</span>                 <span class="stringliteral">&quot;ldi  %[bit]  ,  8&quot;</span></div>
<div class="line"><span class="lineno"> 1697</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    bit = 8       (T = 11)</span></div>
<div class="line"><span class="lineno"> 1698</span>                 <span class="stringliteral">&quot;ld   %[byte] ,  %a[ptr]+&quot;</span></div>
<div class="line"><span class="lineno"> 1699</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    b = *ptr++    (T = 13)</span></div>
<div class="line"><span class="lineno"> 1700</span>                 <span class="stringliteral">&quot;st   %a[port], %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1701</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    PORT = lo     (T = 15)</span></div>
<div class="line"><span class="lineno"> 1702</span>                 <span class="stringliteral">&quot;nop&quot;</span></div>
<div class="line"><span class="lineno"> 1703</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    nop           (T = 16)</span></div>
<div class="line"><span class="lineno"> 1704</span>                 <span class="stringliteral">&quot;sbiw %[count], 1&quot;</span></div>
<div class="line"><span class="lineno"> 1705</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    i--           (T = 18)</span></div>
<div class="line"><span class="lineno"> 1706</span>                 <span class="stringliteral">&quot;brne head20%=&quot;</span></div>
<div class="line"><span class="lineno"> 1707</span>                 <span class="stringliteral">&quot;\n&quot;</span> <span class="comment">// 2    if(i != 0) -&gt; (next byte)</span></div>
<div class="line"><span class="lineno"> 1708</span>                 : [port] <span class="stringliteral">&quot;+e&quot;</span>(port), [byte] <span class="stringliteral">&quot;+r&quot;</span>(b), [bit] <span class="stringliteral">&quot;+r&quot;</span>(bit),</div>
<div class="line"><span class="lineno"> 1709</span>                   [next] <span class="stringliteral">&quot;+r&quot;</span>(next), [count] <span class="stringliteral">&quot;+w&quot;</span>(i)</div>
<div class="line"><span class="lineno"> 1710</span>                 : [ptr] <span class="stringliteral">&quot;e&quot;</span>(ptr), [hi] <span class="stringliteral">&quot;r&quot;</span>(hi), [lo] <span class="stringliteral">&quot;r&quot;</span>(lo));</div>
<div class="line"><span class="lineno"> 1711</span> </div>
<div class="line"><span class="lineno"> 1712</span><span class="preprocessor">#if defined(NEO_KHZ400)</span></div>
<div class="line"><span class="lineno"> 1713</span>  } <span class="keywordflow">else</span> { <span class="comment">// 400 KHz</span></div>
<div class="line"><span class="lineno"> 1714</span> </div>
<div class="line"><span class="lineno"> 1715</span>    <span class="comment">// The 400 KHz clock on 16 MHz MCU is the most &#39;relaxed&#39; version.</span></div>
<div class="line"><span class="lineno"> 1716</span> </div>
<div class="line"><span class="lineno"> 1717</span>    <span class="comment">// 40 inst. clocks per bit: HHHHHHHHxxxxxxxxxxxxLLLLLLLLLLLLLLLLLLLL</span></div>
<div class="line"><span class="lineno"> 1718</span>    <span class="comment">// ST instructions:         ^       ^           ^         (T=0,8,20)</span></div>
<div class="line"><span class="lineno"> 1719</span> </div>
<div class="line"><span class="lineno"> 1720</span>    <span class="keyword">volatile</span> uint8_t next, bit;</div>
<div class="line"><span class="lineno"> 1721</span> </div>
<div class="line"><span class="lineno"> 1722</span>    hi = *port | pinMask;</div>
<div class="line"><span class="lineno"> 1723</span>    lo = *port &amp; ~pinMask;</div>
<div class="line"><span class="lineno"> 1724</span>    next = lo;</div>
<div class="line"><span class="lineno"> 1725</span>    bit = 8;</div>
<div class="line"><span class="lineno"> 1726</span> </div>
<div class="line"><span class="lineno"> 1727</span>    <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;head40%=:&quot;</span></div>
<div class="line"><span class="lineno"> 1728</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// Clk  Pseudocode    (T =  0)</span></div>
<div class="line"><span class="lineno"> 1729</span>                 <span class="stringliteral">&quot;st   %a[port], %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1730</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    PORT = hi     (T =  2)</span></div>
<div class="line"><span class="lineno"> 1731</span>                 <span class="stringliteral">&quot;sbrc %[byte] , 7&quot;</span></div>
<div class="line"><span class="lineno"> 1732</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1-2  if(b &amp; 128)</span></div>
<div class="line"><span class="lineno"> 1733</span>                 <span class="stringliteral">&quot;mov  %[next] , %[hi]&quot;</span></div>
<div class="line"><span class="lineno"> 1734</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 0-1   next = hi    (T =  4)</span></div>
<div class="line"><span class="lineno"> 1735</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1736</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T =  6)</span></div>
<div class="line"><span class="lineno"> 1737</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1738</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T =  8)</span></div>
<div class="line"><span class="lineno"> 1739</span>                 <span class="stringliteral">&quot;st   %a[port], %[next]&quot;</span></div>
<div class="line"><span class="lineno"> 1740</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    PORT = next   (T = 10)</span></div>
<div class="line"><span class="lineno"> 1741</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1742</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 12)</span></div>
<div class="line"><span class="lineno"> 1743</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1744</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 14)</span></div>
<div class="line"><span class="lineno"> 1745</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1746</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 16)</span></div>
<div class="line"><span class="lineno"> 1747</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1748</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 18)</span></div>
<div class="line"><span class="lineno"> 1749</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1750</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 20)</span></div>
<div class="line"><span class="lineno"> 1751</span>                 <span class="stringliteral">&quot;st   %a[port], %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1752</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    PORT = lo     (T = 22)</span></div>
<div class="line"><span class="lineno"> 1753</span>                 <span class="stringliteral">&quot;nop&quot;</span></div>
<div class="line"><span class="lineno"> 1754</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    nop           (T = 23)</span></div>
<div class="line"><span class="lineno"> 1755</span>                 <span class="stringliteral">&quot;mov  %[next] , %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1756</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    next = lo     (T = 24)</span></div>
<div class="line"><span class="lineno"> 1757</span>                 <span class="stringliteral">&quot;dec  %[bit]&quot;</span></div>
<div class="line"><span class="lineno"> 1758</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    bit--         (T = 25)</span></div>
<div class="line"><span class="lineno"> 1759</span>                 <span class="stringliteral">&quot;breq nextbyte40%=&quot;</span></div>
<div class="line"><span class="lineno"> 1760</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1-2  if(bit == 0)</span></div>
<div class="line"><span class="lineno"> 1761</span>                 <span class="stringliteral">&quot;rol  %[byte]&quot;</span></div>
<div class="line"><span class="lineno"> 1762</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    b &lt;&lt;= 1       (T = 27)</span></div>
<div class="line"><span class="lineno"> 1763</span>                 <span class="stringliteral">&quot;nop&quot;</span></div>
<div class="line"><span class="lineno"> 1764</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    nop           (T = 28)</span></div>
<div class="line"><span class="lineno"> 1765</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1766</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 30)</span></div>
<div class="line"><span class="lineno"> 1767</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1768</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 32)</span></div>
<div class="line"><span class="lineno"> 1769</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1770</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 34)</span></div>
<div class="line"><span class="lineno"> 1771</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1772</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 36)</span></div>
<div class="line"><span class="lineno"> 1773</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1774</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 38)</span></div>
<div class="line"><span class="lineno"> 1775</span>                 <span class="stringliteral">&quot;rjmp head40%=&quot;</span></div>
<div class="line"><span class="lineno"> 1776</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    -&gt; head40 (next bit out)</span></div>
<div class="line"><span class="lineno"> 1777</span>                 <span class="stringliteral">&quot;nextbyte40%=:&quot;</span></div>
<div class="line"><span class="lineno"> 1778</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//                    (T = 27)</span></div>
<div class="line"><span class="lineno"> 1779</span>                 <span class="stringliteral">&quot;ldi  %[bit]  , 8&quot;</span></div>
<div class="line"><span class="lineno"> 1780</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 1    bit = 8       (T = 28)</span></div>
<div class="line"><span class="lineno"> 1781</span>                 <span class="stringliteral">&quot;ld   %[byte] , %a[ptr]+&quot;</span></div>
<div class="line"><span class="lineno"> 1782</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    b = *ptr++    (T = 30)</span></div>
<div class="line"><span class="lineno"> 1783</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1784</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 32)</span></div>
<div class="line"><span class="lineno"> 1785</span>                 <span class="stringliteral">&quot;st   %a[port], %[lo]&quot;</span></div>
<div class="line"><span class="lineno"> 1786</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    PORT = lo     (T = 34)</span></div>
<div class="line"><span class="lineno"> 1787</span>                 <span class="stringliteral">&quot;rjmp .+0&quot;</span></div>
<div class="line"><span class="lineno"> 1788</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    nop nop       (T = 36)</span></div>
<div class="line"><span class="lineno"> 1789</span>                 <span class="stringliteral">&quot;sbiw %[count], 1&quot;</span></div>
<div class="line"><span class="lineno"> 1790</span>                 <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">// 2    i--           (T = 38)</span></div>
<div class="line"><span class="lineno"> 1791</span>                 <span class="stringliteral">&quot;brne head40%=&quot;</span></div>
<div class="line"><span class="lineno"> 1792</span>                 <span class="stringliteral">&quot;\n&quot;</span> <span class="comment">// 1-2  if(i != 0) -&gt; (next byte)</span></div>
<div class="line"><span class="lineno"> 1793</span>                 : [port] <span class="stringliteral">&quot;+e&quot;</span>(port), [byte] <span class="stringliteral">&quot;+r&quot;</span>(b), [bit] <span class="stringliteral">&quot;+r&quot;</span>(bit),</div>
<div class="line"><span class="lineno"> 1794</span>                   [next] <span class="stringliteral">&quot;+r&quot;</span>(next), [count] <span class="stringliteral">&quot;+w&quot;</span>(i)</div>
<div class="line"><span class="lineno"> 1795</span>                 : [ptr] <span class="stringliteral">&quot;e&quot;</span>(ptr), [hi] <span class="stringliteral">&quot;r&quot;</span>(hi), [lo] <span class="stringliteral">&quot;r&quot;</span>(lo));</div>
<div class="line"><span class="lineno"> 1796</span>  }</div>
<div class="line"><span class="lineno"> 1797</span><span class="preprocessor">#endif </span><span class="comment">// NEO_KHZ400</span></div>
<div class="line"><span class="lineno"> 1798</span> </div>
<div class="line"><span class="lineno"> 1799</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 1800</span><span class="preprocessor">#error &quot;CPU SPEED NOT SUPPORTED&quot;</span></div>
<div class="line"><span class="lineno"> 1801</span><span class="preprocessor">#endif </span><span class="comment">// end F_CPU ifdefs on __AVR__</span></div>
<div class="line"><span class="lineno"> 1802</span> </div>
<div class="line"><span class="lineno"> 1803</span>  <span class="comment">// END AVR ----------------------------------------------------------------</span></div>
<div class="line"><span class="lineno"> 1804</span> </div>
<div class="line"><span class="lineno"> 1805</span><span class="preprocessor">#elif defined(__arm__)</span></div>
<div class="line"><span class="lineno"> 1806</span> </div>
<div class="line"><span class="lineno"> 1807</span><span class="preprocessor">#if defined(TARGET_GIGA) || defined(TARGET_M4)</span></div>
<div class="line"><span class="lineno"> 1808</span>  <span class="comment">// Arduino GIGA -----------------------------------------------------------</span></div>
<div class="line"><span class="lineno"> 1809</span>  uint8_t *p = <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>, *end = p + <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>, pix;</div>
<div class="line"><span class="lineno"> 1810</span>  <span class="keywordflow">while</span> (p &lt; end)</div>
<div class="line"><span class="lineno"> 1811</span>  {</div>
<div class="line"><span class="lineno"> 1812</span>    pix = *p++;</div>
<div class="line"><span class="lineno"> 1813</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 7; i &gt;= 0; i--)</div>
<div class="line"><span class="lineno"> 1814</span>    {</div>
<div class="line"><span class="lineno"> 1815</span>      <span class="comment">// gpio_write(&amp;gpio-&gt;gpio, 1);</span></div>
<div class="line"><span class="lineno"> 1816</span>      gpio-&gt;write(1);</div>
<div class="line"><span class="lineno"> 1817</span> </div>
<div class="line"><span class="lineno"> 1818</span>      <span class="comment">// duty cycle determines bit value</span></div>
<div class="line"><span class="lineno"> 1819</span>      <span class="comment">// if (pix &amp; 0x80)</span></div>
<div class="line"><span class="lineno"> 1820</span>      <span class="keywordflow">if</span> (bitRead(pix, i) == 0)</div>
<div class="line"><span class="lineno"> 1821</span>      {</div>
<div class="line"><span class="lineno"> 1822</span>        <span class="comment">// one</span></div>
<div class="line"><span class="lineno"> 1823</span>        <span class="comment">// wait_ns(400); -&gt; 192 cycles</span></div>
<div class="line"><span class="lineno"> 1824</span><span class="preprocessor">#if defined(TARGET_GIGA)</span></div>
<div class="line"><span class="lineno"> 1825</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 96; j++)</div>
<div class="line"><span class="lineno"> 1826</span>#<span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1827</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 48; j++)</div>
<div class="line"><span class="lineno"> 1828</span>#endif</div>
<div class="line"><span class="lineno"> 1829</span>          __NOP();</div>
<div class="line"><span class="lineno"> 1830</span> </div>
<div class="line"><span class="lineno"> 1831</span>        <span class="comment">// gpio_write(&amp;gpio-&gt;gpio, 0);</span></div>
<div class="line"><span class="lineno"> 1832</span>        gpio-&gt;write(0);</div>
<div class="line"><span class="lineno"> 1833</span> </div>
<div class="line"><span class="lineno"> 1834</span>        <span class="comment">// wait_ns(850) -&gt; 408 cycles</span></div>
<div class="line"><span class="lineno"> 1835</span><span class="preprocessor">#if defined(TARGET_GIGA)</span></div>
<div class="line"><span class="lineno"> 1836</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 204; j++)</div>
<div class="line"><span class="lineno"> 1837</span>#<span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1838</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 102; j++)</div>
<div class="line"><span class="lineno"> 1839</span>#endif</div>
<div class="line"><span class="lineno"> 1840</span>          __NOP();</div>
<div class="line"><span class="lineno"> 1841</span>      }</div>
<div class="line"><span class="lineno"> 1842</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1843</span>      {</div>
<div class="line"><span class="lineno"> 1844</span>        <span class="comment">// zero</span></div>
<div class="line"><span class="lineno"> 1845</span>        <span class="comment">// wait_ns(800) -&gt; 384 cycles</span></div>
<div class="line"><span class="lineno"> 1846</span><span class="preprocessor">#if defined(TARGET_GIGA)</span></div>
<div class="line"><span class="lineno"> 1847</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 192; j++)</div>
<div class="line"><span class="lineno"> 1848</span>#<span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1849</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 96; j++)</div>
<div class="line"><span class="lineno"> 1850</span>#endif</div>
<div class="line"><span class="lineno"> 1851</span>          __NOP();</div>
<div class="line"><span class="lineno"> 1852</span> </div>
<div class="line"><span class="lineno"> 1853</span>        gpio-&gt;write(0);</div>
<div class="line"><span class="lineno"> 1854</span>        <span class="comment">// gpio_write(&amp;gpio-&gt;gpio, 0);</span></div>
<div class="line"><span class="lineno"> 1855</span>        <span class="comment">// wait_ns(450) -&gt; 216 cycles</span></div>
<div class="line"><span class="lineno"> 1856</span><span class="preprocessor">#if defined(TARGET_GIGA)</span></div>
<div class="line"><span class="lineno"> 1857</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 108; j++)</div>
<div class="line"><span class="lineno"> 1858</span>#<span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1859</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 54; j++)</div>
<div class="line"><span class="lineno"> 1860</span>#endif</div>
<div class="line"><span class="lineno"> 1861</span>          __NOP();</div>
<div class="line"><span class="lineno"> 1862</span>      }</div>
<div class="line"><span class="lineno"> 1863</span> </div>
<div class="line"><span class="lineno"> 1864</span>      <span class="comment">// pix = pix &lt;&lt; 1; // shift to next bit</span></div>
<div class="line"><span class="lineno"> 1865</span>    }</div>
<div class="line"><span class="lineno"> 1866</span>  }</div>
<div class="line"><span class="lineno"> 1867</span>    <span class="comment">// ARM MCUs -- Teensy 3.0, 3.1, LC, Arduino Due, RP2040 -------------------</span></div>
<div class="line"><span class="lineno"> 1868</span> </div>
<div class="line"><span class="lineno"> 1869</span><span class="preprocessor">#elif defined(ARDUINO_ARCH_RP2040)</span></div>
<div class="line"><span class="lineno"> 1870</span>  <span class="comment">// Use PIO</span></div>
<div class="line"><span class="lineno"> 1871</span>  rp2040Show(<a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>, <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>);</div>
<div class="line"><span class="lineno"> 1872</span> </div>
<div class="line"><span class="lineno"> 1873</span><span class="preprocessor">#elif defined(TEENSYDUINO) &amp;&amp;                                                  \</span></div>
<div class="line"><span class="lineno"> 1874</span><span class="preprocessor">    defined(KINETISK) </span><span class="comment">// Teensy 3.0, 3.1, 3.2, 3.5, 3.6</span></div>
<div class="line"><span class="lineno"> 1875</span><span class="preprocessor">#define CYCLES_800_T0H (F_CPU / 4000000)</span></div>
<div class="line"><span class="lineno"> 1876</span><span class="preprocessor">#define CYCLES_800_T1H (F_CPU / 1250000)</span></div>
<div class="line"><span class="lineno"> 1877</span><span class="preprocessor">#define CYCLES_800 (F_CPU / 800000)</span></div>
<div class="line"><span class="lineno"> 1878</span><span class="preprocessor">#define CYCLES_400_T0H (F_CPU / 2000000)</span></div>
<div class="line"><span class="lineno"> 1879</span><span class="preprocessor">#define CYCLES_400_T1H (F_CPU / 833333)</span></div>
<div class="line"><span class="lineno"> 1880</span><span class="preprocessor">#define CYCLES_400 (F_CPU / 400000)</span></div>
<div class="line"><span class="lineno"> 1881</span> </div>
<div class="line"><span class="lineno"> 1882</span>  uint8_t *p = <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>, *end = p + <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>, pix, mask;</div>
<div class="line"><span class="lineno"> 1883</span>  <span class="keyword">volatile</span> uint8_t *set = portSetRegister(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>), *clr = portClearRegister(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>);</div>
<div class="line"><span class="lineno"> 1884</span>  uint32_t cyc;</div>
<div class="line"><span class="lineno"> 1885</span> </div>
<div class="line"><span class="lineno"> 1886</span>  ARM_DEMCR |= ARM_DEMCR_TRCENA;</div>
<div class="line"><span class="lineno"> 1887</span>  ARM_DWT_CTRL |= ARM_DWT_CTRL_CYCCNTENA;</div>
<div class="line"><span class="lineno"> 1888</span> </div>
<div class="line"><span class="lineno"> 1889</span><span class="preprocessor">#if defined(NEO_KHZ400) </span><span class="comment">// 800 KHz check needed only if 400 KHz support enabled</span></div>
<div class="line"><span class="lineno"> 1890</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>) {</div>
<div class="line"><span class="lineno"> 1891</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1892</span>    cyc = ARM_DWT_CYCCNT + CYCLES_800;</div>
<div class="line"><span class="lineno"> 1893</span>    <span class="keywordflow">while</span> (p &lt; end) {</div>
<div class="line"><span class="lineno"> 1894</span>      pix = *p++;</div>
<div class="line"><span class="lineno"> 1895</span>      <span class="keywordflow">for</span> (mask = 0x80; mask; mask &gt;&gt;= 1) {</div>
<div class="line"><span class="lineno"> 1896</span>        <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_800)</div>
<div class="line"><span class="lineno"> 1897</span>          ;</div>
<div class="line"><span class="lineno"> 1898</span>        cyc = ARM_DWT_CYCCNT;</div>
<div class="line"><span class="lineno"> 1899</span>        *set = 1;</div>
<div class="line"><span class="lineno"> 1900</span>        <span class="keywordflow">if</span> (pix &amp; mask) {</div>
<div class="line"><span class="lineno"> 1901</span>          <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_800_T1H)</div>
<div class="line"><span class="lineno"> 1902</span>            ;</div>
<div class="line"><span class="lineno"> 1903</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1904</span>          <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_800_T0H)</div>
<div class="line"><span class="lineno"> 1905</span>            ;</div>
<div class="line"><span class="lineno"> 1906</span>        }</div>
<div class="line"><span class="lineno"> 1907</span>        *clr = 1;</div>
<div class="line"><span class="lineno"> 1908</span>      }</div>
<div class="line"><span class="lineno"> 1909</span>    }</div>
<div class="line"><span class="lineno"> 1910</span>    <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_800)</div>
<div class="line"><span class="lineno"> 1911</span>      ;</div>
<div class="line"><span class="lineno"> 1912</span><span class="preprocessor">#if defined(NEO_KHZ400)</span></div>
<div class="line"><span class="lineno"> 1913</span>  } <span class="keywordflow">else</span> { <span class="comment">// 400 kHz bitstream</span></div>
<div class="line"><span class="lineno"> 1914</span>    cyc = ARM_DWT_CYCCNT + CYCLES_400;</div>
<div class="line"><span class="lineno"> 1915</span>    <span class="keywordflow">while</span> (p &lt; end) {</div>
<div class="line"><span class="lineno"> 1916</span>      pix = *p++;</div>
<div class="line"><span class="lineno"> 1917</span>      <span class="keywordflow">for</span> (mask = 0x80; mask; mask &gt;&gt;= 1) {</div>
<div class="line"><span class="lineno"> 1918</span>        <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_400)</div>
<div class="line"><span class="lineno"> 1919</span>          ;</div>
<div class="line"><span class="lineno"> 1920</span>        cyc = ARM_DWT_CYCCNT;</div>
<div class="line"><span class="lineno"> 1921</span>        *set = 1;</div>
<div class="line"><span class="lineno"> 1922</span>        <span class="keywordflow">if</span> (pix &amp; mask) {</div>
<div class="line"><span class="lineno"> 1923</span>          <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_400_T1H)</div>
<div class="line"><span class="lineno"> 1924</span>            ;</div>
<div class="line"><span class="lineno"> 1925</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1926</span>          <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_400_T0H)</div>
<div class="line"><span class="lineno"> 1927</span>            ;</div>
<div class="line"><span class="lineno"> 1928</span>        }</div>
<div class="line"><span class="lineno"> 1929</span>        *clr = 1;</div>
<div class="line"><span class="lineno"> 1930</span>      }</div>
<div class="line"><span class="lineno"> 1931</span>    }</div>
<div class="line"><span class="lineno"> 1932</span>    <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_400)</div>
<div class="line"><span class="lineno"> 1933</span>      ;</div>
<div class="line"><span class="lineno"> 1934</span>  }</div>
<div class="line"><span class="lineno"> 1935</span><span class="preprocessor">#endif </span><span class="comment">// NEO_KHZ400</span></div>
<div class="line"><span class="lineno"> 1936</span> </div>
<div class="line"><span class="lineno"> 1937</span><span class="preprocessor">#elif defined(TEENSYDUINO) &amp;&amp; (defined(__IMXRT1052__) || defined(__IMXRT1062__))</span></div>
<div class="line"><span class="lineno"> 1938</span><span class="preprocessor">#define CYCLES_800_T0H (F_CPU_ACTUAL / 4000000)</span></div>
<div class="line"><span class="lineno"> 1939</span><span class="preprocessor">#define CYCLES_800_T1H (F_CPU_ACTUAL / 1250000)</span></div>
<div class="line"><span class="lineno"> 1940</span><span class="preprocessor">#define CYCLES_800 (F_CPU_ACTUAL / 800000)</span></div>
<div class="line"><span class="lineno"> 1941</span><span class="preprocessor">#define CYCLES_400_T0H (F_CPU_ACTUAL / 2000000)</span></div>
<div class="line"><span class="lineno"> 1942</span><span class="preprocessor">#define CYCLES_400_T1H (F_CPU_ACTUAL / 833333)</span></div>
<div class="line"><span class="lineno"> 1943</span><span class="preprocessor">#define CYCLES_400 (F_CPU_ACTUAL / 400000)</span></div>
<div class="line"><span class="lineno"> 1944</span> </div>
<div class="line"><span class="lineno"> 1945</span>  uint8_t *p = <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>, *end = p + <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>, pix, mask;</div>
<div class="line"><span class="lineno"> 1946</span>  <span class="keyword">volatile</span> uint32_t *set = portSetRegister(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>), *clr = portClearRegister(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>);</div>
<div class="line"><span class="lineno"> 1947</span>  uint32_t cyc, msk = digitalPinToBitMask(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>);</div>
<div class="line"><span class="lineno"> 1948</span> </div>
<div class="line"><span class="lineno"> 1949</span>  ARM_DEMCR |= ARM_DEMCR_TRCENA;</div>
<div class="line"><span class="lineno"> 1950</span>  ARM_DWT_CTRL |= ARM_DWT_CTRL_CYCCNTENA;</div>
<div class="line"><span class="lineno"> 1951</span> </div>
<div class="line"><span class="lineno"> 1952</span><span class="preprocessor">#if defined(NEO_KHZ400) </span><span class="comment">// 800 KHz check needed only if 400 KHz support enabled</span></div>
<div class="line"><span class="lineno"> 1953</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>) {</div>
<div class="line"><span class="lineno"> 1954</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1955</span>    cyc = ARM_DWT_CYCCNT + CYCLES_800;</div>
<div class="line"><span class="lineno"> 1956</span>    <span class="keywordflow">while</span> (p &lt; end) {</div>
<div class="line"><span class="lineno"> 1957</span>      pix = *p++;</div>
<div class="line"><span class="lineno"> 1958</span>      <span class="keywordflow">for</span> (mask = 0x80; mask; mask &gt;&gt;= 1) {</div>
<div class="line"><span class="lineno"> 1959</span>        <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_800)</div>
<div class="line"><span class="lineno"> 1960</span>          ;</div>
<div class="line"><span class="lineno"> 1961</span>        cyc = ARM_DWT_CYCCNT;</div>
<div class="line"><span class="lineno"> 1962</span>        *set = msk;</div>
<div class="line"><span class="lineno"> 1963</span>        <span class="keywordflow">if</span> (pix &amp; mask) {</div>
<div class="line"><span class="lineno"> 1964</span>          <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_800_T1H)</div>
<div class="line"><span class="lineno"> 1965</span>            ;</div>
<div class="line"><span class="lineno"> 1966</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1967</span>          <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_800_T0H)</div>
<div class="line"><span class="lineno"> 1968</span>            ;</div>
<div class="line"><span class="lineno"> 1969</span>        }</div>
<div class="line"><span class="lineno"> 1970</span>        *clr = msk;</div>
<div class="line"><span class="lineno"> 1971</span>      }</div>
<div class="line"><span class="lineno"> 1972</span>    }</div>
<div class="line"><span class="lineno"> 1973</span>    <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_800)</div>
<div class="line"><span class="lineno"> 1974</span>      ;</div>
<div class="line"><span class="lineno"> 1975</span><span class="preprocessor">#if defined(NEO_KHZ400)</span></div>
<div class="line"><span class="lineno"> 1976</span>  } <span class="keywordflow">else</span> { <span class="comment">// 400 kHz bitstream</span></div>
<div class="line"><span class="lineno"> 1977</span>    cyc = ARM_DWT_CYCCNT + CYCLES_400;</div>
<div class="line"><span class="lineno"> 1978</span>    <span class="keywordflow">while</span> (p &lt; end) {</div>
<div class="line"><span class="lineno"> 1979</span>      pix = *p++;</div>
<div class="line"><span class="lineno"> 1980</span>      <span class="keywordflow">for</span> (mask = 0x80; mask; mask &gt;&gt;= 1) {</div>
<div class="line"><span class="lineno"> 1981</span>        <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_400)</div>
<div class="line"><span class="lineno"> 1982</span>          ;</div>
<div class="line"><span class="lineno"> 1983</span>        cyc = ARM_DWT_CYCCNT;</div>
<div class="line"><span class="lineno"> 1984</span>        *set = msk;</div>
<div class="line"><span class="lineno"> 1985</span>        <span class="keywordflow">if</span> (pix &amp; mask) {</div>
<div class="line"><span class="lineno"> 1986</span>          <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_400_T1H)</div>
<div class="line"><span class="lineno"> 1987</span>            ;</div>
<div class="line"><span class="lineno"> 1988</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1989</span>          <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_400_T0H)</div>
<div class="line"><span class="lineno"> 1990</span>            ;</div>
<div class="line"><span class="lineno"> 1991</span>        }</div>
<div class="line"><span class="lineno"> 1992</span>        *clr = msk;</div>
<div class="line"><span class="lineno"> 1993</span>      }</div>
<div class="line"><span class="lineno"> 1994</span>    }</div>
<div class="line"><span class="lineno"> 1995</span>    <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_400)</div>
<div class="line"><span class="lineno"> 1996</span>      ;</div>
<div class="line"><span class="lineno"> 1997</span>  }</div>
<div class="line"><span class="lineno"> 1998</span><span class="preprocessor">#endif </span><span class="comment">// NEO_KHZ400</span></div>
<div class="line"><span class="lineno"> 1999</span> </div>
<div class="line"><span class="lineno"> 2000</span><span class="preprocessor">#elif defined(TEENSYDUINO) &amp;&amp; defined(__MKL26Z64__) </span><span class="comment">// Teensy-LC</span></div>
<div class="line"><span class="lineno"> 2001</span> </div>
<div class="line"><span class="lineno"> 2002</span><span class="preprocessor">#if F_CPU == 48000000</span></div>
<div class="line"><span class="lineno"> 2003</span>  uint8_t *p = <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>, pix, count, dly, bitmask = digitalPinToBitMask(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>);</div>
<div class="line"><span class="lineno"> 2004</span>  <span class="keyword">volatile</span> uint8_t *reg = portSetRegister(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>);</div>
<div class="line"><span class="lineno"> 2005</span>  uint32_t num = <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>;</div>
<div class="line"><span class="lineno"> 2006</span>  <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;L%=_begin:&quot;</span></div>
<div class="line"><span class="lineno"> 2007</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2008</span>               <span class="stringliteral">&quot;ldrb  %[pix], [%[p], #0]&quot;</span></div>
<div class="line"><span class="lineno"> 2009</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2010</span>               <span class="stringliteral">&quot;lsl   %[pix], #24&quot;</span></div>
<div class="line"><span class="lineno"> 2011</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2012</span>               <span class="stringliteral">&quot;movs  %[count], #7&quot;</span></div>
<div class="line"><span class="lineno"> 2013</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2014</span>               <span class="stringliteral">&quot;L%=_loop:&quot;</span></div>
<div class="line"><span class="lineno"> 2015</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2016</span>               <span class="stringliteral">&quot;lsl   %[pix], #1&quot;</span></div>
<div class="line"><span class="lineno"> 2017</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2018</span>               <span class="stringliteral">&quot;bcs   L%=_loop_one&quot;</span></div>
<div class="line"><span class="lineno"> 2019</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2020</span>               <span class="stringliteral">&quot;L%=_loop_zero:&quot;</span></div>
<div class="line"><span class="lineno"> 2021</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2022</span>               <span class="stringliteral">&quot;strb  %[bitmask], [%[reg], #0]&quot;</span></div>
<div class="line"><span class="lineno"> 2023</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2024</span>               <span class="stringliteral">&quot;movs  %[dly], #4&quot;</span></div>
<div class="line"><span class="lineno"> 2025</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2026</span>               <span class="stringliteral">&quot;L%=_loop_delay_T0H:&quot;</span></div>
<div class="line"><span class="lineno"> 2027</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2028</span>               <span class="stringliteral">&quot;sub   %[dly], #1&quot;</span></div>
<div class="line"><span class="lineno"> 2029</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2030</span>               <span class="stringliteral">&quot;bne   L%=_loop_delay_T0H&quot;</span></div>
<div class="line"><span class="lineno"> 2031</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2032</span>               <span class="stringliteral">&quot;strb  %[bitmask], [%[reg], #4]&quot;</span></div>
<div class="line"><span class="lineno"> 2033</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2034</span>               <span class="stringliteral">&quot;movs  %[dly], #13&quot;</span></div>
<div class="line"><span class="lineno"> 2035</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2036</span>               <span class="stringliteral">&quot;L%=_loop_delay_T0L:&quot;</span></div>
<div class="line"><span class="lineno"> 2037</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2038</span>               <span class="stringliteral">&quot;sub   %[dly], #1&quot;</span></div>
<div class="line"><span class="lineno"> 2039</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2040</span>               <span class="stringliteral">&quot;bne   L%=_loop_delay_T0L&quot;</span></div>
<div class="line"><span class="lineno"> 2041</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2042</span>               <span class="stringliteral">&quot;b     L%=_next&quot;</span></div>
<div class="line"><span class="lineno"> 2043</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2044</span>               <span class="stringliteral">&quot;L%=_loop_one:&quot;</span></div>
<div class="line"><span class="lineno"> 2045</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2046</span>               <span class="stringliteral">&quot;strb  %[bitmask], [%[reg], #0]&quot;</span></div>
<div class="line"><span class="lineno"> 2047</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2048</span>               <span class="stringliteral">&quot;movs  %[dly], #13&quot;</span></div>
<div class="line"><span class="lineno"> 2049</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2050</span>               <span class="stringliteral">&quot;L%=_loop_delay_T1H:&quot;</span></div>
<div class="line"><span class="lineno"> 2051</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2052</span>               <span class="stringliteral">&quot;sub   %[dly], #1&quot;</span></div>
<div class="line"><span class="lineno"> 2053</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2054</span>               <span class="stringliteral">&quot;bne   L%=_loop_delay_T1H&quot;</span></div>
<div class="line"><span class="lineno"> 2055</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2056</span>               <span class="stringliteral">&quot;strb  %[bitmask], [%[reg], #4]&quot;</span></div>
<div class="line"><span class="lineno"> 2057</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2058</span>               <span class="stringliteral">&quot;movs  %[dly], #4&quot;</span></div>
<div class="line"><span class="lineno"> 2059</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2060</span>               <span class="stringliteral">&quot;L%=_loop_delay_T1L:&quot;</span></div>
<div class="line"><span class="lineno"> 2061</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2062</span>               <span class="stringliteral">&quot;sub   %[dly], #1&quot;</span></div>
<div class="line"><span class="lineno"> 2063</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2064</span>               <span class="stringliteral">&quot;bne   L%=_loop_delay_T1L&quot;</span></div>
<div class="line"><span class="lineno"> 2065</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2066</span>               <span class="stringliteral">&quot;nop&quot;</span></div>
<div class="line"><span class="lineno"> 2067</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2068</span>               <span class="stringliteral">&quot;L%=_next:&quot;</span></div>
<div class="line"><span class="lineno"> 2069</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2070</span>               <span class="stringliteral">&quot;sub   %[count], #1&quot;</span></div>
<div class="line"><span class="lineno"> 2071</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2072</span>               <span class="stringliteral">&quot;bne   L%=_loop&quot;</span></div>
<div class="line"><span class="lineno"> 2073</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2074</span>               <span class="stringliteral">&quot;lsl   %[pix], #1&quot;</span></div>
<div class="line"><span class="lineno"> 2075</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2076</span>               <span class="stringliteral">&quot;bcs   L%=_last_one&quot;</span></div>
<div class="line"><span class="lineno"> 2077</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2078</span>               <span class="stringliteral">&quot;L%=_last_zero:&quot;</span></div>
<div class="line"><span class="lineno"> 2079</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2080</span>               <span class="stringliteral">&quot;strb  %[bitmask], [%[reg], #0]&quot;</span></div>
<div class="line"><span class="lineno"> 2081</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2082</span>               <span class="stringliteral">&quot;movs  %[dly], #4&quot;</span></div>
<div class="line"><span class="lineno"> 2083</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2084</span>               <span class="stringliteral">&quot;L%=_last_delay_T0H:&quot;</span></div>
<div class="line"><span class="lineno"> 2085</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2086</span>               <span class="stringliteral">&quot;sub   %[dly], #1&quot;</span></div>
<div class="line"><span class="lineno"> 2087</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2088</span>               <span class="stringliteral">&quot;bne   L%=_last_delay_T0H&quot;</span></div>
<div class="line"><span class="lineno"> 2089</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2090</span>               <span class="stringliteral">&quot;strb  %[bitmask], [%[reg], #4]&quot;</span></div>
<div class="line"><span class="lineno"> 2091</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2092</span>               <span class="stringliteral">&quot;movs  %[dly], #10&quot;</span></div>
<div class="line"><span class="lineno"> 2093</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2094</span>               <span class="stringliteral">&quot;L%=_last_delay_T0L:&quot;</span></div>
<div class="line"><span class="lineno"> 2095</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2096</span>               <span class="stringliteral">&quot;sub   %[dly], #1&quot;</span></div>
<div class="line"><span class="lineno"> 2097</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2098</span>               <span class="stringliteral">&quot;bne   L%=_last_delay_T0L&quot;</span></div>
<div class="line"><span class="lineno"> 2099</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2100</span>               <span class="stringliteral">&quot;b     L%=_repeat&quot;</span></div>
<div class="line"><span class="lineno"> 2101</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2102</span>               <span class="stringliteral">&quot;L%=_last_one:&quot;</span></div>
<div class="line"><span class="lineno"> 2103</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2104</span>               <span class="stringliteral">&quot;strb  %[bitmask], [%[reg], #0]&quot;</span></div>
<div class="line"><span class="lineno"> 2105</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2106</span>               <span class="stringliteral">&quot;movs  %[dly], #13&quot;</span></div>
<div class="line"><span class="lineno"> 2107</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2108</span>               <span class="stringliteral">&quot;L%=_last_delay_T1H:&quot;</span></div>
<div class="line"><span class="lineno"> 2109</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2110</span>               <span class="stringliteral">&quot;sub   %[dly], #1&quot;</span></div>
<div class="line"><span class="lineno"> 2111</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2112</span>               <span class="stringliteral">&quot;bne   L%=_last_delay_T1H&quot;</span></div>
<div class="line"><span class="lineno"> 2113</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2114</span>               <span class="stringliteral">&quot;strb  %[bitmask], [%[reg], #4]&quot;</span></div>
<div class="line"><span class="lineno"> 2115</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2116</span>               <span class="stringliteral">&quot;movs  %[dly], #1&quot;</span></div>
<div class="line"><span class="lineno"> 2117</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2118</span>               <span class="stringliteral">&quot;L%=_last_delay_T1L:&quot;</span></div>
<div class="line"><span class="lineno"> 2119</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2120</span>               <span class="stringliteral">&quot;sub   %[dly], #1&quot;</span></div>
<div class="line"><span class="lineno"> 2121</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2122</span>               <span class="stringliteral">&quot;bne   L%=_last_delay_T1L&quot;</span></div>
<div class="line"><span class="lineno"> 2123</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2124</span>               <span class="stringliteral">&quot;nop&quot;</span></div>
<div class="line"><span class="lineno"> 2125</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2126</span>               <span class="stringliteral">&quot;L%=_repeat:&quot;</span></div>
<div class="line"><span class="lineno"> 2127</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2128</span>               <span class="stringliteral">&quot;add   %[p], #1&quot;</span></div>
<div class="line"><span class="lineno"> 2129</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2130</span>               <span class="stringliteral">&quot;sub   %[num], #1&quot;</span></div>
<div class="line"><span class="lineno"> 2131</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2132</span>               <span class="stringliteral">&quot;bne   L%=_begin&quot;</span></div>
<div class="line"><span class="lineno"> 2133</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2134</span>               <span class="stringliteral">&quot;L%=_done:&quot;</span></div>
<div class="line"><span class="lineno"> 2135</span>               <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2136</span>               : [p] <span class="stringliteral">&quot;+r&quot;</span>(p), [pix] <span class="stringliteral">&quot;=&amp;r&quot;</span>(pix), [count] <span class="stringliteral">&quot;=&amp;r&quot;</span>(count),</div>
<div class="line"><span class="lineno"> 2137</span>                 [dly] <span class="stringliteral">&quot;=&amp;r&quot;</span>(dly), [num] <span class="stringliteral">&quot;+r&quot;</span>(num)</div>
<div class="line"><span class="lineno"> 2138</span>               : [bitmask] <span class="stringliteral">&quot;r&quot;</span>(bitmask), [reg] <span class="stringliteral">&quot;r&quot;</span>(reg));</div>
<div class="line"><span class="lineno"> 2139</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 2140</span><span class="preprocessor">#error &quot;Sorry, only 48 MHz is supported, please set Tools &gt; CPU Speed to 48 MHz&quot;</span></div>
<div class="line"><span class="lineno"> 2141</span><span class="preprocessor">#endif </span><span class="comment">// F_CPU == 48000000</span></div>
<div class="line"><span class="lineno"> 2142</span> </div>
<div class="line"><span class="lineno"> 2143</span>  <span class="comment">// Begin of support for nRF52 based boards  -------------------------</span></div>
<div class="line"><span class="lineno"> 2144</span> </div>
<div class="line"><span class="lineno"> 2145</span><span class="preprocessor">#elif defined(NRF52) || defined(NRF52_SERIES)</span></div>
<div class="line"><span class="lineno"> 2146</span><span class="comment">// [[[Begin of the Neopixel NRF52 EasyDMA implementation</span></div>
<div class="line"><span class="lineno"> 2147</span><span class="comment">//                                    by the Hackerspace San Salvador]]]</span></div>
<div class="line"><span class="lineno"> 2148</span><span class="comment">// This technique uses the PWM peripheral on the NRF52. The PWM uses the</span></div>
<div class="line"><span class="lineno"> 2149</span><span class="comment">// EasyDMA feature included on the chip. This technique loads the duty</span></div>
<div class="line"><span class="lineno"> 2150</span><span class="comment">// cycle configuration for each cycle when the PWM is enabled. For this</span></div>
<div class="line"><span class="lineno"> 2151</span><span class="comment">// to work we need to store a 16 bit configuration for each bit of the</span></div>
<div class="line"><span class="lineno"> 2152</span><span class="comment">// RGB(W) values in the pixel buffer.</span></div>
<div class="line"><span class="lineno"> 2153</span><span class="comment">// Comparator values for the PWM were hand picked and are guaranteed to</span></div>
<div class="line"><span class="lineno"> 2154</span><span class="comment">// be 100% organic to preserve freshness and high accuracy. Current</span></div>
<div class="line"><span class="lineno"> 2155</span><span class="comment">// parameters are:</span></div>
<div class="line"><span class="lineno"> 2156</span><span class="comment">//   * PWM Clock: 16Mhz</span></div>
<div class="line"><span class="lineno"> 2157</span><span class="comment">//   * Minimum step time: 62.5ns</span></div>
<div class="line"><span class="lineno"> 2158</span><span class="comment">//   * Time for zero in high (T0H): 0.31ms</span></div>
<div class="line"><span class="lineno"> 2159</span><span class="comment">//   * Time for one in high (T1H): 0.75ms</span></div>
<div class="line"><span class="lineno"> 2160</span><span class="comment">//   * Cycle time:  1.25us</span></div>
<div class="line"><span class="lineno"> 2161</span><span class="comment">//   * Frequency: 800Khz</span></div>
<div class="line"><span class="lineno"> 2162</span><span class="comment">// For 400Khz we just double the calculated times.</span></div>
<div class="line"><span class="lineno"> 2163</span><span class="comment">// ---------- BEGIN Constants for the EasyDMA implementation -----------</span></div>
<div class="line"><span class="lineno"> 2164</span><span class="comment">// The PWM starts the duty cycle in LOW. To start with HIGH we</span></div>
<div class="line"><span class="lineno"> 2165</span><span class="comment">// need to set the 15th bit on each register.</span></div>
<div class="line"><span class="lineno"> 2166</span> </div>
<div class="line"><span class="lineno"> 2167</span><span class="comment">// WS2812 (rev A) timing is 0.35 and 0.7us</span></div>
<div class="line"><span class="lineno"> 2168</span><span class="comment">//#define MAGIC_T0H               5UL | (0x8000) // 0.3125us</span></div>
<div class="line"><span class="lineno"> 2169</span><span class="comment">//#define MAGIC_T1H              12UL | (0x8000) // 0.75us</span></div>
<div class="line"><span class="lineno"> 2170</span> </div>
<div class="line"><span class="lineno"> 2171</span><span class="comment">// WS2812B (rev B) timing is 0.4 and 0.8 us</span></div>
<div class="line"><span class="lineno"> 2172</span><span class="preprocessor">#define MAGIC_T0H 6UL | (0x8000) </span><span class="comment">// 0.375us</span></div>
<div class="line"><span class="lineno"> 2173</span><span class="preprocessor">#define MAGIC_T1H 13UL | (0x8000) </span><span class="comment">// 0.8125us</span></div>
<div class="line"><span class="lineno"> 2174</span> </div>
<div class="line"><span class="lineno"> 2175</span><span class="comment">// WS2811 (400 khz) timing is 0.5 and 1.2</span></div>
<div class="line"><span class="lineno"> 2176</span><span class="preprocessor">#define MAGIC_T0H_400KHz 8UL | (0x8000) </span><span class="comment">// 0.5us</span></div>
<div class="line"><span class="lineno"> 2177</span><span class="preprocessor">#define MAGIC_T1H_400KHz 19UL | (0x8000) </span><span class="comment">// 1.1875us</span></div>
<div class="line"><span class="lineno"> 2178</span> </div>
<div class="line"><span class="lineno"> 2179</span><span class="comment">// For 400Khz, we double value of CTOPVAL</span></div>
<div class="line"><span class="lineno"> 2180</span><span class="preprocessor">#define CTOPVAL 20UL </span><span class="comment">// 1.25us</span></div>
<div class="line"><span class="lineno"> 2181</span><span class="preprocessor">#define CTOPVAL_400KHz 40UL </span><span class="comment">// 2.5us</span></div>
<div class="line"><span class="lineno"> 2182</span> </div>
<div class="line"><span class="lineno"> 2183</span><span class="comment">// ---------- END Constants for the EasyDMA implementation -------------</span></div>
<div class="line"><span class="lineno"> 2184</span><span class="comment">//</span></div>
<div class="line"><span class="lineno"> 2185</span><span class="comment">// If there is no device available an alternative cycle-counter</span></div>
<div class="line"><span class="lineno"> 2186</span><span class="comment">// implementation is tried.</span></div>
<div class="line"><span class="lineno"> 2187</span><span class="comment">// The nRF52 runs with a fixed clock of 64Mhz. The alternative</span></div>
<div class="line"><span class="lineno"> 2188</span><span class="comment">// implementation is the same as the one used for the Teensy 3.0/1/2 but</span></div>
<div class="line"><span class="lineno"> 2189</span><span class="comment">// with the Nordic SDK HAL &amp; registers syntax.</span></div>
<div class="line"><span class="lineno"> 2190</span><span class="comment">// The number of cycles was hand picked and is guaranteed to be 100%</span></div>
<div class="line"><span class="lineno"> 2191</span><span class="comment">// organic to preserve freshness and high accuracy.</span></div>
<div class="line"><span class="lineno"> 2192</span><span class="comment">// ---------- BEGIN Constants for cycle counter implementation ---------</span></div>
<div class="line"><span class="lineno"> 2193</span><span class="preprocessor">#define CYCLES_800_T0H 18 </span><span class="comment">// ~0.36 uS</span></div>
<div class="line"><span class="lineno"> 2194</span><span class="preprocessor">#define CYCLES_800_T1H 41 </span><span class="comment">// ~0.76 uS</span></div>
<div class="line"><span class="lineno"> 2195</span><span class="preprocessor">#define CYCLES_800 71 </span><span class="comment">// ~1.25 uS</span></div>
<div class="line"><span class="lineno"> 2196</span> </div>
<div class="line"><span class="lineno"> 2197</span><span class="preprocessor">#define CYCLES_400_T0H 26 </span><span class="comment">// ~0.50 uS</span></div>
<div class="line"><span class="lineno"> 2198</span><span class="preprocessor">#define CYCLES_400_T1H 70 </span><span class="comment">// ~1.26 uS</span></div>
<div class="line"><span class="lineno"> 2199</span><span class="preprocessor">#define CYCLES_400 156 </span><span class="comment">// ~2.50 uS</span></div>
<div class="line"><span class="lineno"> 2200</span>  <span class="comment">// ---------- END of Constants for cycle counter implementation --------</span></div>
<div class="line"><span class="lineno"> 2201</span> </div>
<div class="line"><span class="lineno"> 2202</span>  <span class="comment">// To support both the SoftDevice + Neopixels we use the EasyDMA</span></div>
<div class="line"><span class="lineno"> 2203</span>  <span class="comment">// feature from the NRF25. However this technique implies to</span></div>
<div class="line"><span class="lineno"> 2204</span>  <span class="comment">// generate a pattern and store it on the memory. The actual</span></div>
<div class="line"><span class="lineno"> 2205</span>  <span class="comment">// memory used in bytes corresponds to the following formula:</span></div>
<div class="line"><span class="lineno"> 2206</span>  <span class="comment">//              totalMem = numBytes*8*2+(2*2)</span></div>
<div class="line"><span class="lineno"> 2207</span>  <span class="comment">// The two additional bytes at the end are needed to reset the</span></div>
<div class="line"><span class="lineno"> 2208</span>  <span class="comment">// sequence.</span></div>
<div class="line"><span class="lineno"> 2209</span>  <span class="comment">//</span></div>
<div class="line"><span class="lineno"> 2210</span>  <span class="comment">// If there is not enough memory, we will fall back to cycle counter</span></div>
<div class="line"><span class="lineno"> 2211</span>  <span class="comment">// using DWT</span></div>
<div class="line"><span class="lineno"> 2212</span>  uint32_t pattern_size =</div>
<div class="line"><span class="lineno"> 2213</span>      <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a> * 8 * <span class="keyword">sizeof</span>(uint16_t) + 2 * <span class="keyword">sizeof</span>(uint16_t);</div>
<div class="line"><span class="lineno"> 2214</span>  uint16_t *pixels_pattern = NULL;</div>
<div class="line"><span class="lineno"> 2215</span> </div>
<div class="line"><span class="lineno"> 2216</span>  NRF_PWM_Type *pwm = NULL;</div>
<div class="line"><span class="lineno"> 2217</span> </div>
<div class="line"><span class="lineno"> 2218</span>  <span class="comment">// Try to find a free PWM device, which is not enabled</span></div>
<div class="line"><span class="lineno"> 2219</span>  <span class="comment">// and has no connected pins</span></div>
<div class="line"><span class="lineno"> 2220</span>  NRF_PWM_Type *PWM[] = {</div>
<div class="line"><span class="lineno"> 2221</span>    NRF_PWM0,</div>
<div class="line"><span class="lineno"> 2222</span>    NRF_PWM1,</div>
<div class="line"><span class="lineno"> 2223</span>    NRF_PWM2</div>
<div class="line"><span class="lineno"> 2224</span><span class="preprocessor">#if defined(NRF_PWM3)</span></div>
<div class="line"><span class="lineno"> 2225</span>    ,</div>
<div class="line"><span class="lineno"> 2226</span>    NRF_PWM3</div>
<div class="line"><span class="lineno"> 2227</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2228</span>  };</div>
<div class="line"><span class="lineno"> 2229</span> </div>
<div class="line"><span class="lineno"> 2230</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> device = 0; device &lt; (<span class="keyword">sizeof</span>(PWM) / <span class="keyword">sizeof</span>(PWM[0]));</div>
<div class="line"><span class="lineno"> 2231</span>       device++) {</div>
<div class="line"><span class="lineno"> 2232</span>    <span class="keywordflow">if</span> ((PWM[device]-&gt;ENABLE == 0) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2233</span>        (PWM[device]-&gt;PSEL.OUT[0] &amp; PWM_PSEL_OUT_CONNECT_Msk) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2234</span>        (PWM[device]-&gt;PSEL.OUT[1] &amp; PWM_PSEL_OUT_CONNECT_Msk) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2235</span>        (PWM[device]-&gt;PSEL.OUT[2] &amp; PWM_PSEL_OUT_CONNECT_Msk) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2236</span>        (PWM[device]-&gt;PSEL.OUT[3] &amp; PWM_PSEL_OUT_CONNECT_Msk)) {</div>
<div class="line"><span class="lineno"> 2237</span>      pwm = PWM[device];</div>
<div class="line"><span class="lineno"> 2238</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2239</span>    }</div>
<div class="line"><span class="lineno"> 2240</span>  }</div>
<div class="line"><span class="lineno"> 2241</span> </div>
<div class="line"><span class="lineno"> 2242</span>  <span class="comment">// only malloc if there is PWM device available</span></div>
<div class="line"><span class="lineno"> 2243</span>  <span class="keywordflow">if</span> (pwm != NULL) {</div>
<div class="line"><span class="lineno"> 2244</span><span class="preprocessor">#if defined(ARDUINO_NRF52_ADAFRUIT) </span><span class="comment">// use thread-safe malloc</span></div>
<div class="line"><span class="lineno"> 2245</span>    pixels_pattern = (uint16_t *)rtos_malloc(pattern_size);</div>
<div class="line"><span class="lineno"> 2246</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 2247</span>    pixels_pattern = (uint16_t *)malloc(pattern_size);</div>
<div class="line"><span class="lineno"> 2248</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2249</span>  }</div>
<div class="line"><span class="lineno"> 2250</span> </div>
<div class="line"><span class="lineno"> 2251</span>  <span class="comment">// Use the identified device to choose the implementation</span></div>
<div class="line"><span class="lineno"> 2252</span>  <span class="comment">// If a PWM device is available use DMA</span></div>
<div class="line"><span class="lineno"> 2253</span>  <span class="keywordflow">if</span> ((pixels_pattern != NULL) &amp;&amp; (pwm != NULL)) {</div>
<div class="line"><span class="lineno"> 2254</span>    uint16_t pos = 0; <span class="comment">// bit position</span></div>
<div class="line"><span class="lineno"> 2255</span> </div>
<div class="line"><span class="lineno"> 2256</span>    <span class="keywordflow">for</span> (uint16_t n = 0; n &lt; <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>; n++) {</div>
<div class="line"><span class="lineno"> 2257</span>      uint8_t pix = <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>[n];</div>
<div class="line"><span class="lineno"> 2258</span> </div>
<div class="line"><span class="lineno"> 2259</span>      <span class="keywordflow">for</span> (uint8_t mask = 0x80; mask &gt; 0; mask &gt;&gt;= 1) {</div>
<div class="line"><span class="lineno"> 2260</span><span class="preprocessor">#if defined(NEO_KHZ400)</span></div>
<div class="line"><span class="lineno"> 2261</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>) {</div>
<div class="line"><span class="lineno"> 2262</span>          pixels_pattern[pos] =</div>
<div class="line"><span class="lineno"> 2263</span>              (pix &amp; mask) ? MAGIC_T1H_400KHz : MAGIC_T0H_400KHz;</div>
<div class="line"><span class="lineno"> 2264</span>        } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2265</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2266</span>        {</div>
<div class="line"><span class="lineno"> 2267</span>          pixels_pattern[pos] = (pix &amp; mask) ? MAGIC_T1H : MAGIC_T0H;</div>
<div class="line"><span class="lineno"> 2268</span>        }</div>
<div class="line"><span class="lineno"> 2269</span> </div>
<div class="line"><span class="lineno"> 2270</span>        pos++;</div>
<div class="line"><span class="lineno"> 2271</span>      }</div>
<div class="line"><span class="lineno"> 2272</span>    }</div>
<div class="line"><span class="lineno"> 2273</span> </div>
<div class="line"><span class="lineno"> 2274</span>    <span class="comment">// Zero padding to indicate the end of que sequence</span></div>
<div class="line"><span class="lineno"> 2275</span>    pixels_pattern[pos++] = 0 | (0x8000); <span class="comment">// Seq end</span></div>
<div class="line"><span class="lineno"> 2276</span>    pixels_pattern[pos++] = 0 | (0x8000); <span class="comment">// Seq end</span></div>
<div class="line"><span class="lineno"> 2277</span> </div>
<div class="line"><span class="lineno"> 2278</span>    <span class="comment">// Set the wave mode to count UP</span></div>
<div class="line"><span class="lineno"> 2279</span>    pwm-&gt;MODE = (PWM_MODE_UPDOWN_Up &lt;&lt; PWM_MODE_UPDOWN_Pos);</div>
<div class="line"><span class="lineno"> 2280</span> </div>
<div class="line"><span class="lineno"> 2281</span>    <span class="comment">// Set the PWM to use the 16MHz clock</span></div>
<div class="line"><span class="lineno"> 2282</span>    pwm-&gt;PRESCALER =</div>
<div class="line"><span class="lineno"> 2283</span>        (PWM_PRESCALER_PRESCALER_DIV_1 &lt;&lt; PWM_PRESCALER_PRESCALER_Pos);</div>
<div class="line"><span class="lineno"> 2284</span> </div>
<div class="line"><span class="lineno"> 2285</span>    <span class="comment">// Setting of the maximum count</span></div>
<div class="line"><span class="lineno"> 2286</span>    <span class="comment">// but keeping it on 16Mhz allows for more granularity just</span></div>
<div class="line"><span class="lineno"> 2287</span>    <span class="comment">// in case someone wants to do more fine-tuning of the timing.</span></div>
<div class="line"><span class="lineno"> 2288</span><span class="preprocessor">#if defined(NEO_KHZ400)</span></div>
<div class="line"><span class="lineno"> 2289</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>) {</div>
<div class="line"><span class="lineno"> 2290</span>      pwm-&gt;COUNTERTOP = (CTOPVAL_400KHz &lt;&lt; PWM_COUNTERTOP_COUNTERTOP_Pos);</div>
<div class="line"><span class="lineno"> 2291</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2292</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2293</span>    {</div>
<div class="line"><span class="lineno"> 2294</span>      pwm-&gt;COUNTERTOP = (CTOPVAL &lt;&lt; PWM_COUNTERTOP_COUNTERTOP_Pos);</div>
<div class="line"><span class="lineno"> 2295</span>    }</div>
<div class="line"><span class="lineno"> 2296</span> </div>
<div class="line"><span class="lineno"> 2297</span>    <span class="comment">// Disable loops, we want the sequence to repeat only once</span></div>
<div class="line"><span class="lineno"> 2298</span>    pwm-&gt;LOOP = (PWM_LOOP_CNT_Disabled &lt;&lt; PWM_LOOP_CNT_Pos);</div>
<div class="line"><span class="lineno"> 2299</span> </div>
<div class="line"><span class="lineno"> 2300</span>    <span class="comment">// On the &quot;Common&quot; setting the PWM uses the same pattern for the</span></div>
<div class="line"><span class="lineno"> 2301</span>    <span class="comment">// for supported sequences. The pattern is stored on half-word</span></div>
<div class="line"><span class="lineno"> 2302</span>    <span class="comment">// of 16bits</span></div>
<div class="line"><span class="lineno"> 2303</span>    pwm-&gt;DECODER = (PWM_DECODER_LOAD_Common &lt;&lt; PWM_DECODER_LOAD_Pos) |</div>
<div class="line"><span class="lineno"> 2304</span>                   (PWM_DECODER_MODE_RefreshCount &lt;&lt; PWM_DECODER_MODE_Pos);</div>
<div class="line"><span class="lineno"> 2305</span> </div>
<div class="line"><span class="lineno"> 2306</span>    <span class="comment">// Pointer to the memory storing the patter</span></div>
<div class="line"><span class="lineno"> 2307</span>    pwm-&gt;SEQ[0].PTR = (uint32_t)(pixels_pattern) &lt;&lt; PWM_SEQ_PTR_PTR_Pos;</div>
<div class="line"><span class="lineno"> 2308</span> </div>
<div class="line"><span class="lineno"> 2309</span>    <span class="comment">// Calculation of the number of steps loaded from memory.</span></div>
<div class="line"><span class="lineno"> 2310</span>    pwm-&gt;SEQ[0].CNT = (pattern_size / <span class="keyword">sizeof</span>(uint16_t)) &lt;&lt; PWM_SEQ_CNT_CNT_Pos;</div>
<div class="line"><span class="lineno"> 2311</span> </div>
<div class="line"><span class="lineno"> 2312</span>    <span class="comment">// The following settings are ignored with the current config.</span></div>
<div class="line"><span class="lineno"> 2313</span>    pwm-&gt;SEQ[0].REFRESH = 0;</div>
<div class="line"><span class="lineno"> 2314</span>    pwm-&gt;SEQ[0].ENDDELAY = 0;</div>
<div class="line"><span class="lineno"> 2315</span> </div>
<div class="line"><span class="lineno"> 2316</span>    <span class="comment">// The Neopixel implementation is a blocking algorithm. DMA</span></div>
<div class="line"><span class="lineno"> 2317</span>    <span class="comment">// allows for non-blocking operation. To &quot;simulate&quot; a blocking</span></div>
<div class="line"><span class="lineno"> 2318</span>    <span class="comment">// operation we enable the interruption for the end of sequence</span></div>
<div class="line"><span class="lineno"> 2319</span>    <span class="comment">// and block the execution thread until the event flag is set by</span></div>
<div class="line"><span class="lineno"> 2320</span>    <span class="comment">// the peripheral.</span></div>
<div class="line"><span class="lineno"> 2321</span>    <span class="comment">//    pwm-&gt;INTEN |= (PWM_INTEN_SEQEND0_Enabled&lt;&lt;PWM_INTEN_SEQEND0_Pos);</span></div>
<div class="line"><span class="lineno"> 2322</span> </div>
<div class="line"><span class="lineno"> 2323</span><span class="comment">// PSEL must be configured before enabling PWM</span></div>
<div class="line"><span class="lineno"> 2324</span><span class="preprocessor">#if defined(ARDUINO_ARCH_NRF52840)</span></div>
<div class="line"><span class="lineno"> 2325</span>    pwm-&gt;PSEL.OUT[0] = g_APinDescription[<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>].name;</div>
<div class="line"><span class="lineno"> 2326</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 2327</span>    pwm-&gt;PSEL.OUT[0] = g_ADigitalPinMap[<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>];</div>
<div class="line"><span class="lineno"> 2328</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2329</span> </div>
<div class="line"><span class="lineno"> 2330</span>    <span class="comment">// Enable the PWM</span></div>
<div class="line"><span class="lineno"> 2331</span>    pwm-&gt;ENABLE = 1;</div>
<div class="line"><span class="lineno"> 2332</span> </div>
<div class="line"><span class="lineno"> 2333</span>    <span class="comment">// After all of this and many hours of reading the documentation</span></div>
<div class="line"><span class="lineno"> 2334</span>    <span class="comment">// we are ready to start the sequence...</span></div>
<div class="line"><span class="lineno"> 2335</span>    pwm-&gt;EVENTS_SEQEND[0] = 0;</div>
<div class="line"><span class="lineno"> 2336</span>    pwm-&gt;TASKS_SEQSTART[0] = 1;</div>
<div class="line"><span class="lineno"> 2337</span> </div>
<div class="line"><span class="lineno"> 2338</span>    <span class="comment">// But we have to wait for the flag to be set.</span></div>
<div class="line"><span class="lineno"> 2339</span>    <span class="keywordflow">while</span> (!pwm-&gt;EVENTS_SEQEND[0]) {</div>
<div class="line"><span class="lineno"> 2340</span><span class="preprocessor">#if defined(ARDUINO_NRF52_ADAFRUIT) || defined(ARDUINO_ARCH_NRF52840)</span></div>
<div class="line"><span class="lineno"> 2341</span>      yield();</div>
<div class="line"><span class="lineno"> 2342</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2343</span>    }</div>
<div class="line"><span class="lineno"> 2344</span> </div>
<div class="line"><span class="lineno"> 2345</span>    <span class="comment">// Before leave we clear the flag for the event.</span></div>
<div class="line"><span class="lineno"> 2346</span>    pwm-&gt;EVENTS_SEQEND[0] = 0;</div>
<div class="line"><span class="lineno"> 2347</span> </div>
<div class="line"><span class="lineno"> 2348</span>    <span class="comment">// We need to disable the device and disconnect</span></div>
<div class="line"><span class="lineno"> 2349</span>    <span class="comment">// all the outputs before leave or the device will not</span></div>
<div class="line"><span class="lineno"> 2350</span>    <span class="comment">// be selected on the next call.</span></div>
<div class="line"><span class="lineno"> 2351</span>    <span class="comment">// TODO: Check if disabling the device causes performance issues.</span></div>
<div class="line"><span class="lineno"> 2352</span>    pwm-&gt;ENABLE = 0;</div>
<div class="line"><span class="lineno"> 2353</span> </div>
<div class="line"><span class="lineno"> 2354</span>    pwm-&gt;PSEL.OUT[0] = 0xFFFFFFFFUL;</div>
<div class="line"><span class="lineno"> 2355</span> </div>
<div class="line"><span class="lineno"> 2356</span><span class="preprocessor">#if defined(ARDUINO_NRF52_ADAFRUIT) </span><span class="comment">// use thread-safe free</span></div>
<div class="line"><span class="lineno"> 2357</span>    rtos_free(pixels_pattern);</div>
<div class="line"><span class="lineno"> 2358</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 2359</span>    free(pixels_pattern);</div>
<div class="line"><span class="lineno"> 2360</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2361</span>  } <span class="comment">// End of DMA implementation</span></div>
<div class="line"><span class="lineno"> 2362</span>  <span class="comment">// ---------------------------------------------------------------------</span></div>
<div class="line"><span class="lineno"> 2363</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2364</span><span class="preprocessor">#ifndef ARDUINO_ARCH_NRF52840</span></div>
<div class="line"><span class="lineno"> 2365</span><span class="comment">// Fall back to DWT</span></div>
<div class="line"><span class="lineno"> 2366</span><span class="preprocessor">#if defined(ARDUINO_NRF52_ADAFRUIT)</span></div>
<div class="line"><span class="lineno"> 2367</span>    <span class="comment">// Bluefruit Feather 52 uses freeRTOS</span></div>
<div class="line"><span class="lineno"> 2368</span>    <span class="comment">// Critical Section is used since it does not block SoftDevice execution</span></div>
<div class="line"><span class="lineno"> 2369</span>    taskENTER_CRITICAL();</div>
<div class="line"><span class="lineno"> 2370</span><span class="preprocessor">#elif defined(NRF52_DISABLE_INT)</span></div>
<div class="line"><span class="lineno"> 2371</span>    <span class="comment">// If you are using the Bluetooth SoftDevice we advise you to not disable</span></div>
<div class="line"><span class="lineno"> 2372</span>    <span class="comment">// the interrupts. Disabling the interrupts even for short periods of time</span></div>
<div class="line"><span class="lineno"> 2373</span>    <span class="comment">// causes the SoftDevice to stop working.</span></div>
<div class="line"><span class="lineno"> 2374</span>    <span class="comment">// Disable the interrupts only in cases where you need high performance for</span></div>
<div class="line"><span class="lineno"> 2375</span>    <span class="comment">// the LEDs and if you are not using the EasyDMA feature.</span></div>
<div class="line"><span class="lineno"> 2376</span>    __disable_irq();</div>
<div class="line"><span class="lineno"> 2377</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2378</span> </div>
<div class="line"><span class="lineno"> 2379</span>    NRF_GPIO_Type *nrf_port = (NRF_GPIO_Type *)digitalPinToPort(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>);</div>
<div class="line"><span class="lineno"> 2380</span>    uint32_t pinMask = digitalPinToBitMask(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>);</div>
<div class="line"><span class="lineno"> 2381</span> </div>
<div class="line"><span class="lineno"> 2382</span>    uint32_t CYCLES_X00 = CYCLES_800;</div>
<div class="line"><span class="lineno"> 2383</span>    uint32_t CYCLES_X00_T1H = CYCLES_800_T1H;</div>
<div class="line"><span class="lineno"> 2384</span>    uint32_t CYCLES_X00_T0H = CYCLES_800_T0H;</div>
<div class="line"><span class="lineno"> 2385</span> </div>
<div class="line"><span class="lineno"> 2386</span><span class="preprocessor">#if defined(NEO_KHZ400)</span></div>
<div class="line"><span class="lineno"> 2387</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>) {</div>
<div class="line"><span class="lineno"> 2388</span>      CYCLES_X00 = CYCLES_400;</div>
<div class="line"><span class="lineno"> 2389</span>      CYCLES_X00_T1H = CYCLES_400_T1H;</div>
<div class="line"><span class="lineno"> 2390</span>      CYCLES_X00_T0H = CYCLES_400_T0H;</div>
<div class="line"><span class="lineno"> 2391</span>    }</div>
<div class="line"><span class="lineno"> 2392</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2393</span> </div>
<div class="line"><span class="lineno"> 2394</span>    <span class="comment">// Enable DWT in debug core</span></div>
<div class="line"><span class="lineno"> 2395</span>    CoreDebug-&gt;DEMCR |= CoreDebug_DEMCR_TRCENA_Msk;</div>
<div class="line"><span class="lineno"> 2396</span>    DWT-&gt;CTRL |= DWT_CTRL_CYCCNTENA_Msk;</div>
<div class="line"><span class="lineno"> 2397</span> </div>
<div class="line"><span class="lineno"> 2398</span>    <span class="comment">// Tries to re-send the frame if is interrupted by the SoftDevice.</span></div>
<div class="line"><span class="lineno"> 2399</span>    <span class="keywordflow">while</span> (1) {</div>
<div class="line"><span class="lineno"> 2400</span>      uint8_t *p = <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>;</div>
<div class="line"><span class="lineno"> 2401</span> </div>
<div class="line"><span class="lineno"> 2402</span>      uint32_t cycStart = DWT-&gt;CYCCNT;</div>
<div class="line"><span class="lineno"> 2403</span>      uint32_t cyc = 0;</div>
<div class="line"><span class="lineno"> 2404</span> </div>
<div class="line"><span class="lineno"> 2405</span>      <span class="keywordflow">for</span> (uint16_t n = 0; n &lt; <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>; n++) {</div>
<div class="line"><span class="lineno"> 2406</span>        uint8_t pix = *p++;</div>
<div class="line"><span class="lineno"> 2407</span> </div>
<div class="line"><span class="lineno"> 2408</span>        <span class="keywordflow">for</span> (uint8_t mask = 0x80; mask; mask &gt;&gt;= 1) {</div>
<div class="line"><span class="lineno"> 2409</span>          <span class="keywordflow">while</span> (DWT-&gt;CYCCNT - cyc &lt; CYCLES_X00)</div>
<div class="line"><span class="lineno"> 2410</span>            ;</div>
<div class="line"><span class="lineno"> 2411</span>          cyc = DWT-&gt;CYCCNT;</div>
<div class="line"><span class="lineno"> 2412</span> </div>
<div class="line"><span class="lineno"> 2413</span>          nrf_port-&gt;OUTSET |= pinMask;</div>
<div class="line"><span class="lineno"> 2414</span> </div>
<div class="line"><span class="lineno"> 2415</span>          <span class="keywordflow">if</span> (pix &amp; mask) {</div>
<div class="line"><span class="lineno"> 2416</span>            <span class="keywordflow">while</span> (DWT-&gt;CYCCNT - cyc &lt; CYCLES_X00_T1H)</div>
<div class="line"><span class="lineno"> 2417</span>              ;</div>
<div class="line"><span class="lineno"> 2418</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2419</span>            <span class="keywordflow">while</span> (DWT-&gt;CYCCNT - cyc &lt; CYCLES_X00_T0H)</div>
<div class="line"><span class="lineno"> 2420</span>              ;</div>
<div class="line"><span class="lineno"> 2421</span>          }</div>
<div class="line"><span class="lineno"> 2422</span> </div>
<div class="line"><span class="lineno"> 2423</span>          nrf_port-&gt;OUTCLR |= pinMask;</div>
<div class="line"><span class="lineno"> 2424</span>        }</div>
<div class="line"><span class="lineno"> 2425</span>      }</div>
<div class="line"><span class="lineno"> 2426</span>      <span class="keywordflow">while</span> (DWT-&gt;CYCCNT - cyc &lt; CYCLES_X00)</div>
<div class="line"><span class="lineno"> 2427</span>        ;</div>
<div class="line"><span class="lineno"> 2428</span> </div>
<div class="line"><span class="lineno"> 2429</span>      <span class="comment">// If total time longer than 25%, resend the whole data.</span></div>
<div class="line"><span class="lineno"> 2430</span>      <span class="comment">// Since we are likely to be interrupted by SoftDevice</span></div>
<div class="line"><span class="lineno"> 2431</span>      <span class="keywordflow">if</span> ((DWT-&gt;CYCCNT - cycStart) &lt; (8 * <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a> * ((CYCLES_X00 * 5) / 4))) {</div>
<div class="line"><span class="lineno"> 2432</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2433</span>      }</div>
<div class="line"><span class="lineno"> 2434</span> </div>
<div class="line"><span class="lineno"> 2435</span>      <span class="comment">// re-send need 300us delay</span></div>
<div class="line"><span class="lineno"> 2436</span>      delayMicroseconds(300);</div>
<div class="line"><span class="lineno"> 2437</span>    }</div>
<div class="line"><span class="lineno"> 2438</span> </div>
<div class="line"><span class="lineno"> 2439</span><span class="comment">// Enable interrupts again</span></div>
<div class="line"><span class="lineno"> 2440</span><span class="preprocessor">#if defined(ARDUINO_NRF52_ADAFRUIT)</span></div>
<div class="line"><span class="lineno"> 2441</span>    taskEXIT_CRITICAL();</div>
<div class="line"><span class="lineno"> 2442</span><span class="preprocessor">#elif defined(NRF52_DISABLE_INT)</span></div>
<div class="line"><span class="lineno"> 2443</span>    __enable_irq();</div>
<div class="line"><span class="lineno"> 2444</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2445</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2446</span>  }</div>
<div class="line"><span class="lineno"> 2447</span>  <span class="comment">// END of NRF52 implementation</span></div>
<div class="line"><span class="lineno"> 2448</span> </div>
<div class="line"><span class="lineno"> 2449</span><span class="preprocessor">#elif defined(__SAMD21E17A__) || defined(__SAMD21G18A__) || \</span></div>
<div class="line"><span class="lineno"> 2450</span><span class="preprocessor">      defined(__SAMD21E18A__) || defined(__SAMD21J18A__) || \</span></div>
<div class="line"><span class="lineno"> 2451</span><span class="preprocessor">      defined(__SAMD11C14A__) || defined(__SAMD21G17A__)</span></div>
<div class="line"><span class="lineno"> 2452</span>  <span class="comment">// Arduino Zero, Gemma/Trinket M0, SODAQ Autonomo</span></div>
<div class="line"><span class="lineno"> 2453</span>  <span class="comment">// and others</span></div>
<div class="line"><span class="lineno"> 2454</span>  <span class="comment">// Tried this with a timer/counter, couldn&#39;t quite get adequate</span></div>
<div class="line"><span class="lineno"> 2455</span>  <span class="comment">// resolution. So yay, you get a load of goofball NOPs...</span></div>
<div class="line"><span class="lineno"> 2456</span> </div>
<div class="line"><span class="lineno"> 2457</span>  uint8_t *ptr, *end, p, bitMask, portNum;</div>
<div class="line"><span class="lineno"> 2458</span>  uint32_t pinMask;</div>
<div class="line"><span class="lineno"> 2459</span> </div>
<div class="line"><span class="lineno"> 2460</span>  portNum = g_APinDescription[<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>].ulPort;</div>
<div class="line"><span class="lineno"> 2461</span>  pinMask = 1ul &lt;&lt; g_APinDescription[<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>].ulPin;</div>
<div class="line"><span class="lineno"> 2462</span>  ptr = <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>;</div>
<div class="line"><span class="lineno"> 2463</span>  end = ptr + <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>;</div>
<div class="line"><span class="lineno"> 2464</span>  p = *ptr++;</div>
<div class="line"><span class="lineno"> 2465</span>  bitMask = 0x80;</div>
<div class="line"><span class="lineno"> 2466</span> </div>
<div class="line"><span class="lineno"> 2467</span>  <span class="keyword">volatile</span> uint32_t *set = &amp;(PORT-&gt;Group[portNum].OUTSET.reg),</div>
<div class="line"><span class="lineno"> 2468</span>                    *clr = &amp;(PORT-&gt;Group[portNum].OUTCLR.reg);</div>
<div class="line"><span class="lineno"> 2469</span> </div>
<div class="line"><span class="lineno"> 2470</span><span class="preprocessor">#if defined(NEO_KHZ400) </span><span class="comment">// 800 KHz check needed only if 400 KHz support enabled</span></div>
<div class="line"><span class="lineno"> 2471</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>) {</div>
<div class="line"><span class="lineno"> 2472</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2473</span>    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno"> 2474</span>      *set = pinMask;</div>
<div class="line"><span class="lineno"> 2475</span>      <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2476</span>      <span class="keywordflow">if</span> (p &amp; bitMask) {</div>
<div class="line"><span class="lineno"> 2477</span>        <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2478</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2479</span>            <span class="stringliteral">&quot;nop; nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2480</span>        *clr = pinMask;</div>
<div class="line"><span class="lineno"> 2481</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2482</span>        *clr = pinMask;</div>
<div class="line"><span class="lineno"> 2483</span>        <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2484</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2485</span>            <span class="stringliteral">&quot;nop; nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2486</span>      }</div>
<div class="line"><span class="lineno"> 2487</span>      <span class="keywordflow">if</span> (bitMask &gt;&gt;= 1) {</div>
<div class="line"><span class="lineno"> 2488</span>        <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2489</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2490</span>        <span class="keywordflow">if</span> (ptr &gt;= end)</div>
<div class="line"><span class="lineno"> 2491</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2492</span>        p = *ptr++;</div>
<div class="line"><span class="lineno"> 2493</span>        bitMask = 0x80;</div>
<div class="line"><span class="lineno"> 2494</span>      }</div>
<div class="line"><span class="lineno"> 2495</span>    }</div>
<div class="line"><span class="lineno"> 2496</span><span class="preprocessor">#if defined(NEO_KHZ400)</span></div>
<div class="line"><span class="lineno"> 2497</span>  } <span class="keywordflow">else</span> { <span class="comment">// 400 KHz bitstream</span></div>
<div class="line"><span class="lineno"> 2498</span>    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno"> 2499</span>      *set = pinMask;</div>
<div class="line"><span class="lineno"> 2500</span>      <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2501</span>      <span class="keywordflow">if</span> (p &amp; bitMask) {</div>
<div class="line"><span class="lineno"> 2502</span>        <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2503</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2504</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2505</span>            <span class="stringliteral">&quot;nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2506</span>        *clr = pinMask;</div>
<div class="line"><span class="lineno"> 2507</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2508</span>        *clr = pinMask;</div>
<div class="line"><span class="lineno"> 2509</span>        <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2510</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2511</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2512</span>            <span class="stringliteral">&quot;nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2513</span>      }</div>
<div class="line"><span class="lineno"> 2514</span>      <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2515</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2516</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2517</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2518</span>      <span class="keywordflow">if</span> (bitMask &gt;&gt;= 1) {</div>
<div class="line"><span class="lineno"> 2519</span>        <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2520</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2521</span>        <span class="keywordflow">if</span> (ptr &gt;= end)</div>
<div class="line"><span class="lineno"> 2522</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2523</span>        p = *ptr++;</div>
<div class="line"><span class="lineno"> 2524</span>        bitMask = 0x80;</div>
<div class="line"><span class="lineno"> 2525</span>      }</div>
<div class="line"><span class="lineno"> 2526</span>    }</div>
<div class="line"><span class="lineno"> 2527</span>  }</div>
<div class="line"><span class="lineno"> 2528</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2529</span> </div>
<div class="line"><span class="lineno"> 2530</span><span class="comment">//----</span></div>
<div class="line"><span class="lineno"> 2531</span><span class="preprocessor">#elif defined(XMC1100_XMC2GO) || defined(XMC1400_Arduino_Kit) || defined(XMC1100_H_BRIDGE2GO) || defined(XMC1100_Boot_Kit)  || defined(XMC1300_Boot_Kit)</span></div>
<div class="line"><span class="lineno"> 2532</span> </div>
<div class="line"><span class="lineno"> 2533</span>  <span class="comment">// XMC1100/1200/1300 with ARM Cortex M0 are running with 32MHz, XMC1400 runs with 48MHz so may not work</span></div>
<div class="line"><span class="lineno"> 2534</span>  <span class="comment">// Tried this with a timer/counter, couldn&#39;t quite get adequate</span></div>
<div class="line"><span class="lineno"> 2535</span>  <span class="comment">// resolution.  So yay, you get a load of goofball NOPs...</span></div>
<div class="line"><span class="lineno"> 2536</span> </div>
<div class="line"><span class="lineno"> 2537</span>  uint8_t  *ptr, *end, p, bitMask, portNum;</div>
<div class="line"><span class="lineno"> 2538</span>  uint32_t  pinMask;</div>
<div class="line"><span class="lineno"> 2539</span> </div>
<div class="line"><span class="lineno"> 2540</span>  ptr     =  <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>;</div>
<div class="line"><span class="lineno"> 2541</span>  end     =  ptr + <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>;</div>
<div class="line"><span class="lineno"> 2542</span>  p       = *ptr++;</div>
<div class="line"><span class="lineno"> 2543</span>  bitMask =  0x80;</div>
<div class="line"><span class="lineno"> 2544</span> </div>
<div class="line"><span class="lineno"> 2545</span>  XMC_GPIO_PORT_t*  XMC_port = mapping_port_pin[ <a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a> ].port;</div>
<div class="line"><span class="lineno"> 2546</span>  uint8_t  XMC_pin           = mapping_port_pin[ <a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a> ].pin;</div>
<div class="line"><span class="lineno"> 2547</span> </div>
<div class="line"><span class="lineno"> 2548</span>    uint32_t omrhigh = (uint32_t)XMC_GPIO_OUTPUT_LEVEL_HIGH &lt;&lt; XMC_pin;</div>
<div class="line"><span class="lineno"> 2549</span>    uint32_t omrlow  = (uint32_t)XMC_GPIO_OUTPUT_LEVEL_LOW &lt;&lt; XMC_pin;</div>
<div class="line"><span class="lineno"> 2550</span> </div>
<div class="line"><span class="lineno"> 2551</span><span class="preprocessor">#ifdef NEO_KHZ400 </span><span class="comment">// 800 KHz check needed only if 400 KHz support enabled</span></div>
<div class="line"><span class="lineno"> 2552</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>) {</div>
<div class="line"><span class="lineno"> 2553</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2554</span>    <span class="keywordflow">for</span>(;;) {</div>
<div class="line"><span class="lineno"> 2555</span>            XMC_port-&gt;OMR = omrhigh;</div>
<div class="line"><span class="lineno"> 2556</span>      <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2557</span>      <span class="keywordflow">if</span>(p &amp; bitMask) {</div>
<div class="line"><span class="lineno"> 2558</span>        <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2559</span>            <span class="stringliteral">&quot;nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2560</span>              XMC_port-&gt;OMR = omrlow;</div>
<div class="line"><span class="lineno"> 2561</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2562</span>                XMC_port-&gt;OMR = omrlow;</div>
<div class="line"><span class="lineno"> 2563</span>        <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2564</span>            <span class="stringliteral">&quot;nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2565</span>      }</div>
<div class="line"><span class="lineno"> 2566</span>      <span class="keywordflow">if</span>(bitMask &gt;&gt;= 1) {</div>
<div class="line"><span class="lineno"> 2567</span>        <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2568</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2569</span>        <span class="keywordflow">if</span>(ptr &gt;= end) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2570</span>        p       = *ptr++;</div>
<div class="line"><span class="lineno"> 2571</span>        bitMask = 0x80;</div>
<div class="line"><span class="lineno"> 2572</span>      }</div>
<div class="line"><span class="lineno"> 2573</span>    }</div>
<div class="line"><span class="lineno"> 2574</span><span class="preprocessor">#ifdef NEO_KHZ400 </span><span class="comment">// untested code</span></div>
<div class="line"><span class="lineno"> 2575</span>  } <span class="keywordflow">else</span> { <span class="comment">// 400 KHz bitstream</span></div>
<div class="line"><span class="lineno"> 2576</span>    <span class="keywordflow">for</span>(;;) {</div>
<div class="line"><span class="lineno"> 2577</span>      XMC_port-&gt;OMR = omrhigh;</div>
<div class="line"><span class="lineno"> 2578</span>      <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2579</span>      <span class="keywordflow">if</span>(p &amp; bitMask) {</div>
<div class="line"><span class="lineno"> 2580</span>        <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2581</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2582</span>        XMC_port-&gt;OMR = omrlow;</div>
<div class="line"><span class="lineno"> 2583</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2584</span>        XMC_port-&gt;OMR = omrlow;</div>
<div class="line"><span class="lineno"> 2585</span>        <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2586</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2587</span>      }</div>
<div class="line"><span class="lineno"> 2588</span>      <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2589</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2590</span>      <span class="keywordflow">if</span>(bitMask &gt;&gt;= 1) {</div>
<div class="line"><span class="lineno"> 2591</span>        <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2592</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2593</span>        <span class="keywordflow">if</span>(ptr &gt;= end) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2594</span>        p       = *ptr++;</div>
<div class="line"><span class="lineno"> 2595</span>        bitMask = 0x80;</div>
<div class="line"><span class="lineno"> 2596</span>      }</div>
<div class="line"><span class="lineno"> 2597</span>    }</div>
<div class="line"><span class="lineno"> 2598</span>  }</div>
<div class="line"><span class="lineno"> 2599</span> </div>
<div class="line"><span class="lineno"> 2600</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2601</span><span class="comment">//----</span></div>
<div class="line"><span class="lineno"> 2602</span> </div>
<div class="line"><span class="lineno"> 2603</span><span class="comment">//----</span></div>
<div class="line"><span class="lineno"> 2604</span><span class="preprocessor">#elif defined(XMC4700_Relax_Kit) || defined(XMC4800_Relax_Kit)</span></div>
<div class="line"><span class="lineno"> 2605</span> </div>
<div class="line"><span class="lineno"> 2606</span><span class="comment">// XMC4700 and XMC4800 with ARM Cortex M4 are running with 144MHz</span></div>
<div class="line"><span class="lineno"> 2607</span><span class="comment">// Tried this with a timer/counter, couldn&#39;t quite get adequate</span></div>
<div class="line"><span class="lineno"> 2608</span><span class="comment">// resolution.  So yay, you get a load of goofball NOPs...</span></div>
<div class="line"><span class="lineno"> 2609</span> </div>
<div class="line"><span class="lineno"> 2610</span>uint8_t  *ptr, *end, p, bitMask, portNum;</div>
<div class="line"><span class="lineno"> 2611</span>uint32_t  pinMask;</div>
<div class="line"><span class="lineno"> 2612</span> </div>
<div class="line"><span class="lineno"> 2613</span>ptr     =  <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>;</div>
<div class="line"><span class="lineno"> 2614</span>end     =  ptr + <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>;</div>
<div class="line"><span class="lineno"> 2615</span>p       = *ptr++;</div>
<div class="line"><span class="lineno"> 2616</span>bitMask =  0x80;</div>
<div class="line"><span class="lineno"> 2617</span> </div>
<div class="line"><span class="lineno"> 2618</span>XMC_GPIO_PORT_t*   XMC_port = mapping_port_pin[ <a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a> ].port;</div>
<div class="line"><span class="lineno"> 2619</span>uint8_t            XMC_pin  = mapping_port_pin[ <a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a> ].pin;</div>
<div class="line"><span class="lineno"> 2620</span> </div>
<div class="line"><span class="lineno"> 2621</span>uint32_t omrhigh = (uint32_t)XMC_GPIO_OUTPUT_LEVEL_HIGH &lt;&lt; XMC_pin;</div>
<div class="line"><span class="lineno"> 2622</span>uint32_t omrlow  = (uint32_t)XMC_GPIO_OUTPUT_LEVEL_LOW &lt;&lt; XMC_pin;</div>
<div class="line"><span class="lineno"> 2623</span> </div>
<div class="line"><span class="lineno"> 2624</span><span class="preprocessor">#ifdef NEO_KHZ400 </span><span class="comment">// 800 KHz check needed only if 400 KHz support enabled</span></div>
<div class="line"><span class="lineno"> 2625</span><span class="keywordflow">if</span>(<a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>) {</div>
<div class="line"><span class="lineno"> 2626</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2627</span> </div>
<div class="line"><span class="lineno"> 2628</span>  <span class="keywordflow">for</span>(;;) {</div>
<div class="line"><span class="lineno"> 2629</span>    XMC_port-&gt;OMR = omrhigh;</div>
<div class="line"><span class="lineno"> 2630</span>    <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2631</span>        <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2632</span>        <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2633</span>        <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2634</span>        <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2635</span>        <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2636</span>        <span class="stringliteral">&quot;nop; nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2637</span>    <span class="keywordflow">if</span>(p &amp; bitMask) {</div>
<div class="line"><span class="lineno"> 2638</span>      <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2639</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2640</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2641</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2642</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2643</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2644</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2645</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2646</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2647</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2648</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2649</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2650</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2651</span>      XMC_port-&gt;OMR = omrlow;</div>
<div class="line"><span class="lineno"> 2652</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2653</span>      XMC_port-&gt;OMR = omrlow;</div>
<div class="line"><span class="lineno"> 2654</span>      <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2655</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2656</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2657</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2658</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2659</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2660</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2661</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2662</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2663</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2664</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2665</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2666</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2667</span>    }</div>
<div class="line"><span class="lineno"> 2668</span>    <span class="keywordflow">if</span>(bitMask &gt;&gt;= 1) {</div>
<div class="line"><span class="lineno"> 2669</span>      <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2670</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2671</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2672</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2673</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2674</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2675</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2676</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2677</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2678</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2679</span>          <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2680</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2681</span>      <span class="keywordflow">if</span>(ptr &gt;= end) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2682</span>      p       = *ptr++;</div>
<div class="line"><span class="lineno"> 2683</span>      bitMask = 0x80;</div>
<div class="line"><span class="lineno"> 2684</span>    }</div>
<div class="line"><span class="lineno"> 2685</span>  }</div>
<div class="line"><span class="lineno"> 2686</span> </div>
<div class="line"><span class="lineno"> 2687</span> </div>
<div class="line"><span class="lineno"> 2688</span><span class="preprocessor">#ifdef NEO_KHZ400</span></div>
<div class="line"><span class="lineno"> 2689</span>  } <span class="keywordflow">else</span> { <span class="comment">// 400 KHz bitstream</span></div>
<div class="line"><span class="lineno"> 2690</span>    <span class="comment">// ToDo!</span></div>
<div class="line"><span class="lineno"> 2691</span>  }</div>
<div class="line"><span class="lineno"> 2692</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2693</span><span class="comment">//----</span></div>
<div class="line"><span class="lineno"> 2694</span> </div>
<div class="line"><span class="lineno"> 2695</span><span class="preprocessor">#elif defined(__SAMD51__) </span><span class="comment">// M4</span></div>
<div class="line"><span class="lineno"> 2696</span> </div>
<div class="line"><span class="lineno"> 2697</span>  uint8_t *ptr, *end, p, bitMask, portNum;</div>
<div class="line"><span class="lineno"> 2698</span>  uint32_t pinMask;</div>
<div class="line"><span class="lineno"> 2699</span> </div>
<div class="line"><span class="lineno"> 2700</span>  portNum = g_APinDescription[<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>].ulPort;</div>
<div class="line"><span class="lineno"> 2701</span>  pinMask = 1ul &lt;&lt; g_APinDescription[<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>].ulPin;</div>
<div class="line"><span class="lineno"> 2702</span>  ptr = <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>;</div>
<div class="line"><span class="lineno"> 2703</span>  end = ptr + <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>;</div>
<div class="line"><span class="lineno"> 2704</span>  p = *ptr++;</div>
<div class="line"><span class="lineno"> 2705</span>  bitMask = 0x80;</div>
<div class="line"><span class="lineno"> 2706</span> </div>
<div class="line"><span class="lineno"> 2707</span>  <span class="keyword">volatile</span> uint32_t *set = &amp;(PORT-&gt;Group[portNum].OUTSET.reg),</div>
<div class="line"><span class="lineno"> 2708</span>                    *clr = &amp;(PORT-&gt;Group[portNum].OUTCLR.reg);</div>
<div class="line"><span class="lineno"> 2709</span> </div>
<div class="line"><span class="lineno"> 2710</span>  <span class="comment">// SAMD51 overclock-compatible timing is only a mild abomination.</span></div>
<div class="line"><span class="lineno"> 2711</span>  <span class="comment">// It uses SysTick for a consistent clock reference regardless of</span></div>
<div class="line"><span class="lineno"> 2712</span>  <span class="comment">// optimization / cache settings.  That&#39;s the good news.  The bad news,</span></div>
<div class="line"><span class="lineno"> 2713</span>  <span class="comment">// since SysTick-&gt;VAL is a volatile type it&#39;s slow to access...and then,</span></div>
<div class="line"><span class="lineno"> 2714</span>  <span class="comment">// with the SysTick interval that Arduino sets up (1 ms), this would</span></div>
<div class="line"><span class="lineno"> 2715</span>  <span class="comment">// require a subtract and MOD operation for gauging elapsed time, and</span></div>
<div class="line"><span class="lineno"> 2716</span>  <span class="comment">// all taken in combination that lacks adequate temporal resolution</span></div>
<div class="line"><span class="lineno"> 2717</span>  <span class="comment">// for NeoPixel timing.  So a kind of horrible thing is done here...</span></div>
<div class="line"><span class="lineno"> 2718</span>  <span class="comment">// since interrupts are turned off anyway and it&#39;s generally accepted</span></div>
<div class="line"><span class="lineno"> 2719</span>  <span class="comment">// by now that we&#39;re gonna lose track of time in the NeoPixel lib,</span></div>
<div class="line"><span class="lineno"> 2720</span>  <span class="comment">// the SysTick timer is reconfigured for a period matching the NeoPixel</span></div>
<div class="line"><span class="lineno"> 2721</span>  <span class="comment">// bit timing (either 800 or 400 KHz) and we watch SysTick-&gt;VAL very</span></div>
<div class="line"><span class="lineno"> 2722</span>  <span class="comment">// closely (just a threshold, no subtract or MOD or anything) and that</span></div>
<div class="line"><span class="lineno"> 2723</span>  <span class="comment">// seems to work just well enough.  When finished, the SysTick</span></div>
<div class="line"><span class="lineno"> 2724</span>  <span class="comment">// peripheral is set back to its original state.</span></div>
<div class="line"><span class="lineno"> 2725</span> </div>
<div class="line"><span class="lineno"> 2726</span>  uint32_t t0, t1, top, ticks, saveLoad = SysTick-&gt;LOAD, saveVal = SysTick-&gt;VAL;</div>
<div class="line"><span class="lineno"> 2727</span> </div>
<div class="line"><span class="lineno"> 2728</span><span class="preprocessor">#if defined(NEO_KHZ400) </span><span class="comment">// 800 KHz check needed only if 400 KHz support enabled</span></div>
<div class="line"><span class="lineno"> 2729</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>) {</div>
<div class="line"><span class="lineno"> 2730</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2731</span>    top = (uint32_t)(F_CPU * 0.00000125);      <span class="comment">// Bit hi + lo = 1.25 uS</span></div>
<div class="line"><span class="lineno"> 2732</span>    t0 = top - (uint32_t)(F_CPU * 0.00000040); <span class="comment">// 0 = 0.4 uS hi</span></div>
<div class="line"><span class="lineno"> 2733</span>    t1 = top - (uint32_t)(F_CPU * 0.00000080); <span class="comment">// 1 = 0.8 uS hi</span></div>
<div class="line"><span class="lineno"> 2734</span><span class="preprocessor">#if defined(NEO_KHZ400)</span></div>
<div class="line"><span class="lineno"> 2735</span>  } <span class="keywordflow">else</span> {                                     <span class="comment">// 400 KHz bitstream</span></div>
<div class="line"><span class="lineno"> 2736</span>    top = (uint32_t)(F_CPU * 0.00000250);      <span class="comment">// Bit hi + lo = 2.5 uS</span></div>
<div class="line"><span class="lineno"> 2737</span>    t0 = top - (uint32_t)(F_CPU * 0.00000050); <span class="comment">// 0 = 0.5 uS hi</span></div>
<div class="line"><span class="lineno"> 2738</span>    t1 = top - (uint32_t)(F_CPU * 0.00000120); <span class="comment">// 1 = 1.2 uS hi</span></div>
<div class="line"><span class="lineno"> 2739</span>  }</div>
<div class="line"><span class="lineno"> 2740</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2741</span> </div>
<div class="line"><span class="lineno"> 2742</span>  SysTick-&gt;LOAD = top; <span class="comment">// Config SysTick for NeoPixel bit freq</span></div>
<div class="line"><span class="lineno"> 2743</span>  SysTick-&gt;VAL = top;  <span class="comment">// Set to start value (counts down)</span></div>
<div class="line"><span class="lineno"> 2744</span>  (void)SysTick-&gt;VAL;  <span class="comment">// Dummy read helps sync up 1st bit</span></div>
<div class="line"><span class="lineno"> 2745</span> </div>
<div class="line"><span class="lineno"> 2746</span>  <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno"> 2747</span>    *set = pinMask;                  <span class="comment">// Set output high</span></div>
<div class="line"><span class="lineno"> 2748</span>    ticks = (p &amp; bitMask) ? t1 : t0; <span class="comment">// SysTick threshold,</span></div>
<div class="line"><span class="lineno"> 2749</span>    <span class="keywordflow">while</span> (SysTick-&gt;VAL &gt; ticks)</div>
<div class="line"><span class="lineno"> 2750</span>      ;                     <span class="comment">// wait for it</span></div>
<div class="line"><span class="lineno"> 2751</span>    *clr = pinMask;         <span class="comment">// Set output low</span></div>
<div class="line"><span class="lineno"> 2752</span>    <span class="keywordflow">if</span> (!(bitMask &gt;&gt;= 1)) { <span class="comment">// Next bit for this byte...done?</span></div>
<div class="line"><span class="lineno"> 2753</span>      <span class="keywordflow">if</span> (ptr &gt;= end)</div>
<div class="line"><span class="lineno"> 2754</span>        <span class="keywordflow">break</span>;        <span class="comment">// If last byte sent, exit loop</span></div>
<div class="line"><span class="lineno"> 2755</span>      p = *ptr++;     <span class="comment">// Fetch next byte</span></div>
<div class="line"><span class="lineno"> 2756</span>      bitMask = 0x80; <span class="comment">// Reset bitmask</span></div>
<div class="line"><span class="lineno"> 2757</span>    }</div>
<div class="line"><span class="lineno"> 2758</span>    <span class="keywordflow">while</span> (SysTick-&gt;VAL &lt;= ticks)</div>
<div class="line"><span class="lineno"> 2759</span>      ; <span class="comment">// Wait for rollover to &#39;top&#39;</span></div>
<div class="line"><span class="lineno"> 2760</span>  }</div>
<div class="line"><span class="lineno"> 2761</span> </div>
<div class="line"><span class="lineno"> 2762</span>  SysTick-&gt;LOAD = saveLoad; <span class="comment">// Restore SysTick rollover to 1 ms</span></div>
<div class="line"><span class="lineno"> 2763</span>  SysTick-&gt;VAL = saveVal;   <span class="comment">// Restore SysTick value</span></div>
<div class="line"><span class="lineno"> 2764</span> </div>
<div class="line"><span class="lineno"> 2765</span><span class="preprocessor">#elif defined(ARDUINO_STM32_FEATHER) </span><span class="comment">// FEATHER WICED (120MHz)</span></div>
<div class="line"><span class="lineno"> 2766</span> </div>
<div class="line"><span class="lineno"> 2767</span>  <span class="comment">// Tried this with a timer/counter, couldn&#39;t quite get adequate</span></div>
<div class="line"><span class="lineno"> 2768</span>  <span class="comment">// resolution. So yay, you get a load of goofball NOPs...</span></div>
<div class="line"><span class="lineno"> 2769</span> </div>
<div class="line"><span class="lineno"> 2770</span>  uint8_t *ptr, *end, p, bitMask;</div>
<div class="line"><span class="lineno"> 2771</span>  uint32_t pinMask;</div>
<div class="line"><span class="lineno"> 2772</span> </div>
<div class="line"><span class="lineno"> 2773</span>  pinMask = BIT(PIN_MAP[<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>].gpio_bit);</div>
<div class="line"><span class="lineno"> 2774</span>  ptr = <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>;</div>
<div class="line"><span class="lineno"> 2775</span>  end = ptr + <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>;</div>
<div class="line"><span class="lineno"> 2776</span>  p = *ptr++;</div>
<div class="line"><span class="lineno"> 2777</span>  bitMask = 0x80;</div>
<div class="line"><span class="lineno"> 2778</span> </div>
<div class="line"><span class="lineno"> 2779</span>  <span class="keyword">volatile</span> uint16_t *set = &amp;(PIN_MAP[<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>].gpio_device-&gt;regs-&gt;BSRRL);</div>
<div class="line"><span class="lineno"> 2780</span>  <span class="keyword">volatile</span> uint16_t *clr = &amp;(PIN_MAP[<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>].gpio_device-&gt;regs-&gt;BSRRH);</div>
<div class="line"><span class="lineno"> 2781</span> </div>
<div class="line"><span class="lineno"> 2782</span><span class="preprocessor">#if defined(NEO_KHZ400) </span><span class="comment">// 800 KHz check needed only if 400 KHz support enabled</span></div>
<div class="line"><span class="lineno"> 2783</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>) {</div>
<div class="line"><span class="lineno"> 2784</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2785</span>    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno"> 2786</span>      <span class="keywordflow">if</span> (p &amp; bitMask) { <span class="comment">// ONE</span></div>
<div class="line"><span class="lineno"> 2787</span>        <span class="comment">// High 800ns</span></div>
<div class="line"><span class="lineno"> 2788</span>        *set = pinMask;</div>
<div class="line"><span class="lineno"> 2789</span>        <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2790</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2791</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2792</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2793</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2794</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2795</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2796</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2797</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2798</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2799</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2800</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2801</span>        <span class="comment">// Low 450ns</span></div>
<div class="line"><span class="lineno"> 2802</span>        *clr = pinMask;</div>
<div class="line"><span class="lineno"> 2803</span>        <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2804</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2805</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2806</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2807</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2808</span>      } <span class="keywordflow">else</span> { <span class="comment">// ZERO</span></div>
<div class="line"><span class="lineno"> 2809</span>        <span class="comment">// High 400ns</span></div>
<div class="line"><span class="lineno"> 2810</span>        *set = pinMask;</div>
<div class="line"><span class="lineno"> 2811</span>        <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2812</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2813</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2814</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2815</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2816</span>            <span class="stringliteral">&quot;nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2817</span>        <span class="comment">// Low 850ns</span></div>
<div class="line"><span class="lineno"> 2818</span>        *clr = pinMask;</div>
<div class="line"><span class="lineno"> 2819</span>        <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2820</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2821</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2822</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2823</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2824</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2825</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2826</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2827</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2828</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2829</span>            <span class="stringliteral">&quot;nop; nop; nop; nop; nop; nop; nop; nop;&quot;</span></div>
<div class="line"><span class="lineno"> 2830</span>            <span class="stringliteral">&quot;nop; nop; nop; nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2831</span>      }</div>
<div class="line"><span class="lineno"> 2832</span>      <span class="keywordflow">if</span> (bitMask &gt;&gt;= 1) {</div>
<div class="line"><span class="lineno"> 2833</span>        <span class="comment">// Move on to the next pixel</span></div>
<div class="line"><span class="lineno"> 2834</span>        <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2835</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2836</span>        <span class="keywordflow">if</span> (ptr &gt;= end)</div>
<div class="line"><span class="lineno"> 2837</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2838</span>        p = *ptr++;</div>
<div class="line"><span class="lineno"> 2839</span>        bitMask = 0x80;</div>
<div class="line"><span class="lineno"> 2840</span>      }</div>
<div class="line"><span class="lineno"> 2841</span>    }</div>
<div class="line"><span class="lineno"> 2842</span><span class="preprocessor">#if defined(NEO_KHZ400)</span></div>
<div class="line"><span class="lineno"> 2843</span>  } <span class="keywordflow">else</span> { <span class="comment">// 400 KHz bitstream</span></div>
<div class="line"><span class="lineno"> 2844</span>    <span class="comment">// ToDo!</span></div>
<div class="line"><span class="lineno"> 2845</span>  }</div>
<div class="line"><span class="lineno"> 2846</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2847</span> </div>
<div class="line"><span class="lineno"> 2848</span><span class="preprocessor">#elif defined(TARGET_LPC1768)</span></div>
<div class="line"><span class="lineno"> 2849</span>  uint8_t *ptr, *end, p, bitMask;</div>
<div class="line"><span class="lineno"> 2850</span>  ptr = <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>;</div>
<div class="line"><span class="lineno"> 2851</span>  end = ptr + <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>;</div>
<div class="line"><span class="lineno"> 2852</span>  p = *ptr++;</div>
<div class="line"><span class="lineno"> 2853</span>  bitMask = 0x80;</div>
<div class="line"><span class="lineno"> 2854</span> </div>
<div class="line"><span class="lineno"> 2855</span><span class="preprocessor">#if defined(NEO_KHZ400) </span><span class="comment">// 800 KHz check needed only if 400 KHz support enabled</span></div>
<div class="line"><span class="lineno"> 2856</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>) {</div>
<div class="line"><span class="lineno"> 2857</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2858</span>    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno"> 2859</span>      <span class="keywordflow">if</span> (p &amp; bitMask) {</div>
<div class="line"><span class="lineno"> 2860</span>        <span class="comment">// data ONE high</span></div>
<div class="line"><span class="lineno"> 2861</span>        <span class="comment">// min: 550 typ: 700 max: 5,500</span></div>
<div class="line"><span class="lineno"> 2862</span>        gpio_set(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>);</div>
<div class="line"><span class="lineno"> 2863</span>        time::delay_ns(550);</div>
<div class="line"><span class="lineno"> 2864</span>        <span class="comment">// min: 450 typ: 600 max: 5,000</span></div>
<div class="line"><span class="lineno"> 2865</span>        gpio_clear(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>);</div>
<div class="line"><span class="lineno"> 2866</span>        time::delay_ns(450);</div>
<div class="line"><span class="lineno"> 2867</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2868</span>        <span class="comment">// data ZERO high</span></div>
<div class="line"><span class="lineno"> 2869</span>        <span class="comment">// min: 200  typ: 350 max: 500</span></div>
<div class="line"><span class="lineno"> 2870</span>        gpio_set(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>);</div>
<div class="line"><span class="lineno"> 2871</span>        time::delay_ns(200);</div>
<div class="line"><span class="lineno"> 2872</span>        <span class="comment">// data low</span></div>
<div class="line"><span class="lineno"> 2873</span>        <span class="comment">// min: 450 typ: 600 max: 5,000</span></div>
<div class="line"><span class="lineno"> 2874</span>        gpio_clear(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>);</div>
<div class="line"><span class="lineno"> 2875</span>        time::delay_ns(450);</div>
<div class="line"><span class="lineno"> 2876</span>      }</div>
<div class="line"><span class="lineno"> 2877</span>      <span class="keywordflow">if</span> (bitMask &gt;&gt;= 1) {</div>
<div class="line"><span class="lineno"> 2878</span>        <span class="comment">// Move on to the next pixel</span></div>
<div class="line"><span class="lineno"> 2879</span>        <span class="keyword">asm</span>(<span class="stringliteral">&quot;nop;&quot;</span>);</div>
<div class="line"><span class="lineno"> 2880</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2881</span>        <span class="keywordflow">if</span> (ptr &gt;= end)</div>
<div class="line"><span class="lineno"> 2882</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2883</span>        p = *ptr++;</div>
<div class="line"><span class="lineno"> 2884</span>        bitMask = 0x80;</div>
<div class="line"><span class="lineno"> 2885</span>      }</div>
<div class="line"><span class="lineno"> 2886</span>    }</div>
<div class="line"><span class="lineno"> 2887</span><span class="preprocessor">#if defined(NEO_KHZ400)</span></div>
<div class="line"><span class="lineno"> 2888</span>  } <span class="keywordflow">else</span> { <span class="comment">// 400 KHz bitstream</span></div>
<div class="line"><span class="lineno"> 2889</span>    <span class="comment">// ToDo!</span></div>
<div class="line"><span class="lineno"> 2890</span>  }</div>
<div class="line"><span class="lineno"> 2891</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2892</span><span class="preprocessor">#elif defined(ARDUINO_ARCH_STM32) || defined(ARDUINO_ARCH_ARDUINO_CORE_STM32) || defined(_PY32_DEF_)</span></div>
<div class="line"><span class="lineno"> 2893</span>  uint8_t *p = <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>, *end = p + <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>, pix = *p++, mask = 0x80;</div>
<div class="line"><span class="lineno"> 2894</span>  uint32_t cyc;</div>
<div class="line"><span class="lineno"> 2895</span>  uint32_t saveLoad = SysTick-&gt;LOAD, saveVal = SysTick-&gt;VAL;</div>
<div class="line"><span class="lineno"> 2896</span><span class="preprocessor">#if defined(NEO_KHZ400) </span><span class="comment">// 800 KHz check needed only if 400 KHz support enabled</span></div>
<div class="line"><span class="lineno"> 2897</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>) {</div>
<div class="line"><span class="lineno"> 2898</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2899</span>    uint32_t top = (F_CPU / 800000);       <span class="comment">// 1.25µs</span></div>
<div class="line"><span class="lineno"> 2900</span>    uint32_t t0 = top - (F_CPU / 2500000); <span class="comment">// 0.4µs</span></div>
<div class="line"><span class="lineno"> 2901</span>    uint32_t t1 = top - (F_CPU / 1250000); <span class="comment">// 0.8µs</span></div>
<div class="line"><span class="lineno"> 2902</span>    SysTick-&gt;LOAD = top - 1; <span class="comment">// Config SysTick for NeoPixel bit freq</span></div>
<div class="line"><span class="lineno"> 2903</span>    SysTick-&gt;VAL = 0;        <span class="comment">// Set to start value</span></div>
<div class="line"><span class="lineno"> 2904</span>    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno"> 2905</span>      LL_GPIO_SetOutputPin(gpioPort, gpioPin);</div>
<div class="line"><span class="lineno"> 2906</span>      cyc = (pix &amp; mask) ? t1 : t0;</div>
<div class="line"><span class="lineno"> 2907</span>      <span class="keywordflow">while</span> (SysTick-&gt;VAL &gt; cyc)</div>
<div class="line"><span class="lineno"> 2908</span>        ;</div>
<div class="line"><span class="lineno"> 2909</span>      LL_GPIO_ResetOutputPin(gpioPort, gpioPin);</div>
<div class="line"><span class="lineno"> 2910</span>      <span class="keywordflow">if</span> (!(mask &gt;&gt;= 1)) {</div>
<div class="line"><span class="lineno"> 2911</span>        <span class="keywordflow">if</span> (p &gt;= end)</div>
<div class="line"><span class="lineno"> 2912</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2913</span>        pix = *p++;</div>
<div class="line"><span class="lineno"> 2914</span>        mask = 0x80;</div>
<div class="line"><span class="lineno"> 2915</span>      }</div>
<div class="line"><span class="lineno"> 2916</span>      <span class="keywordflow">while</span> (SysTick-&gt;VAL &lt;= cyc)</div>
<div class="line"><span class="lineno"> 2917</span>        ;</div>
<div class="line"><span class="lineno"> 2918</span>    }</div>
<div class="line"><span class="lineno"> 2919</span><span class="preprocessor">#if defined(NEO_KHZ400)</span></div>
<div class="line"><span class="lineno"> 2920</span>  } <span class="keywordflow">else</span> {                                 <span class="comment">// 400 kHz bitstream</span></div>
<div class="line"><span class="lineno"> 2921</span>    uint32_t top = (F_CPU / 400000);       <span class="comment">// 2.5µs</span></div>
<div class="line"><span class="lineno"> 2922</span>    uint32_t t0 = top - (F_CPU / 2000000); <span class="comment">// 0.5µs</span></div>
<div class="line"><span class="lineno"> 2923</span>    uint32_t t1 = top - (F_CPU / 833333);  <span class="comment">// 1.2µs</span></div>
<div class="line"><span class="lineno"> 2924</span>    SysTick-&gt;LOAD = top - 1; <span class="comment">// Config SysTick for NeoPixel bit freq</span></div>
<div class="line"><span class="lineno"> 2925</span>    SysTick-&gt;VAL = 0;        <span class="comment">// Set to start value</span></div>
<div class="line"><span class="lineno"> 2926</span>    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno"> 2927</span>      LL_GPIO_SetOutputPin(gpioPort, gpioPin);</div>
<div class="line"><span class="lineno"> 2928</span>      cyc = (pix &amp; mask) ? t1 : t0;</div>
<div class="line"><span class="lineno"> 2929</span>      <span class="keywordflow">while</span> (SysTick-&gt;VAL &gt; cyc)</div>
<div class="line"><span class="lineno"> 2930</span>        ;</div>
<div class="line"><span class="lineno"> 2931</span>      LL_GPIO_ResetOutputPin(gpioPort, gpioPin);</div>
<div class="line"><span class="lineno"> 2932</span>      <span class="keywordflow">if</span> (!(mask &gt;&gt;= 1)) {</div>
<div class="line"><span class="lineno"> 2933</span>        <span class="keywordflow">if</span> (p &gt;= end)</div>
<div class="line"><span class="lineno"> 2934</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2935</span>        pix = *p++;</div>
<div class="line"><span class="lineno"> 2936</span>        mask = 0x80;</div>
<div class="line"><span class="lineno"> 2937</span>      }</div>
<div class="line"><span class="lineno"> 2938</span>      <span class="keywordflow">while</span> (SysTick-&gt;VAL &lt;= cyc)</div>
<div class="line"><span class="lineno"> 2939</span>        ;</div>
<div class="line"><span class="lineno"> 2940</span>    }</div>
<div class="line"><span class="lineno"> 2941</span>  }</div>
<div class="line"><span class="lineno"> 2942</span><span class="preprocessor">#endif </span><span class="comment">// NEO_KHZ400</span></div>
<div class="line"><span class="lineno"> 2943</span>  SysTick-&gt;LOAD = saveLoad; <span class="comment">// Restore SysTick rollover to 1 ms</span></div>
<div class="line"><span class="lineno"> 2944</span>  SysTick-&gt;VAL = saveVal;   <span class="comment">// Restore SysTick value</span></div>
<div class="line"><span class="lineno"> 2945</span><span class="preprocessor">#elif defined(NRF51)</span></div>
<div class="line"><span class="lineno"> 2946</span>  uint8_t *p = <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>, pix, count, mask;</div>
<div class="line"><span class="lineno"> 2947</span>  int32_t num = <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>;</div>
<div class="line"><span class="lineno"> 2948</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bitmask = (1 &lt;&lt; g_ADigitalPinMap[<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>]);</div>
<div class="line"><span class="lineno"> 2949</span>  <span class="comment">// https://github.com/sandeepmistry/arduino-nRF5/blob/dc53980c8bac27898fca90d8ecb268e11111edc1/variants/BBCmicrobit/variant.cpp</span></div>
<div class="line"><span class="lineno"> 2950</span> </div>
<div class="line"><span class="lineno"> 2951</span>  <span class="comment">//volatile unsigned int *reg = (unsigned int *)(0x50000000UL + 0x508);</span></div>
<div class="line"><span class="lineno"> 2952</span>  <span class="keyword">volatile</span> uint32_t *reg = (uint32_t *)(NRF_GPIO_BASE + offsetof(NRF_GPIO_Type, OUTSET));</div>
<div class="line"><span class="lineno"> 2953</span> </div>
<div class="line"><span class="lineno"> 2954</span>  <span class="comment">// https://github.com/sandeepmistry/arduino-nRF5/blob/dc53980c8bac27898fca90d8ecb268e11111edc1/cores/nRF5/SDK/components/device/nrf51.h</span></div>
<div class="line"><span class="lineno"> 2955</span>  <span class="comment">// http://www.iot-programmer.com/index.php/books/27-micro-bit-iot-in-c/chapters-micro-bit-iot-in-c/47-micro-bit-iot-in-c-fast-memory-mapped-gpio?showall=1</span></div>
<div class="line"><span class="lineno"> 2956</span>  <span class="comment">// https://github.com/Microsoft/pxt-neopixel/blob/master/sendbuffer.asm</span></div>
<div class="line"><span class="lineno"> 2957</span> </div>
<div class="line"><span class="lineno"> 2958</span>  <span class="keyword">asm</span> <span class="keyword">volatile</span>(</div>
<div class="line"><span class="lineno"> 2959</span>      <span class="comment">// &quot;cpsid i&quot; ; disable irq</span></div>
<div class="line"><span class="lineno"> 2960</span> </div>
<div class="line"><span class="lineno"> 2961</span>      <span class="comment">//    b .start</span></div>
<div class="line"><span class="lineno"> 2962</span>      <span class="stringliteral">&quot;b  L%=_start&quot;</span></div>
<div class="line"><span class="lineno"> 2963</span>      <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2964</span>      <span class="comment">// .nextbit:               ;            C0</span></div>
<div class="line"><span class="lineno"> 2965</span>      <span class="stringliteral">&quot;L%=_nextbit:&quot;</span></div>
<div class="line"><span class="lineno"> 2966</span>      <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//;            C0</span></div>
<div class="line"><span class="lineno"> 2967</span>      <span class="comment">//    str r1, [r3, #0]    ; pin := hi  C2</span></div>
<div class="line"><span class="lineno"> 2968</span>      <span class="stringliteral">&quot;str %[bitmask], [%[reg], #0]&quot;</span></div>
<div class="line"><span class="lineno"> 2969</span>      <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//; pin := hi  C2</span></div>
<div class="line"><span class="lineno"> 2970</span>      <span class="comment">//    tst r6, r0          ;            C3</span></div>
<div class="line"><span class="lineno"> 2971</span>      <span class="stringliteral">&quot;tst %[mask], %[pix]&quot;</span></div>
<div class="line"><span class="lineno"> 2972</span>      <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//          ;            C3</span></div>
<div class="line"><span class="lineno"> 2973</span>      <span class="comment">//    bne .islate         ;            C4</span></div>
<div class="line"><span class="lineno"> 2974</span>      <span class="stringliteral">&quot;bne L%=_islate&quot;</span></div>
<div class="line"><span class="lineno"> 2975</span>      <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//;            C4</span></div>
<div class="line"><span class="lineno"> 2976</span>      <span class="comment">//    str r1, [r2, #0]    ; pin := lo  C6</span></div>
<div class="line"><span class="lineno"> 2977</span>      <span class="stringliteral">&quot;str %[bitmask], [%[reg], #4]&quot;</span></div>
<div class="line"><span class="lineno"> 2978</span>      <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//; pin := lo  C6</span></div>
<div class="line"><span class="lineno"> 2979</span>      <span class="comment">// .islate:</span></div>
<div class="line"><span class="lineno"> 2980</span>      <span class="stringliteral">&quot;L%=_islate:&quot;</span></div>
<div class="line"><span class="lineno"> 2981</span>      <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 2982</span>      <span class="comment">//    lsrs r6, r6, #1     ; r6 &gt;&gt;= 1   C7</span></div>
<div class="line"><span class="lineno"> 2983</span>      <span class="stringliteral">&quot;lsr %[mask], %[mask], #1&quot;</span></div>
<div class="line"><span class="lineno"> 2984</span>      <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//; r6 &gt;&gt;= 1   C7</span></div>
<div class="line"><span class="lineno"> 2985</span>      <span class="comment">//    bne .justbit        ;            C8</span></div>
<div class="line"><span class="lineno"> 2986</span>      <span class="stringliteral">&quot;bne L%=_justbit&quot;</span></div>
<div class="line"><span class="lineno"> 2987</span>      <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//;            C8</span></div>
<div class="line"><span class="lineno"> 2988</span> </div>
<div class="line"><span class="lineno"> 2989</span>      <span class="comment">//    ; not just a bit - need new byte</span></div>
<div class="line"><span class="lineno"> 2990</span>      <span class="comment">//    adds r4, #1         ; r4++       C9</span></div>
<div class="line"><span class="lineno"> 2991</span>      <span class="stringliteral">&quot;add %[p], #1&quot;</span></div>
<div class="line"><span class="lineno"> 2992</span>      <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//; r4++       C9</span></div>
<div class="line"><span class="lineno"> 2993</span>      <span class="comment">//    subs r5, #1         ; r5--       C10</span></div>
<div class="line"><span class="lineno"> 2994</span>      <span class="stringliteral">&quot;sub %[num], #1&quot;</span></div>
<div class="line"><span class="lineno"> 2995</span>      <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//; r5--       C10</span></div>
<div class="line"><span class="lineno"> 2996</span>      <span class="comment">//    bcc .stop           ; if (r5&lt;0) goto .stop  C11</span></div>
<div class="line"><span class="lineno"> 2997</span>      <span class="stringliteral">&quot;bcc L%=_stop&quot;</span></div>
<div class="line"><span class="lineno"> 2998</span>      <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//; if (r5&lt;0) goto .stop  C11</span></div>
<div class="line"><span class="lineno"> 2999</span>      <span class="comment">// .start:</span></div>
<div class="line"><span class="lineno"> 3000</span>      <span class="stringliteral">&quot;L%=_start:&quot;</span></div>
<div class="line"><span class="lineno"> 3001</span>      <span class="comment">//    movs r6, #0x80      ; reset mask C12</span></div>
<div class="line"><span class="lineno"> 3002</span>      <span class="stringliteral">&quot;movs %[mask], #0x80&quot;</span></div>
<div class="line"><span class="lineno"> 3003</span>      <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//; reset mask C12</span></div>
<div class="line"><span class="lineno"> 3004</span>      <span class="comment">//    nop                 ;            C13</span></div>
<div class="line"><span class="lineno"> 3005</span>      <span class="stringliteral">&quot;nop&quot;</span></div>
<div class="line"><span class="lineno"> 3006</span>      <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//;            C13</span></div>
<div class="line"><span class="lineno"> 3007</span> </div>
<div class="line"><span class="lineno"> 3008</span>      <span class="comment">// .common:               ;             C13</span></div>
<div class="line"><span class="lineno"> 3009</span>      <span class="stringliteral">&quot;L%=_common:&quot;</span></div>
<div class="line"><span class="lineno"> 3010</span>      <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//;            C13</span></div>
<div class="line"><span class="lineno"> 3011</span>      <span class="comment">//    str r1, [r2, #0]   ; pin := lo   C15</span></div>
<div class="line"><span class="lineno"> 3012</span>      <span class="stringliteral">&quot;str %[bitmask], [%[reg], #4]&quot;</span></div>
<div class="line"><span class="lineno"> 3013</span>      <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//; pin := lo  C15</span></div>
<div class="line"><span class="lineno"> 3014</span>      <span class="comment">//    ; always re-load byte - it just fits with the cycles better this way</span></div>
<div class="line"><span class="lineno"> 3015</span>      <span class="comment">//    ldrb r0, [r4, #0]  ; r0 := *r4   C17</span></div>
<div class="line"><span class="lineno"> 3016</span>      <span class="stringliteral">&quot;ldrb  %[pix], [%[p], #0]&quot;</span></div>
<div class="line"><span class="lineno"> 3017</span>      <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//; r0 := *r4   C17</span></div>
<div class="line"><span class="lineno"> 3018</span>      <span class="comment">//    b .nextbit         ;             C20</span></div>
<div class="line"><span class="lineno"> 3019</span>      <span class="stringliteral">&quot;b L%=_nextbit&quot;</span></div>
<div class="line"><span class="lineno"> 3020</span>      <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//;             C20</span></div>
<div class="line"><span class="lineno"> 3021</span> </div>
<div class="line"><span class="lineno"> 3022</span>      <span class="comment">// .justbit: ; C10</span></div>
<div class="line"><span class="lineno"> 3023</span>      <span class="stringliteral">&quot;L%=_justbit:&quot;</span></div>
<div class="line"><span class="lineno"> 3024</span>      <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//; C10</span></div>
<div class="line"><span class="lineno"> 3025</span>      <span class="comment">//    ; no nops, branch taken is already 3 cycles</span></div>
<div class="line"><span class="lineno"> 3026</span>      <span class="comment">//    b .common ; C13</span></div>
<div class="line"><span class="lineno"> 3027</span>      <span class="stringliteral">&quot;b L%=_common&quot;</span></div>
<div class="line"><span class="lineno"> 3028</span>      <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//; C13</span></div>
<div class="line"><span class="lineno"> 3029</span> </div>
<div class="line"><span class="lineno"> 3030</span>      <span class="comment">// .stop:</span></div>
<div class="line"><span class="lineno"> 3031</span>      <span class="stringliteral">&quot;L%=_stop:&quot;</span></div>
<div class="line"><span class="lineno"> 3032</span>      <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><span class="lineno"> 3033</span>      <span class="comment">//    str r1, [r2, #0]   ; pin := lo</span></div>
<div class="line"><span class="lineno"> 3034</span>      <span class="stringliteral">&quot;str %[bitmask], [%[reg], #4]&quot;</span></div>
<div class="line"><span class="lineno"> 3035</span>      <span class="stringliteral">&quot;\n\t&quot;</span> <span class="comment">//; pin := lo</span></div>
<div class="line"><span class="lineno"> 3036</span>      <span class="comment">//    cpsie i            ; enable irq</span></div>
<div class="line"><span class="lineno"> 3037</span> </div>
<div class="line"><span class="lineno"> 3038</span>      : [p] <span class="stringliteral">&quot;+r&quot;</span>(p), [pix] <span class="stringliteral">&quot;=&amp;r&quot;</span>(pix), [count] <span class="stringliteral">&quot;=&amp;r&quot;</span>(count), [mask] <span class="stringliteral">&quot;=&amp;r&quot;</span>(mask),</div>
<div class="line"><span class="lineno"> 3039</span>        [num] <span class="stringliteral">&quot;+r&quot;</span>(num)</div>
<div class="line"><span class="lineno"> 3040</span>      : [bitmask] <span class="stringliteral">&quot;r&quot;</span>(bitmask), [reg] <span class="stringliteral">&quot;r&quot;</span>(reg));</div>
<div class="line"><span class="lineno"> 3041</span> </div>
<div class="line"><span class="lineno"> 3042</span><span class="preprocessor">#elif defined(__SAM3X8E__) </span><span class="comment">// Arduino Due</span></div>
<div class="line"><span class="lineno"> 3043</span> </div>
<div class="line"><span class="lineno"> 3044</span><span class="preprocessor">#define SCALE VARIANT_MCK / 2UL / 1000000UL</span></div>
<div class="line"><span class="lineno"> 3045</span><span class="preprocessor">#define INST (2UL * F_CPU / VARIANT_MCK)</span></div>
<div class="line"><span class="lineno"> 3046</span><span class="preprocessor">#define TIME_800_0 ((int)(0.40 * SCALE + 0.5) - (5 * INST))</span></div>
<div class="line"><span class="lineno"> 3047</span><span class="preprocessor">#define TIME_800_1 ((int)(0.80 * SCALE + 0.5) - (5 * INST))</span></div>
<div class="line"><span class="lineno"> 3048</span><span class="preprocessor">#define PERIOD_800 ((int)(1.25 * SCALE + 0.5) - (5 * INST))</span></div>
<div class="line"><span class="lineno"> 3049</span><span class="preprocessor">#define TIME_400_0 ((int)(0.50 * SCALE + 0.5) - (5 * INST))</span></div>
<div class="line"><span class="lineno"> 3050</span><span class="preprocessor">#define TIME_400_1 ((int)(1.20 * SCALE + 0.5) - (5 * INST))</span></div>
<div class="line"><span class="lineno"> 3051</span><span class="preprocessor">#define PERIOD_400 ((int)(2.50 * SCALE + 0.5) - (5 * INST))</span></div>
<div class="line"><span class="lineno"> 3052</span> </div>
<div class="line"><span class="lineno"> 3053</span>  <span class="keywordtype">int</span> pinMask, time0, time1, period, t;</div>
<div class="line"><span class="lineno"> 3054</span>  Pio *port;</div>
<div class="line"><span class="lineno"> 3055</span>  <span class="keyword">volatile</span> WoReg *portSet, *portClear, *timeValue, *timeReset;</div>
<div class="line"><span class="lineno"> 3056</span>  uint8_t *p, *end, pix, mask;</div>
<div class="line"><span class="lineno"> 3057</span> </div>
<div class="line"><span class="lineno"> 3058</span>  pmc_set_writeprotect(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 3059</span>  pmc_enable_periph_clk((uint32_t)TC3_IRQn);</div>
<div class="line"><span class="lineno"> 3060</span>  TC_Configure(TC1, 0,</div>
<div class="line"><span class="lineno"> 3061</span>               TC_CMR_WAVE | TC_CMR_WAVSEL_UP | TC_CMR_TCCLKS_TIMER_CLOCK1);</div>
<div class="line"><span class="lineno"> 3062</span>  TC_Start(TC1, 0);</div>
<div class="line"><span class="lineno"> 3063</span> </div>
<div class="line"><span class="lineno"> 3064</span>  pinMask = g_APinDescription[<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>].ulPin;  <span class="comment">// Don&#39;t &#39;optimize&#39; these into</span></div>
<div class="line"><span class="lineno"> 3065</span>  port = g_APinDescription[<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>].pPort;     <span class="comment">// declarations above. Want to</span></div>
<div class="line"><span class="lineno"> 3066</span>  portSet = &amp;(port-&gt;PIO_SODR);             <span class="comment">// burn a few cycles after</span></div>
<div class="line"><span class="lineno"> 3067</span>  portClear = &amp;(port-&gt;PIO_CODR);           <span class="comment">// starting timer to minimize</span></div>
<div class="line"><span class="lineno"> 3068</span>  timeValue = &amp;(TC1-&gt;TC_CHANNEL[0].TC_CV); <span class="comment">// the initial &#39;while&#39;.</span></div>
<div class="line"><span class="lineno"> 3069</span>  timeReset = &amp;(TC1-&gt;TC_CHANNEL[0].TC_CCR);</div>
<div class="line"><span class="lineno"> 3070</span>  p = <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>;</div>
<div class="line"><span class="lineno"> 3071</span>  end = p + <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>;</div>
<div class="line"><span class="lineno"> 3072</span>  pix = *p++;</div>
<div class="line"><span class="lineno"> 3073</span>  mask = 0x80;</div>
<div class="line"><span class="lineno"> 3074</span> </div>
<div class="line"><span class="lineno"> 3075</span><span class="preprocessor">#if defined(NEO_KHZ400) </span><span class="comment">// 800 KHz check needed only if 400 KHz support enabled</span></div>
<div class="line"><span class="lineno"> 3076</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>) {</div>
<div class="line"><span class="lineno"> 3077</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3078</span>    time0 = TIME_800_0;</div>
<div class="line"><span class="lineno"> 3079</span>    time1 = TIME_800_1;</div>
<div class="line"><span class="lineno"> 3080</span>    period = PERIOD_800;</div>
<div class="line"><span class="lineno"> 3081</span><span class="preprocessor">#if defined(NEO_KHZ400)</span></div>
<div class="line"><span class="lineno"> 3082</span>  } <span class="keywordflow">else</span> { <span class="comment">// 400 KHz bitstream</span></div>
<div class="line"><span class="lineno"> 3083</span>    time0 = TIME_400_0;</div>
<div class="line"><span class="lineno"> 3084</span>    time1 = TIME_400_1;</div>
<div class="line"><span class="lineno"> 3085</span>    period = PERIOD_400;</div>
<div class="line"><span class="lineno"> 3086</span>  }</div>
<div class="line"><span class="lineno"> 3087</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3088</span> </div>
<div class="line"><span class="lineno"> 3089</span>  <span class="keywordflow">for</span> (t = time0;; t = time0) {</div>
<div class="line"><span class="lineno"> 3090</span>    <span class="keywordflow">if</span> (pix &amp; mask)</div>
<div class="line"><span class="lineno"> 3091</span>      t = time1;</div>
<div class="line"><span class="lineno"> 3092</span>    <span class="keywordflow">while</span> (*timeValue &lt; (<span class="keywordtype">unsigned</span>)period)</div>
<div class="line"><span class="lineno"> 3093</span>      ;</div>
<div class="line"><span class="lineno"> 3094</span>    *portSet = pinMask;</div>
<div class="line"><span class="lineno"> 3095</span>    *timeReset = TC_CCR_CLKEN | TC_CCR_SWTRG;</div>
<div class="line"><span class="lineno"> 3096</span>    <span class="keywordflow">while</span> (*timeValue &lt; (<span class="keywordtype">unsigned</span>)t)</div>
<div class="line"><span class="lineno"> 3097</span>      ;</div>
<div class="line"><span class="lineno"> 3098</span>    *portClear = pinMask;</div>
<div class="line"><span class="lineno"> 3099</span>    <span class="keywordflow">if</span> (!(mask &gt;&gt;= 1)) { <span class="comment">// This &#39;inside-out&#39; loop logic utilizes</span></div>
<div class="line"><span class="lineno"> 3100</span>      <span class="keywordflow">if</span> (p &gt;= end)</div>
<div class="line"><span class="lineno"> 3101</span>        <span class="keywordflow">break</span>; <span class="comment">// idle time to minimize inter-byte delays.</span></div>
<div class="line"><span class="lineno"> 3102</span>      pix = *p++;</div>
<div class="line"><span class="lineno"> 3103</span>      mask = 0x80;</div>
<div class="line"><span class="lineno"> 3104</span>    }</div>
<div class="line"><span class="lineno"> 3105</span>  }</div>
<div class="line"><span class="lineno"> 3106</span>  <span class="keywordflow">while</span> (*timeValue &lt; (<span class="keywordtype">unsigned</span>)period)</div>
<div class="line"><span class="lineno"> 3107</span>    ; <span class="comment">// Wait for last bit</span></div>
<div class="line"><span class="lineno"> 3108</span>  TC_Stop(TC1, 0);</div>
<div class="line"><span class="lineno"> 3109</span> </div>
<div class="line"><span class="lineno"> 3110</span> </div>
<div class="line"><span class="lineno"> 3111</span><span class="comment">// RENESAS including Arduino UNO R4 + STM32H7 Arduino Portenta H7 (Dual Core M7+M4) / Arduino Giga R1</span></div>
<div class="line"><span class="lineno"> 3112</span><span class="preprocessor">#elif defined(ARDUINO_ARCH_RENESAS) || defined(ARDUINO_ARCH_RENESAS_UNO) || defined(ARDUINO_ARCH_RENESAS_PORTENTA) || defined(ARDUINO_ARCH_MBED_PORTENTA) || defined(ARDUINO_ARCH_MBED_GIGA)</span></div>
<div class="line"><span class="lineno"> 3113</span> </div>
<div class="line"><span class="lineno"> 3114</span><span class="comment">// Definition for a single channel clockless controller for RA4M1 (Cortex M4)</span></div>
<div class="line"><span class="lineno"> 3115</span><span class="comment">// See clockless.h for detailed info on how the template parameters are used.</span></div>
<div class="line"><span class="lineno"> 3116</span><span class="preprocessor">#define ARM_DEMCR               (*(volatile uint32_t *)0xE000EDFC) </span><span class="comment">// Debug Exception and Monitor Control</span></div>
<div class="line"><span class="lineno"> 3117</span><span class="preprocessor">#define ARM_DEMCR_TRCENA                (1 &lt;&lt; 24)        </span><span class="comment">// Enable debugging &amp; monitoring blocks</span></div>
<div class="line"><span class="lineno"> 3118</span><span class="preprocessor">#define ARM_DWT_CTRL            (*(volatile uint32_t *)0xE0001000) </span><span class="comment">// DWT control register</span></div>
<div class="line"><span class="lineno"> 3119</span><span class="preprocessor">#define ARM_DWT_CTRL_CYCCNTENA          (1 &lt;&lt; 0)                </span><span class="comment">// Enable cycle count</span></div>
<div class="line"><span class="lineno"> 3120</span><span class="preprocessor">#define ARM_DWT_CYCCNT          (*(volatile uint32_t *)0xE0001004) </span><span class="comment">// Cycle count register</span></div>
<div class="line"><span class="lineno"> 3121</span> </div>
<div class="line"><span class="lineno"> 3122</span><span class="preprocessor">#if defined(ARDUINO_PORTENTA_H7_M7) || defined(ARDUINO_GIGA)</span></div>
<div class="line"><span class="lineno"> 3123</span><span class="preprocessor">#define F_CPU 480000000</span></div>
<div class="line"><span class="lineno"> 3124</span><span class="preprocessor">#elif defined(ARDUINO_PORTENTA_H7_M4)</span></div>
<div class="line"><span class="lineno"> 3125</span><span class="preprocessor">#define F_CPU 240000000</span></div>
<div class="line"><span class="lineno"> 3126</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 3127</span><span class="preprocessor">#define F_CPU 48000000</span></div>
<div class="line"><span class="lineno"> 3128</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3129</span><span class="preprocessor">#define CYCLES_800_T0H (F_CPU / 4000000)</span></div>
<div class="line"><span class="lineno"> 3130</span><span class="preprocessor">#define CYCLES_800_T1H (F_CPU / 1250000)</span></div>
<div class="line"><span class="lineno"> 3131</span><span class="preprocessor">#define CYCLES_800 (F_CPU / 800000)</span></div>
<div class="line"><span class="lineno"> 3132</span><span class="preprocessor">#define CYCLES_400_T0H (F_CPU / 2000000)</span></div>
<div class="line"><span class="lineno"> 3133</span><span class="preprocessor">#define CYCLES_400_T1H (F_CPU / 833333)</span></div>
<div class="line"><span class="lineno"> 3134</span><span class="preprocessor">#define CYCLES_400 (F_CPU / 400000)</span></div>
<div class="line"><span class="lineno"> 3135</span> </div>
<div class="line"><span class="lineno"> 3136</span>  uint8_t *p = <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>, *end = p + <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>, pix, mask;</div>
<div class="line"><span class="lineno"> 3137</span> </div>
<div class="line"><span class="lineno"> 3138</span><span class="comment">// --- Platform-specific Pin Setup ---</span></div>
<div class="line"><span class="lineno"> 3139</span><span class="preprocessor">#if defined(ARDUINO_ARCH_MBED_PORTENTA) || defined(ARDUINO_ARCH_MBED_GIGA)</span></div>
<div class="line"><span class="lineno"> 3140</span>  <span class="comment">// Convert the Arduino pin number to an mbed PinName.</span></div>
<div class="line"><span class="lineno"> 3141</span>  mbed::DigitalOut dout(digitalPinToPinName(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>));</div>
<div class="line"><span class="lineno"> 3142</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 3143</span>  bsp_io_port_pin_t io_pin = g_pin_cfg[<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>].pin;</div>
<div class="line"><span class="lineno"> 3144</span>  <span class="comment">// Macro to calculate the port base address for the given pin</span></div>
<div class="line"><span class="lineno"> 3145</span><span class="preprocessor">  #define PIN_IO_PORT_ADDR(pn)      (R_PORT0 + ((uint32_t) (R_PORT1 - R_PORT0) * ((pn) &gt;&gt; 8u)))</span></div>
<div class="line"><span class="lineno"> 3146</span> </div>
<div class="line"><span class="lineno"> 3147</span>  <span class="keyword">volatile</span> uint16_t *set = &amp;(PIN_IO_PORT_ADDR(io_pin)-&gt;POSR);</div>
<div class="line"><span class="lineno"> 3148</span>  <span class="keyword">volatile</span> uint16_t *clr = &amp;(PIN_IO_PORT_ADDR(io_pin)-&gt;PORR);</div>
<div class="line"><span class="lineno"> 3149</span>  uint16_t msk = (1U &lt;&lt; (io_pin &amp; 0xFF));</div>
<div class="line"><span class="lineno"> 3150</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3151</span> </div>
<div class="line"><span class="lineno"> 3152</span>  uint32_t cyc;</div>
<div class="line"><span class="lineno"> 3153</span> </div>
<div class="line"><span class="lineno"> 3154</span>  <span class="comment">// Enable the cycle counter: ARM registers for precise timing.</span></div>
<div class="line"><span class="lineno"> 3155</span>  ARM_DEMCR |= ARM_DEMCR_TRCENA;</div>
<div class="line"><span class="lineno"> 3156</span>  ARM_DWT_CTRL |= ARM_DWT_CTRL_CYCCNTENA;</div>
<div class="line"><span class="lineno"> 3157</span> </div>
<div class="line"><span class="lineno"> 3158</span><span class="preprocessor">#if defined(NEO_KHZ400) </span><span class="comment">// 800 KHz check needed only if 400 KHz support enabled</span></div>
<div class="line"><span class="lineno"> 3159</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>) {</div>
<div class="line"><span class="lineno"> 3160</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3161</span>    cyc = ARM_DWT_CYCCNT + CYCLES_800;</div>
<div class="line"><span class="lineno"> 3162</span>    <span class="keywordflow">while</span> (p &lt; end) {</div>
<div class="line"><span class="lineno"> 3163</span>      pix = *p++;</div>
<div class="line"><span class="lineno"> 3164</span>      <span class="keywordflow">for</span> (mask = 0x80; mask; mask &gt;&gt;= 1) {</div>
<div class="line"><span class="lineno"> 3165</span>        <span class="comment">// Wait until the beginning of the next bit period.</span></div>
<div class="line"><span class="lineno"> 3166</span>        <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_800)</div>
<div class="line"><span class="lineno"> 3167</span>          ;</div>
<div class="line"><span class="lineno"> 3168</span>        cyc = ARM_DWT_CYCCNT;</div>
<div class="line"><span class="lineno"> 3169</span>        <span class="comment">// Set the pin high:</span></div>
<div class="line"><span class="lineno"> 3170</span><span class="preprocessor">#if defined(ARDUINO_ARCH_MBED_PORTENTA) || defined(ARDUINO_ARCH_MBED_GIGA)</span></div>
<div class="line"><span class="lineno"> 3171</span>        dout = 1;</div>
<div class="line"><span class="lineno"> 3172</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 3173</span>        *set = msk;</div>
<div class="line"><span class="lineno"> 3174</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3175</span>        <span class="comment">// Keep the pin high for T1H or T0H depending on the data bit:</span></div>
<div class="line"><span class="lineno"> 3176</span>        <span class="keywordflow">if</span> (pix &amp; mask) {</div>
<div class="line"><span class="lineno"> 3177</span>          <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_800_T1H)</div>
<div class="line"><span class="lineno"> 3178</span>            ;</div>
<div class="line"><span class="lineno"> 3179</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3180</span>          <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_800_T0H)</div>
<div class="line"><span class="lineno"> 3181</span>            ;</div>
<div class="line"><span class="lineno"> 3182</span>        }</div>
<div class="line"><span class="lineno"> 3183</span>        <span class="comment">// Set the pin low:</span></div>
<div class="line"><span class="lineno"> 3184</span><span class="preprocessor">#if defined(ARDUINO_ARCH_MBED_PORTENTA) || defined(ARDUINO_ARCH_MBED_GIGA)</span></div>
<div class="line"><span class="lineno"> 3185</span>        dout = 0;</div>
<div class="line"><span class="lineno"> 3186</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 3187</span>        *clr = msk;</div>
<div class="line"><span class="lineno"> 3188</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3189</span>      }</div>
<div class="line"><span class="lineno"> 3190</span>    }</div>
<div class="line"><span class="lineno"> 3191</span>    <span class="comment">// Ensure the final low state lasts the full period.</span></div>
<div class="line"><span class="lineno"> 3192</span>    <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_800)</div>
<div class="line"><span class="lineno"> 3193</span>      ;</div>
<div class="line"><span class="lineno"> 3194</span><span class="preprocessor">#if defined(NEO_KHZ400)</span></div>
<div class="line"><span class="lineno"> 3195</span>  } <span class="keywordflow">else</span> { <span class="comment">// 400 kHz bitstream</span></div>
<div class="line"><span class="lineno"> 3196</span>    cyc = ARM_DWT_CYCCNT + CYCLES_400;</div>
<div class="line"><span class="lineno"> 3197</span>    <span class="keywordflow">while</span> (p &lt; end) {</div>
<div class="line"><span class="lineno"> 3198</span>      pix = *p++;</div>
<div class="line"><span class="lineno"> 3199</span>      <span class="keywordflow">for</span> (mask = 0x80; mask; mask &gt;&gt;= 1) {</div>
<div class="line"><span class="lineno"> 3200</span>        <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_400)</div>
<div class="line"><span class="lineno"> 3201</span>          ;</div>
<div class="line"><span class="lineno"> 3202</span>        cyc = ARM_DWT_CYCCNT;</div>
<div class="line"><span class="lineno"> 3203</span>        <span class="comment">// Set the pin high:</span></div>
<div class="line"><span class="lineno"> 3204</span><span class="preprocessor">#if defined(ARDUINO_ARCH_MBED_PORTENTA) || defined(ARDUINO_ARCH_MBED_GIGA)</span></div>
<div class="line"><span class="lineno"> 3205</span>        dout = 1;</div>
<div class="line"><span class="lineno"> 3206</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 3207</span>        *set = msk;</div>
<div class="line"><span class="lineno"> 3208</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3209</span>        <span class="keywordflow">if</span> (pix &amp; mask) {</div>
<div class="line"><span class="lineno"> 3210</span>          <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_400_T1H)</div>
<div class="line"><span class="lineno"> 3211</span>            ;</div>
<div class="line"><span class="lineno"> 3212</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3213</span>          <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_400_T0H)</div>
<div class="line"><span class="lineno"> 3214</span>            ;</div>
<div class="line"><span class="lineno"> 3215</span>        }</div>
<div class="line"><span class="lineno"> 3216</span>        <span class="comment">// Set the pin low:</span></div>
<div class="line"><span class="lineno"> 3217</span><span class="preprocessor">#if defined(ARDUINO_ARCH_MBED_PORTENTA) || defined(ARDUINO_ARCH_MBED_GIGA)</span></div>
<div class="line"><span class="lineno"> 3218</span>        dout = 0;</div>
<div class="line"><span class="lineno"> 3219</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 3220</span>        *clr = msk;</div>
<div class="line"><span class="lineno"> 3221</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3222</span>      }</div>
<div class="line"><span class="lineno"> 3223</span>    }</div>
<div class="line"><span class="lineno"> 3224</span>    <span class="comment">// Ensure the final low state lasts the full period.</span></div>
<div class="line"><span class="lineno"> 3225</span>    <span class="keywordflow">while</span> (ARM_DWT_CYCCNT - cyc &lt; CYCLES_400)</div>
<div class="line"><span class="lineno"> 3226</span>      ;</div>
<div class="line"><span class="lineno"> 3227</span>  }</div>
<div class="line"><span class="lineno"> 3228</span><span class="preprocessor">#endif </span><span class="comment">// NEO_KHZ400</span></div>
<div class="line"><span class="lineno"> 3229</span> </div>
<div class="line"><span class="lineno"> 3230</span><span class="preprocessor">#endif </span><span class="comment">// ARM</span></div>
<div class="line"><span class="lineno"> 3231</span> </div>
<div class="line"><span class="lineno"> 3232</span>  <span class="comment">// END ARM ----------------------------------------------------------------</span></div>
<div class="line"><span class="lineno"> 3233</span> </div>
<div class="line"><span class="lineno"> 3234</span><span class="preprocessor">#elif defined(ESP8266) || defined(ESP32)</span></div>
<div class="line"><span class="lineno"> 3235</span> </div>
<div class="line"><span class="lineno"> 3236</span>  <span class="comment">// ESP8266 ----------------------------------------------------------------</span></div>
<div class="line"><span class="lineno"> 3237</span> </div>
<div class="line"><span class="lineno"> 3238</span>  <span class="comment">// ESP8266 show() is external to enforce ICACHE_RAM_ATTR execution</span></div>
<div class="line"><span class="lineno"> 3239</span>  espShow(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>, <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>, <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>, <a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>);</div>
<div class="line"><span class="lineno"> 3240</span> </div>
<div class="line"><span class="lineno"> 3241</span><span class="preprocessor">#elif defined(KENDRYTE_K210)</span></div>
<div class="line"><span class="lineno"> 3242</span> </div>
<div class="line"><span class="lineno"> 3243</span>  k210Show(<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>, <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>, <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>, <a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>);</div>
<div class="line"><span class="lineno"> 3244</span> </div>
<div class="line"><span class="lineno"> 3245</span><span class="preprocessor">#elif defined(__ARDUINO_ARC__)</span></div>
<div class="line"><span class="lineno"> 3246</span> </div>
<div class="line"><span class="lineno"> 3247</span>    <span class="comment">// Arduino 101  -----------------------------------------------------------</span></div>
<div class="line"><span class="lineno"> 3248</span> </div>
<div class="line"><span class="lineno"> 3249</span><span class="preprocessor">#define NOPx7                                                                  \</span></div>
<div class="line"><span class="lineno"> 3250</span><span class="preprocessor">  {                                                                            \</span></div>
<div class="line"><span class="lineno"> 3251</span><span class="preprocessor">    __builtin_arc_nop();                                                       \</span></div>
<div class="line"><span class="lineno"> 3252</span><span class="preprocessor">    __builtin_arc_nop();                                                       \</span></div>
<div class="line"><span class="lineno"> 3253</span><span class="preprocessor">    __builtin_arc_nop();                                                       \</span></div>
<div class="line"><span class="lineno"> 3254</span><span class="preprocessor">    __builtin_arc_nop();                                                       \</span></div>
<div class="line"><span class="lineno"> 3255</span><span class="preprocessor">    __builtin_arc_nop();                                                       \</span></div>
<div class="line"><span class="lineno"> 3256</span><span class="preprocessor">    __builtin_arc_nop();                                                       \</span></div>
<div class="line"><span class="lineno"> 3257</span><span class="preprocessor">    __builtin_arc_nop();                                                       \</span></div>
<div class="line"><span class="lineno"> 3258</span><span class="preprocessor">  }</span></div>
<div class="line"><span class="lineno"> 3259</span> </div>
<div class="line"><span class="lineno"> 3260</span>  PinDescription *pindesc = &amp;g_APinDescription[<a class="code hl_variable" href="#aaa3ce258bc1ded4228bff0277101cdb5">pin</a>];</div>
<div class="line"><span class="lineno"> 3261</span>  <span class="keyword">register</span> uint32_t <a class="code hl_function" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f">loop</a> =</div>
<div class="line"><span class="lineno"> 3262</span>      8 * <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>; <span class="comment">// one loop to handle all bytes and all bits</span></div>
<div class="line"><span class="lineno"> 3263</span>  <span class="keyword">register</span> uint8_t *p = <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>;</div>
<div class="line"><span class="lineno"> 3264</span>  <span class="keyword">register</span> uint32_t currByte = (uint32_t)(*p);</div>
<div class="line"><span class="lineno"> 3265</span>  <span class="keyword">register</span> uint32_t currBit = 0x80 &amp; currByte;</div>
<div class="line"><span class="lineno"> 3266</span>  <span class="keyword">register</span> uint32_t bitCounter = 0;</div>
<div class="line"><span class="lineno"> 3267</span>  <span class="keyword">register</span> uint32_t first = 1;</div>
<div class="line"><span class="lineno"> 3268</span> </div>
<div class="line"><span class="lineno"> 3269</span>  <span class="comment">// The loop is unusual. Very first iteration puts all the way LOW to the wire</span></div>
<div class="line"><span class="lineno"> 3270</span>  <span class="comment">// - constant LOW does not affect NEOPIXEL, so there is no visible effect</span></div>
<div class="line"><span class="lineno"> 3271</span>  <span class="comment">// displayed. During that very first iteration CPU caches instructions in the</span></div>
<div class="line"><span class="lineno"> 3272</span>  <span class="comment">// loop. Because of the caching process, &quot;CPU slows down&quot;. NEOPIXEL pulse is</span></div>
<div class="line"><span class="lineno"> 3273</span>  <span class="comment">// very time sensitive that&#39;s why we let the CPU cache first and we start</span></div>
<div class="line"><span class="lineno"> 3274</span>  <span class="comment">// regular pulse from 2nd iteration</span></div>
<div class="line"><span class="lineno"> 3275</span>  <span class="keywordflow">if</span> (pindesc-&gt;ulGPIOType == SS_GPIO) {</div>
<div class="line"><span class="lineno"> 3276</span>    <span class="keyword">register</span> uint32_t reg = pindesc-&gt;ulGPIOBase + SS_GPIO_SWPORTA_DR;</div>
<div class="line"><span class="lineno"> 3277</span>    uint32_t reg_val = __builtin_arc_lr((<span class="keyword">volatile</span> uint32_t)reg);</div>
<div class="line"><span class="lineno"> 3278</span>    <span class="keyword">register</span> uint32_t reg_bit_high = reg_val | (1 &lt;&lt; pindesc-&gt;ulGPIOId);</div>
<div class="line"><span class="lineno"> 3279</span>    <span class="keyword">register</span> uint32_t reg_bit_low = reg_val &amp; ~(1 &lt;&lt; pindesc-&gt;ulGPIOId);</div>
<div class="line"><span class="lineno"> 3280</span> </div>
<div class="line"><span class="lineno"> 3281</span>    <a class="code hl_function" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f">loop</a> += 1; <span class="comment">// include first, special iteration</span></div>
<div class="line"><span class="lineno"> 3282</span>    <span class="keywordflow">while</span> (<a class="code hl_function" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f">loop</a>--) {</div>
<div class="line"><span class="lineno"> 3283</span>      <span class="keywordflow">if</span> (!first) {</div>
<div class="line"><span class="lineno"> 3284</span>        currByte &lt;&lt;= 1;</div>
<div class="line"><span class="lineno"> 3285</span>        bitCounter++;</div>
<div class="line"><span class="lineno"> 3286</span>      }</div>
<div class="line"><span class="lineno"> 3287</span> </div>
<div class="line"><span class="lineno"> 3288</span>      <span class="comment">// 1 is &gt;550ns high and &gt;450ns low; 0 is 200..500ns high and &gt;450ns low</span></div>
<div class="line"><span class="lineno"> 3289</span>      __builtin_arc_sr(first ? reg_bit_low : reg_bit_high,</div>
<div class="line"><span class="lineno"> 3290</span>                       (<span class="keyword">volatile</span> uint32_t)reg);</div>
<div class="line"><span class="lineno"> 3291</span>      <span class="keywordflow">if</span> (currBit) { <span class="comment">// ~400ns HIGH (740ns overall)</span></div>
<div class="line"><span class="lineno"> 3292</span>        NOPx7 NOPx7</div>
<div class="line"><span class="lineno"> 3293</span>      }</div>
<div class="line"><span class="lineno"> 3294</span>      <span class="comment">// ~340ns HIGH</span></div>
<div class="line"><span class="lineno"> 3295</span>      NOPx7 __builtin_arc_nop();</div>
<div class="line"><span class="lineno"> 3296</span> </div>
<div class="line"><span class="lineno"> 3297</span>      <span class="comment">// 820ns LOW; per spec, max allowed low here is 5000ns */</span></div>
<div class="line"><span class="lineno"> 3298</span>      __builtin_arc_sr(reg_bit_low, (<span class="keyword">volatile</span> uint32_t)reg);</div>
<div class="line"><span class="lineno"> 3299</span>      NOPx7 NOPx7</div>
<div class="line"><span class="lineno"> 3300</span> </div>
<div class="line"><span class="lineno"> 3301</span>          <span class="keywordflow">if</span> (bitCounter &gt;= 8) {</div>
<div class="line"><span class="lineno"> 3302</span>        bitCounter = 0;</div>
<div class="line"><span class="lineno"> 3303</span>        currByte = (uint32_t)(*++p);</div>
<div class="line"><span class="lineno"> 3304</span>      }</div>
<div class="line"><span class="lineno"> 3305</span> </div>
<div class="line"><span class="lineno"> 3306</span>      currBit = 0x80 &amp; currByte;</div>
<div class="line"><span class="lineno"> 3307</span>      first = 0;</div>
<div class="line"><span class="lineno"> 3308</span>    }</div>
<div class="line"><span class="lineno"> 3309</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pindesc-&gt;ulGPIOType == SOC_GPIO) {</div>
<div class="line"><span class="lineno"> 3310</span>    <span class="keyword">register</span> uint32_t reg = pindesc-&gt;ulGPIOBase + SOC_GPIO_SWPORTA_DR;</div>
<div class="line"><span class="lineno"> 3311</span>    uint32_t reg_val = MMIO_REG_VAL(reg);</div>
<div class="line"><span class="lineno"> 3312</span>    <span class="keyword">register</span> uint32_t reg_bit_high = reg_val | (1 &lt;&lt; pindesc-&gt;ulGPIOId);</div>
<div class="line"><span class="lineno"> 3313</span>    <span class="keyword">register</span> uint32_t reg_bit_low = reg_val &amp; ~(1 &lt;&lt; pindesc-&gt;ulGPIOId);</div>
<div class="line"><span class="lineno"> 3314</span> </div>
<div class="line"><span class="lineno"> 3315</span>    <a class="code hl_function" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f">loop</a> += 1; <span class="comment">// include first, special iteration</span></div>
<div class="line"><span class="lineno"> 3316</span>    <span class="keywordflow">while</span> (<a class="code hl_function" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f">loop</a>--) {</div>
<div class="line"><span class="lineno"> 3317</span>      <span class="keywordflow">if</span> (!first) {</div>
<div class="line"><span class="lineno"> 3318</span>        currByte &lt;&lt;= 1;</div>
<div class="line"><span class="lineno"> 3319</span>        bitCounter++;</div>
<div class="line"><span class="lineno"> 3320</span>      }</div>
<div class="line"><span class="lineno"> 3321</span>      MMIO_REG_VAL(reg) = first ? reg_bit_low : reg_bit_high;</div>
<div class="line"><span class="lineno"> 3322</span>      <span class="keywordflow">if</span> (currBit) { <span class="comment">// ~430ns HIGH (740ns overall)</span></div>
<div class="line"><span class="lineno"> 3323</span>        NOPx7 NOPx7 __builtin_arc_nop();</div>
<div class="line"><span class="lineno"> 3324</span>      }</div>
<div class="line"><span class="lineno"> 3325</span>      <span class="comment">// ~310ns HIGH</span></div>
<div class="line"><span class="lineno"> 3326</span>      NOPx7</div>
<div class="line"><span class="lineno"> 3327</span> </div>
<div class="line"><span class="lineno"> 3328</span>          <span class="comment">// 850ns LOW; per spec, max allowed low here is 5000ns */</span></div>
<div class="line"><span class="lineno"> 3329</span>          MMIO_REG_VAL(reg) = reg_bit_low;</div>
<div class="line"><span class="lineno"> 3330</span>      NOPx7 NOPx7</div>
<div class="line"><span class="lineno"> 3331</span> </div>
<div class="line"><span class="lineno"> 3332</span>          <span class="keywordflow">if</span> (bitCounter &gt;= 8) {</div>
<div class="line"><span class="lineno"> 3333</span>        bitCounter = 0;</div>
<div class="line"><span class="lineno"> 3334</span>        currByte = (uint32_t)(*++p);</div>
<div class="line"><span class="lineno"> 3335</span>      }</div>
<div class="line"><span class="lineno"> 3336</span> </div>
<div class="line"><span class="lineno"> 3337</span>      currBit = 0x80 &amp; currByte;</div>
<div class="line"><span class="lineno"> 3338</span>      first = 0;</div>
<div class="line"><span class="lineno"> 3339</span>    }</div>
<div class="line"><span class="lineno"> 3340</span>  }</div>
<div class="line"><span class="lineno"> 3341</span> </div>
<div class="line"><span class="lineno"> 3342</span><span class="preprocessor">#elif defined(ARDUINO_ARCH_CH32)</span></div>
<div class="line"><span class="lineno"> 3343</span>  ch32Show(gpioPort, gpioPin, <a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>, <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>, <a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a>);</div>
<div class="line"><span class="lineno"> 3344</span><span class="preprocessor">#elif defined(ARDUINO_ARCH_RP2040) &amp;&amp; defined(__riscv)</span></div>
<div class="line"><span class="lineno"> 3345</span>  rp2040Show(<a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>, <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>);  <span class="comment">// Use PIO</span></div>
<div class="line"><span class="lineno"> 3346</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 3347</span><span class="preprocessor">#error Architecture not supported</span></div>
<div class="line"><span class="lineno"> 3348</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3349</span> </div>
<div class="line"><span class="lineno"> 3350</span>  <span class="comment">// END ARCHITECTURE SELECT ------------------------------------------------</span></div>
<div class="line"><span class="lineno"> 3351</span> </div>
<div class="line"><span class="lineno"> 3352</span><span class="preprocessor">#if !(defined(NRF52) || defined(NRF52_SERIES) || defined(ESP32))</span></div>
<div class="line"><span class="lineno"> 3353</span>  interrupts();</div>
<div class="line"><span class="lineno"> 3354</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3355</span> </div>
<div class="line"><span class="lineno"> 3356</span>  <a class="code hl_variable" href="#a1774fd792c71e961624594e0c29e4541">endTime</a> = micros(); <span class="comment">// Save EOD time for latch on next call</span></div>
<div class="line"><span class="lineno"> 3357</span>}</div>
<div class="ttc" id="aclass_adafruit___neo_pixel_html_a9e900a60b0ac2b43b99309bb118b929e"><div class="ttname"><a href="#a9e900a60b0ac2b43b99309bb118b929e">Adafruit_NeoPixel::canShow</a></div><div class="ttdeci">bool canShow(void)</div><div class="ttdoc">Check whether a call to show() will start sending data immediately or will &#39;block&#39; for a required int...</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8h_source.html#l00257">Adafruit_NeoPixel.h:257</a></div></div>
<div class="ttc" id="amain_8cpp_html_afe461d27b9c48d5921c00d521181f12f"><div class="ttname"><a href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f">loop</a></div><div class="ttdeci">void loop()</div><div class="ttdoc">Arduino Main Loop.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00040">main.cpp:40</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00257">canShow()</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00410">endTime</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00397">is800KHz</a>, <a class="el" href="main_8cpp_source.html#l00040">loop()</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00402">numBytes</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00403">pin</a>, and <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00405">pixels</a>.</p>

<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00099">~Adafruit_NeoPixel()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_adafruit___neo_pixel_a4bcda7a15591065570d3598cbf970be7_cgraph.png" border="0" usemap="#aclass_adafruit___neo_pixel_a4bcda7a15591065570d3598cbf970be7_cgraph" loading="lazy" alt=""/></div>
<map name="aclass_adafruit___neo_pixel_a4bcda7a15591065570d3598cbf970be7_cgraph" id="aclass_adafruit___neo_pixel_a4bcda7a15591065570d3598cbf970be7_cgraph">
<area shape="rect" title="将RAM中的像素数据传输到NeoPixels。" alt="" coords="5,903,171,930"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#a9e900a60b0ac2b43b99309bb118b929e" title="Check whether a call to show() will start sending data immediately or will &#39;block&#39; for a required int..." alt="" coords="219,866,353,908"/>
<area shape="poly" title=" " alt="" coords="169,902,206,897,202,901,173,906"/>
<area shape="rect" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f" title="Arduino Main Loop." alt="" coords="263,932,308,959"/>
<area shape="poly" title=" " alt="" coords="170,926,250,938,245,942,172,931"/>
<area shape="rect" href="namespace_command_router.html#a96ff3718682e9322a64815a3d41d001b" title="Main execution loop for the Router." alt="" coords="401,730,553,756"/>
<area shape="poly" title=" " alt="" coords="307,939,330,930,351,918,388,883,419,843,462,772,465,768,423,845,392,886,355,922,332,935,311,943"/>
<area shape="rect" href="namespace_control_logic.html#adc8c269923e0c76c6d104a005833a7f9" title="Main Control Loop." alt="" coords="654,1135,780,1162"/>
<area shape="poly" title=" " alt="" coords="309,953,675,1126,671,1129,309,959"/>
<area shape="rect" href="namespace_hardware.html#ad269fd29299dd87118b408e4551f4d2d" title="Millisecond Delay." alt="" coords="647,562,787,588"/>
<area shape="poly" title=" " alt="" coords="484,727,527,664,561,628,600,598,635,585,631,588,603,603,564,632,531,668,488,730"/>
<area shape="rect" href="namespace_control_logic.html#a300e5b18ebf53c086955bf02dfe16faa" title="Get current Boot Mode." alt="" coords="626,612,808,639"/>
<area shape="poly" title=" " alt="" coords="491,727,537,688,567,666,600,648,621,642,617,646,602,653,570,671,540,692,495,731"/>
<area shape="rect" href="namespace_hardware.html#a8ea28b07408691bc126683a81aa220f3" title="Get System Time in Milliseconds." alt="" coords="1456,882,1591,908"/>
<area shape="poly" title=" " alt="" coords="539,754,602,766,719,780,819,788,991,793,1073,796,1161,802,1261,816,1377,839,1430,854,1480,875,1475,875,1429,860,1376,844,1260,821,1161,808,1073,801,991,798,819,793,719,786,601,771,540,759"/>
<area shape="rect" href="class_bambu_bus_protocol.html#addece07a1980f5f561e151fd4a09b9ea" title="Map internal BambuBus package types to a unified command type." alt="" coords="601,730,833,756"/>
<area shape="poly" title=" " alt="" coords="552,740,588,742,583,744,555,745"/>
<area shape="rect" href="class_bambu_bus_protocol.html#a81deddd553eeb25fa96580079d7c9bd0" title="Identify the type of BambuBus packet." alt="" coords="625,663,809,706"/>
<area shape="poly" title=" " alt="" coords="533,727,614,708,610,711,536,731"/>
<area shape="rect" href="namespace_command_router.html#a329f0a7e2f53debf5c7cb5f47579151b" title="Route an incoming command to its specific handler." alt="" coords="635,831,799,858"/>
<area shape="poly" title=" " alt="" coords="499,754,547,782,602,810,644,826,638,827,600,815,544,787,500,759"/>
<area shape="rect" href="namespace_control_logic.html#a9716be5fe9da72481bee41a80681d8e5" title="Update connectivity status (Online/Offline)." alt="" coords="884,831,1101,858"/>
<area shape="poly" title=" " alt="" coords="487,754,506,781,531,813,564,844,602,867,645,881,690,889,736,892,782,890,867,877,939,861,934,864,868,883,782,895,736,897,690,894,644,886,600,872,561,848,528,817,502,784,486,759"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#afe96c8a3898aa7a50f68ab6d726860c3" title="Main Execution Loop." alt="" coords="660,440,774,467"/>
<area shape="poly" title=" " alt="" coords="483,728,527,648,561,597,599,548,641,507,685,474,682,478,644,511,603,551,565,600,532,651,488,731"/>
<area shape="rect" href="time64_8cpp.html#a146d483f58902ba0184ce16f728edfb0" title="Get 64&#45;bit System Time in Milliseconds." alt="" coords="1718,882,1803,908"/>
<area shape="poly" title=" " alt="" coords="1591,892,1705,894,1699,895,1592,898"/>
<area shape="rect" href="class_bambu_bus_protocol.html#a8b674c03ab157fa7e70fc2f6e271d539" title="Verify the CRC16 for a complete packet." alt="" coords="881,663,1104,690"/>
<area shape="poly" title=" " alt="" coords="809,679,868,679,863,681,810,684"/>
<area shape="rect" href="class_bambu_bus_protocol.html#ad0e11ad5c710644e9f1ee2fb4f15a3b9" title="Extract data from a &quot;Long Packet&quot; (0x05 type)." alt="" coords="1162,647,1366,690"/>
<area shape="poly" title=" " alt="" coords="808,660,880,648,949,644,1019,644,1150,653,1145,655,1019,649,949,649,881,654,810,665"/>
<area shape="rect" href="namespace_command_router.html#a1d2e53549b25a63274ad073b375e5f21" title="wrapper to handle Long Packets by parsing and dispatching." alt="" coords="894,714,1091,756"/>
<area shape="poly" title=" " alt="" coords="752,828,925,761,920,764,754,833"/>
<area shape="poly" title=" " alt="" coords="798,842,870,843,865,845,800,847"/>
<area shape="poly" title=" " alt="" coords="1081,711,1162,693,1157,695,1083,715"/>
<area shape="rect" href="namespace_control_logic.html#a1ff0bcee8062346fb963e4dd845c8bdf" title="Handler/Dispatcher for Long Packets." alt="" coords="1175,714,1353,756"/>
<area shape="poly" title=" " alt="" coords="1091,732,1162,734,1157,736,1092,737"/>
<area shape="poly" title=" " alt="" coords="1101,846,1233,854,1377,867,1443,879,1438,879,1376,872,1233,859,1102,851"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a6089e6db2e7edddf19fdf095b9826c88" title="Parse and Dispatch a JSON Packet." alt="" coords="903,368,1082,395"/>
<area shape="poly" title=" " alt="" coords="770,437,926,398,921,401,772,442"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#afeb304003d4b85010afd5e183e1bbf16" title="Handler for GET_FILAMENT_INFO command." alt="" coords="1152,242,1376,268"/>
<area shape="poly" title=" " alt="" coords="1009,366,1069,322,1109,298,1151,278,1174,272,1169,275,1153,283,1112,303,1072,327,1012,370"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#ad0e99d2fdcfd1c0690f850816ac1f67c" title="Helper to send an Error response." alt="" coords="1449,444,1598,471"/>
<area shape="poly" title=" " alt="" coords="1082,390,1377,430,1436,441,1431,442,1376,435,1083,395"/>
<area shape="rect" href="namespace_hardware.html#ad3ec7cad074d6d73508844a06a7bea50" title="Send a buffer via UART1." alt="" coords="1898,276,2056,303"/>
<area shape="poly" title=" " alt="" coords="995,367,1010,316,1040,245,1060,207,1086,170,1116,137,1151,110,1245,57,1334,22,1418,5,1459,3,1500,4,1583,19,1667,48,1756,91,1851,146,1886,172,1917,203,1962,264,1957,263,1913,207,1883,176,1849,150,1754,96,1665,53,1581,24,1500,10,1459,8,1419,10,1335,28,1248,62,1153,114,1119,141,1090,174,1065,210,1044,247,1015,318,999,369"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#ae13dcd8cc2528c12d0a241046fcc304e" title="Handler for GET_SENSORS command." alt="" coords="1164,175,1364,202"/>
<area shape="poly" title=" " alt="" coords="1003,366,1061,301,1104,262,1151,227,1201,206,1196,209,1153,232,1107,266,1065,305,1006,370"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a12cef4b97fbfa7cfb7bdb1540e626ae9" title="Handler for MOVE command." alt="" coords="1182,292,1346,319"/>
<area shape="poly" title=" " alt="" coords="1032,365,1151,328,1185,322,1181,324,1153,333,1035,370"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a81f1646e6adb42482d4109a33b9bb9c5" title="Handler for PING command." alt="" coords="1186,596,1343,623"/>
<area shape="poly" title=" " alt="" coords="1001,393,1023,432,1056,484,1100,537,1126,561,1153,582,1174,594,1168,594,1151,587,1122,565,1096,541,1052,487,1018,435,1000,398"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a685b6d688593b458b5edafda4adfd4d4" title="Handler for SELECT_LANE command." alt="" coords="1166,495,1362,522"/>
<area shape="poly" title=" " alt="" coords="1011,393,1072,436,1112,460,1153,480,1174,490,1169,490,1151,485,1109,465,1069,441,1011,398"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a31ef4dae129916b85fdd8d1612553c77" title="Handler for SET_AUTO_FEED command." alt="" coords="1160,444,1368,471"/>
<area shape="poly" title=" " alt="" coords="1043,393,1202,439,1197,440,1043,398"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a76547f35e246989843f1870c760ea514" title="Handler for SET_FILAMENT_INFO command." alt="" coords="1152,343,1376,370"/>
<area shape="poly" title=" " alt="" coords="1081,371,1139,367,1134,369,1084,376"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a8f239072c1896e64e9f6075edaaea515" title="Handler for STATUS command." alt="" coords="1180,124,1349,151"/>
<area shape="poly" title=" " alt="" coords="997,366,1017,325,1049,269,1094,210,1121,184,1151,161,1167,154,1163,157,1153,165,1124,188,1098,214,1054,272,1021,328,1002,369"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a5bc1dda1e0b24dccb6fdc1c475930c88" title="Handler for STOP command." alt="" coords="1185,546,1343,572"/>
<area shape="poly" title=" " alt="" coords="1004,393,1063,460,1106,499,1153,531,1173,542,1168,542,1151,536,1102,503,1060,464,1004,398"/>
<area shape="rect" href="class_unit_state.html#a221a5d98d4e870c593e5bd5ee6621c4c" title="Get the configuration specific to a filament index." alt="" coords="1446,226,1601,252"/>
<area shape="poly" title=" " alt="" coords="1376,245,1433,244,1428,246,1378,250"/>
<area shape="poly" title=" " alt="" coords="1360,266,1378,278,1394,297,1401,317,1403,356,1405,394,1412,412,1426,430,1438,441,1433,441,1422,434,1407,415,1400,395,1398,356,1396,318,1389,300,1375,282,1360,271"/>
<area shape="poly" title=" " alt="" coords="1376,259,1424,262,1885,285,1880,287,1424,267,1377,264"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a9ec392d53485800126189969c2c4981a" title="Serialize and send a JSON response." alt="" coords="1671,444,1850,471"/>
<area shape="poly" title=" " alt="" coords="1598,455,1658,457,1652,458,1599,460"/>
<area shape="poly" title=" " alt="" coords="1778,442,1944,314,1949,311,1781,446"/>
<area shape="rect" href="namespace_hardware.html#a0ada30189b8e1d1dbec145140849b778" title="Microsecond Delay." alt="" coords="2338,276,2476,303"/>
<area shape="poly" title=" " alt="" coords="2056,287,2324,289,2319,290,2057,292"/>
<area shape="rect" href="namespace_hardware.html#aaaf02ef3df5811e2ba28dd009eadfaae" title="Send a single byte blocking." alt="" coords="2104,302,2290,328"/>
<area shape="poly" title=" " alt="" coords="2056,296,2091,302,2086,303,2057,301"/>
<area shape="poly" title=" " alt="" coords="2289,301,2325,299,2320,300,2291,306"/>
<area shape="poly" title=" " alt="" coords="1338,172,1404,166,1478,167,1554,180,1590,193,1624,211,1652,233,1676,259,1714,319,1740,379,1755,430,1750,428,1735,381,1710,322,1672,263,1649,237,1621,216,1588,198,1552,186,1477,172,1404,171,1340,177"/>
<area shape="rect" href="namespace_control_logic.html#a4428a845041ff986ccbf2555a62d0656" title="Get a bitmask of sensor states." alt="" coords="1426,124,1621,151"/>
<area shape="poly" title=" " alt="" coords="1335,172,1439,153,1435,156,1337,177"/>
<area shape="poly" title=" " alt="" coords="1346,312,1378,329,1390,341,1397,355,1403,381,1409,406,1415,418,1426,430,1438,440,1432,440,1423,434,1411,422,1404,408,1398,382,1392,356,1386,344,1375,333,1347,318"/>
<area shape="rect" href="class_unit_state.html#a4833e917e0069069c7f455a24e28a516" title="Get the currently active filament index." alt="" coords="1424,327,1623,370"/>
<area shape="poly" title=" " alt="" coords="1346,316,1411,329,1406,330,1347,322"/>
<area shape="rect" href="namespace_control_logic.html#a484eadc314267f8bc9aa0f025c1137d9" title="Manually move an axis (Klipper Primitive)." alt="" coords="1443,394,1604,420"/>
<area shape="poly" title=" " alt="" coords="1346,315,1378,329,1393,341,1403,355,1411,367,1426,379,1438,387,1433,387,1423,384,1407,371,1398,358,1389,345,1375,333,1347,321"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a1d7d7986d99cb52ab4feb4826ffc4428" title="Helper to send a Success (OK) response." alt="" coords="1455,495,1592,522"/>
<area shape="poly" title=" " alt="" coords="1346,311,1378,329,1394,348,1401,367,1403,406,1405,445,1412,463,1426,481,1443,494,1438,494,1423,485,1407,466,1400,446,1398,407,1396,369,1389,351,1375,333,1346,316"/>
<area shape="poly" title=" " alt="" coords="1589,492,1682,474,1677,476,1590,497"/>
<area shape="poly" title=" " alt="" coords="1343,616,1378,633,1406,658,1432,687,1472,751,1500,815,1517,867,1512,865,1495,817,1467,754,1427,690,1403,662,1375,637,1343,621"/>
<area shape="poly" title=" " alt="" coords="1343,593,1497,563,1570,546,1622,531,1677,505,1724,481,1728,478,1679,510,1624,536,1571,552,1498,568,1344,598"/>
<area shape="rect" href="class_unit_state.html#a745286b33e7a2805f9045e22fc0a49ac" title=" " alt="" coords="1449,596,1598,623"/>
<area shape="poly" title=" " alt="" coords="1343,607,1436,609,1431,610,1344,612"/>
<area shape="poly" title=" " alt="" coords="1335,492,1439,473,1434,475,1337,497"/>
<area shape="poly" title=" " alt="" coords="1362,506,1442,507,1437,509,1364,511"/>
<area shape="poly" title=" " alt="" coords="1368,455,1436,457,1431,458,1369,460"/>
<area shape="poly" title=" " alt="" coords="1336,469,1442,491,1437,492,1337,474"/>
<area shape="poly" title=" " alt="" coords="1341,340,1375,328,1439,295,1495,260,1491,263,1441,300,1377,333,1344,345"/>
<area shape="poly" title=" " alt="" coords="1332,368,1378,386,1393,397,1402,409,1411,420,1426,430,1440,438,1434,438,1423,435,1408,423,1398,412,1389,401,1375,391,1333,373"/>
<area shape="poly" title=" " alt="" coords="1289,367,1332,395,1378,430,1401,458,1411,469,1426,481,1443,491,1438,491,1423,485,1407,473,1397,461,1374,434,1329,400,1289,373"/>
<area shape="poly" title=" " alt="" coords="1338,149,1377,160,1437,187,1489,217,1484,217,1434,192,1375,165,1339,154"/>
<area shape="poly" title=" " alt="" coords="1319,121,1382,109,1458,100,1541,99,1583,102,1623,110,1671,123,1719,141,1810,183,1888,228,1947,267,1941,267,1885,232,1808,188,1717,146,1670,128,1622,115,1582,108,1541,104,1459,105,1383,114,1321,126"/>
<area shape="poly" title=" " alt="" coords="1348,135,1413,137,1408,139,1350,140"/>
<area shape="poly" title=" " alt="" coords="1335,542,1442,524,1437,526,1337,547"/>
<area shape="poly" title=" " alt="" coords="780,1138,919,1119,1092,1091,1258,1057,1326,1038,1375,1019,1412,997,1446,970,1499,921,1503,919,1450,974,1415,1001,1377,1024,1327,1043,1260,1062,1093,1096,920,1124,781,1143"/>
<area shape="rect" href="namespace_control_logic.html#aa3d38299372c0822e90d6e649344e8ad" title="Update Odometer and Speed from AS5600 sensors." alt="" coords="918,1354,1066,1396"/>
<area shape="poly" title=" " alt="" coords="727,1159,750,1196,785,1245,829,1296,882,1339,906,1354,901,1353,879,1344,826,1299,780,1248,746,1199,725,1164"/>
<area shape="rect" href="namespace_hardware.html#a44347f62b4ee1789ecfed67b195572e4" title="Set Color of a specific LED." alt="" coords="1180,1151,1349,1178"/>
<area shape="poly" title=" " alt="" coords="781,1147,1166,1161,1161,1162,781,1153"/>
<area shape="rect" href="namespace_hardware.html#a365d946e0cf0fe8cfc8dbcb25cfbdad9" title="Update LED Hardware." alt="" coords="917,1252,1068,1279"/>
<area shape="poly" title=" " alt="" coords="739,1160,802,1198,882,1238,905,1248,900,1247,880,1243,799,1203,738,1165"/>
<area shape="rect" href="namespace_control_logic.html#ab1b5b19d84cdbba6ef3ad97fba14ce13" title="Read Analog Sensors and Update State." alt="" coords="911,916,1074,959"/>
<area shape="poly" title=" " alt="" coords="731,1132,793,1074,879,1003,937,968,942,966,882,1008,797,1078,734,1137"/>
<area shape="rect" href="namespace_control_logic.html#ac2d890c891494072159ebc2b30490197" title="State Machine for BambuBus Logic." alt="" coords="925,1018,1060,1060"/>
<area shape="poly" title=" " alt="" coords="748,1132,880,1076,912,1067,917,1065,882,1081,750,1137"/>
<area shape="rect" href="namespace_control_logic.html#acb78560c64e5ea050853ab319a03f14e" title="Check if pullback is required (Smart Pullback Logic)." alt="" coords="909,1186,1076,1228"/>
<area shape="poly" title=" " alt="" coords="781,1159,897,1186,891,1186,781,1164"/>
<area shape="rect" href="namespace_control_logic.html#a175e5057d122e1fee05a99bb0e40bbf3" title="Commit settings to Flash memory." alt="" coords="902,1303,1082,1330"/>
<area shape="poly" title=" " alt="" coords="731,1160,792,1223,834,1258,882,1289,898,1298,892,1297,879,1293,831,1263,788,1227,729,1165"/>
<area shape="rect" href="_hardware_8cpp.html#a766f13b53e03456789fd4fe8e009e157" title=" " alt="" coords="1484,1210,1563,1236"/>
<area shape="poly" title=" " alt="" coords="1326,1175,1471,1211,1466,1211,1326,1181"/>
<area shape="poly" title=" " alt="" coords="1068,1257,1471,1227,1466,1228,1069,1262"/>
<area shape="rect" href="namespace_hardware.html#aa54da804a3d4c6d89ba5d7a2931fc463" title="Get filtered ADC voltage values." alt="" coords="1174,882,1355,908"/>
<area shape="poly" title=" " alt="" coords="1074,922,1162,910,1157,912,1075,927"/>
<area shape="poly" title=" " alt="" coords="1037,1014,1091,991,1151,968,1281,938,1443,909,1438,910,1282,943,1153,973,1093,996,1039,1019"/>
<area shape="poly" title=" " alt="" coords="1060,1051,1132,1063,1222,1074,1325,1080,1435,1077,1548,1063,1604,1051,1658,1035,1710,1013,1760,987,1806,956,1848,918,1863,899,1877,873,1902,804,1923,720,1939,628,1961,447,1973,320,1976,316,1967,447,1944,629,1928,721,1907,806,1882,875,1868,902,1852,922,1809,960,1763,992,1713,1018,1660,1040,1605,1056,1549,1069,1436,1083,1325,1085,1222,1079,1132,1068,1061,1056"/>
<area shape="poly" title=" " alt="" coords="1041,1058,1222,1144,1217,1144,1040,1063"/>
<area shape="rect" href="namespace_control_logic.html#a4ddc46100d9f991cb0d171e62707ee7c" title=" " alt="" coords="1181,983,1347,1010"/>
<area shape="poly" title=" " alt="" coords="1060,1026,1168,1011,1163,1012,1061,1031"/>
<area shape="poly" title=" " alt="" coords="1319,980,1375,962,1480,917,1485,915,1377,967,1321,985"/>
<area shape="poly" title=" " alt="" coords="1075,1191,1167,1179,1162,1180,1076,1196"/>
<area shape="rect" href="_flash__saves_8cpp.html#ae5951341b70b0da0d768d418bfcb76ce" title="Save a buffer to Flash Memory." alt="" coords="1216,1303,1312,1330"/>
<area shape="poly" title=" " alt="" coords="1083,1314,1204,1316,1199,1316,1083,1319"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_adafruit___neo_pixel_a4bcda7a15591065570d3598cbf970be7_icgraph.png" border="0" usemap="#aclass_adafruit___neo_pixel_a4bcda7a15591065570d3598cbf970be7_icgraph" loading="lazy" alt=""/></div>
<map name="aclass_adafruit___neo_pixel_a4bcda7a15591065570d3598cbf970be7_icgraph" id="aclass_adafruit___neo_pixel_a4bcda7a15591065570d3598cbf970be7_icgraph">
<area shape="rect" title="将RAM中的像素数据传输到NeoPixels。" alt="" coords="188,13,353,40"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#a61b1bd003a291520a367ab1712d6265c" title="释放Adafruit_NeoPixel对象，将数据引脚恢复为输入模式。" alt="" coords="5,5,140,48"/>
<area shape="poly" title=" " alt="" coords="170,27,140,29,140,24,175,26"/>
</map>
</div>

</div>
</div>
<a id="afb00024000da81bcb6378c7052f77be3" name="afb00024000da81bcb6378c7052f77be3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb00024000da81bcb6378c7052f77be3">&#9670;&#160;</a></span>sine8()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t Adafruit_NeoPixel::sine8 </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>x</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>An 8-bit integer sine wave function, not directly compatible with standard trigonometric units like radians or degrees. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Input angle, 0-255; 256 would loop back to zero, completing the circle (equivalent to 360 degrees or 2 pi radians). One can therefore use an unsigned 8-bit variable and simply add or subtract, allowing it to overflow/underflow and it still does the expected contiguous thing. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Sine result, 0 to 255, or -128 to +127 if type-converted to a signed int8_t, but you'll most likely want unsigned as this output is often used for pixel brightness in animation effects. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00318">318</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  318</span>                                  {</div>
<div class="line"><span class="lineno">  319</span>    <span class="keywordflow">return</span> pgm_read_byte(&amp;<a class="code hl_variable" href="_adafruit___neo_pixel_8h.html#ab277b1f27669e9f42a49587fe0063c96">_NeoPixelSineTable</a>[x]); <span class="comment">// 0-255 in, 0-255 out</span></div>
<div class="line"><span class="lineno">  320</span>  }</div>
<div class="ttc" id="a_adafruit___neo_pixel_8h_html_ab277b1f27669e9f42a49587fe0063c96"><div class="ttname"><a href="_adafruit___neo_pixel_8h.html#ab277b1f27669e9f42a49587fe0063c96">_NeoPixelSineTable</a></div><div class="ttdeci">static const uint8_t PROGMEM _NeoPixelSineTable[256]</div><div class="ttdef"><b>Definition</b> <a href="_adafruit___neo_pixel_8h_source.html#l00163">Adafruit_NeoPixel.h:163</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00163">_NeoPixelSineTable</a>.</p>

</div>
</div>
<a id="a5cec6fe17e75f8d607df305e2fa9db5c" name="a5cec6fe17e75f8d607df305e2fa9db5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cec6fe17e75f8d607df305e2fa9db5c">&#9670;&#160;</a></span>str2order()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_adafruit___neo_pixel_8h.html#ab88a50d51bb5488df4379ff49c81fd72">neoPixelType</a> Adafruit_NeoPixel::str2order </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>v</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>将像素颜色顺序从字符串（例如“BGR”）转换为NeoPixel格式 颜色顺序常量（例如 NEO_BGR）。这可能对代码有所帮助 从文本配置进行初始化，而非编译时初始化 常数。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td>输入字符串。应进行合理净化（3位或4位） （以字符NUL结尾的字符串）或可能产生未定义行为 结果（输出仍然是一个有效的NeoPixel指令常量，但 （结果）可能不会如预期呈现。输入垃圾，输出垃圾。 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>返回一个NeoPixel颜色顺序常量（例如NEO_BGR）。 NEO_KHZ400或NEO_KHZ800位既未包含在内，也不需要（全部 经发现，NeoPixels实际上支持800 KHz，这就是 （若未设置KHZ位，则为默认状态）。 </dd></dl>
<dl class="section note"><dt>Note</dt><dd>此函数在类中被声明为静态，因此可以调用它 没有NeoPixel对象（因为它不太可能被声明） （尚未在代码中实现）。请使用Adafruit_NeoPixel::str2order()函数。 </dd></dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03797">3797</a> of file <a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3797</span>                                                       {</div>
<div class="line"><span class="lineno"> 3798</span>  int8_t r = 0, g = 0, b = 0, w = -1;</div>
<div class="line"><span class="lineno"> 3799</span>  <span class="keywordflow">if</span> (v) {</div>
<div class="line"><span class="lineno"> 3800</span>    <span class="keywordtype">char</span> c;</div>
<div class="line"><span class="lineno"> 3801</span>    <span class="keywordflow">for</span> (uint8_t i=0; ((c = tolower(v[i]))); i++) {</div>
<div class="line"><span class="lineno"> 3802</span>      <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;r&#39;</span>) r = i;</div>
<div class="line"><span class="lineno"> 3803</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;g&#39;</span>) g = i;</div>
<div class="line"><span class="lineno"> 3804</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;b&#39;</span>) b = i;</div>
<div class="line"><span class="lineno"> 3805</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;w&#39;</span>) w = i;</div>
<div class="line"><span class="lineno"> 3806</span>    }</div>
<div class="line"><span class="lineno"> 3807</span>    r &amp;= 3;</div>
<div class="line"><span class="lineno"> 3808</span>  }</div>
<div class="line"><span class="lineno"> 3809</span>  <span class="keywordflow">if</span> (w &lt; 0) w = r; <span class="comment">// If &#39;w&#39; not specified, duplicate r bits</span></div>
<div class="line"><span class="lineno"> 3810</span>  <span class="keywordflow">return</span> (w &lt;&lt; 6) | (r &lt;&lt; 4) | ((g &amp; 3) &lt;&lt; 2) | (b &amp; 3);</div>
<div class="line"><span class="lineno"> 3811</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a74e917093c2eb16848c4a09427680f79" name="a74e917093c2eb16848c4a09427680f79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74e917093c2eb16848c4a09427680f79">&#9670;&#160;</a></span>updateLength()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Adafruit_NeoPixel::updateLength </td>
          <td>(</td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>n</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>更改已声明的Adafruit_NeoPixel灯带对象的长度。旧数据会被释放，新数据会被清空。 引脚号和像素格式不变。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n</td><td>灯带的新长度（像素数） </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>此函数已弃用，仅为兼容旧项目。新项目应使用第一个构造函数语法（长度、引脚、类型）。 </dd></dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00153">153</a> of file <a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  153</span>                                               {</div>
<div class="line"><span class="lineno">  154</span>  free(<a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>); <span class="comment">// Free existing data (if any)</span></div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>  <span class="comment">// Allocate new data -- note: ALL PIXELS ARE CLEARED</span></div>
<div class="line"><span class="lineno">  157</span>  <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a> = n * ((<a class="code hl_variable" href="#abb82afb6bb4c4e365561f18c6ff6b6a8">wOffset</a> == <a class="code hl_variable" href="#a8275f74399aea225b25aed014d740c99">rOffset</a>) ? 3 : 4);</div>
<div class="line"><span class="lineno">  158</span>  <span class="keywordflow">if</span> ((<a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a> = (uint8_t *)malloc(<a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>))) {</div>
<div class="line"><span class="lineno">  159</span>    memset(<a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>, 0, <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a>);</div>
<div class="line"><span class="lineno">  160</span>    <a class="code hl_variable" href="#ad8218520ee2ad574f805985ea2c2b0b6">numLEDs</a> = n;</div>
<div class="line"><span class="lineno">  161</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  162</span>    <a class="code hl_variable" href="#ad8218520ee2ad574f805985ea2c2b0b6">numLEDs</a> = <a class="code hl_variable" href="#a89a4a144941744dc01c6e0072ad0f05d">numBytes</a> = 0;</div>
<div class="line"><span class="lineno">  163</span>  }</div>
<div class="line"><span class="lineno">  164</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00402">numBytes</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00401">numLEDs</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00405">pixels</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00406">rOffset</a>, and <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00409">wOffset</a>.</p>

<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00068">Adafruit_NeoPixel()</a>, and <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00182">updateType()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_adafruit___neo_pixel_a74e917093c2eb16848c4a09427680f79_icgraph.png" border="0" usemap="#aclass_adafruit___neo_pixel_a74e917093c2eb16848c4a09427680f79_icgraph" loading="lazy" alt=""/></div>
<map name="aclass_adafruit___neo_pixel_a74e917093c2eb16848c4a09427680f79_icgraph" id="aclass_adafruit___neo_pixel_a74e917093c2eb16848c4a09427680f79_icgraph">
<area shape="rect" title="更改已声明的Adafruit_NeoPixel灯带对象的长度。旧数据会被释放，新数据会被清空。 引脚号和像素格式不变。" alt="" coords="370,5,504,48"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#aac61dab69181d4554be8cdde40e4bce6" title="当长度、引脚和像素类型在编译时已知时的NeoPixel构造函数" alt="" coords="5,5,140,48"/>
<area shape="poly" title=" " alt="" coords="352,24,322,25,188,25,140,27,140,21,188,20,322,20,357,23"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#a07b6949674125159484e9e02ef025f7d" title="更改之前声明的像素格式 Adafruit_NeoPixel灯带对象。如果格式从一个变为另一个 将RGB变体转换为RGBW变体（或将RGBW转换为RGB），旧的 数据将被释放，新数据将被清空。否则， 旧数..." alt="" coords="188,35,322,77"/>
<area shape="poly" title=" " alt="" coords="357,40,323,48,322,43,352,40"/>
<area shape="poly" title=" " alt="" coords="169,43,140,40,140,35,175,42"/>
</map>
</div>

</div>
</div>
<a id="a07b6949674125159484e9e02ef025f7d" name="a07b6949674125159484e9e02ef025f7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07b6949674125159484e9e02ef025f7d">&#9670;&#160;</a></span>updateType()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Adafruit_NeoPixel::updateType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_adafruit___neo_pixel_8h.html#ab88a50d51bb5488df4379ff49c81fd72">neoPixelType</a></td>          <td class="paramname"><span class="paramname"><em>t</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>更改之前声明的像素格式 Adafruit_NeoPixel灯带对象。如果格式从一个变为另一个 将RGB变体转换为RGBW变体（或将RGBW转换为RGB），旧的 数据将被释放，新数据将被清空。否则， 旧数据将保留在RAM中，并且不会重新排序到 由于是新格式，建议随后执行 <a class="el" href="#ae259682b202be0acd258d6879f4c7121" title="Fill the whole NeoPixel strip with 0 / black / off.">clear()</a> 操作。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>像素类型 &ndash; 将NEO_*常量（在...中定义）相加 例如，在Adafruit_NeoPixel.h中，对于NEO_GRB+NEO_KHZ800 NeoPixels期望接收800 KHz（而非400 KHz）的数据流 颜色字节以绿色、红色、蓝色的顺序表示像素。 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>此函数已弃用，此处仅用于旧项目 可能仍然在使用它。新项目应改用 “new”关键字与第一个构造函数的语法 （长度，引脚，类型）。 </dd></dl>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00182">182</a> of file <a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  182</span>                                                 {</div>
<div class="line"><span class="lineno">  183</span>  <span class="keywordtype">bool</span> oldThreeBytesPerPixel = (<a class="code hl_variable" href="#abb82afb6bb4c4e365561f18c6ff6b6a8">wOffset</a> == <a class="code hl_variable" href="#a8275f74399aea225b25aed014d740c99">rOffset</a>); <span class="comment">// false if RGBW</span></div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>  <a class="code hl_variable" href="#abb82afb6bb4c4e365561f18c6ff6b6a8">wOffset</a> = (t &gt;&gt; 6) &amp; 0b11; <span class="comment">// See notes in header file</span></div>
<div class="line"><span class="lineno">  186</span>  <a class="code hl_variable" href="#a8275f74399aea225b25aed014d740c99">rOffset</a> = (t &gt;&gt; 4) &amp; 0b11; <span class="comment">// regarding R/G/B/W offsets</span></div>
<div class="line"><span class="lineno">  187</span>  <a class="code hl_variable" href="#a3db2bc3b72073fd9a86438128186fc98">gOffset</a> = (t &gt;&gt; 2) &amp; 0b11;</div>
<div class="line"><span class="lineno">  188</span>  <a class="code hl_variable" href="#aeb2fc94bc0568778b3a643977a8b6a95">bOffset</a> = t &amp; 0b11;</div>
<div class="line"><span class="lineno">  189</span><span class="preprocessor">#if defined(NEO_KHZ400)</span></div>
<div class="line"><span class="lineno">  190</span>  <a class="code hl_variable" href="#a56919a5e954b1a87ef965c75c6cc68a1">is800KHz</a> = (t &lt; 256); <span class="comment">// 400 KHz flag is 1&lt;&lt;8</span></div>
<div class="line"><span class="lineno">  191</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>  <span class="comment">// If bytes-per-pixel has changed (and pixel data was previously</span></div>
<div class="line"><span class="lineno">  194</span>  <span class="comment">// allocated), re-allocate to new size. Will clear any data.</span></div>
<div class="line"><span class="lineno">  195</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a0667c23748aa7b3dc04e7c59916308cd">pixels</a>) {</div>
<div class="line"><span class="lineno">  196</span>    <span class="keywordtype">bool</span> newThreeBytesPerPixel = (<a class="code hl_variable" href="#abb82afb6bb4c4e365561f18c6ff6b6a8">wOffset</a> == <a class="code hl_variable" href="#a8275f74399aea225b25aed014d740c99">rOffset</a>);</div>
<div class="line"><span class="lineno">  197</span>    <span class="keywordflow">if</span> (newThreeBytesPerPixel != oldThreeBytesPerPixel)</div>
<div class="line"><span class="lineno">  198</span>      <a class="code hl_function" href="#a74e917093c2eb16848c4a09427680f79">updateLength</a>(<a class="code hl_variable" href="#ad8218520ee2ad574f805985ea2c2b0b6">numLEDs</a>);</div>
<div class="line"><span class="lineno">  199</span>  }</div>
<div class="line"><span class="lineno">  200</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00408">bOffset</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00407">gOffset</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00397">is800KHz</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00401">numLEDs</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00405">pixels</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00406">rOffset</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00153">updateLength()</a>, and <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00409">wOffset</a>.</p>

<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00068">Adafruit_NeoPixel()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_adafruit___neo_pixel_a07b6949674125159484e9e02ef025f7d_cgraph.png" border="0" usemap="#aclass_adafruit___neo_pixel_a07b6949674125159484e9e02ef025f7d_cgraph" loading="lazy" alt=""/></div>
<map name="aclass_adafruit___neo_pixel_a07b6949674125159484e9e02ef025f7d_cgraph" id="aclass_adafruit___neo_pixel_a07b6949674125159484e9e02ef025f7d_cgraph">
<area shape="rect" title="更改之前声明的像素格式 Adafruit_NeoPixel灯带对象。如果格式从一个变为另一个 将RGB变体转换为RGBW变体（或将RGBW转换为RGB），旧的 数据将被释放，新数据将被清空。否则， 旧数..." alt="" coords="5,5,140,48"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#a74e917093c2eb16848c4a09427680f79" title="更改已声明的Adafruit_NeoPixel灯带对象的长度。旧数据会被释放，新数据会被清空。 引脚号和像素格式不变。" alt="" coords="188,5,322,48"/>
<area shape="poly" title=" " alt="" coords="140,24,175,26,170,27,140,29"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_adafruit___neo_pixel_a07b6949674125159484e9e02ef025f7d_icgraph.png" border="0" usemap="#aclass_adafruit___neo_pixel_a07b6949674125159484e9e02ef025f7d_icgraph" loading="lazy" alt=""/></div>
<map name="aclass_adafruit___neo_pixel_a07b6949674125159484e9e02ef025f7d_icgraph" id="aclass_adafruit___neo_pixel_a07b6949674125159484e9e02ef025f7d_icgraph">
<area shape="rect" title="更改之前声明的像素格式 Adafruit_NeoPixel灯带对象。如果格式从一个变为另一个 将RGB变体转换为RGBW变体（或将RGBW转换为RGB），旧的 数据将被释放，新数据将被清空。否则， 旧数..." alt="" coords="188,5,322,48"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#aac61dab69181d4554be8cdde40e4bce6" title="当长度、引脚和像素类型在编译时已知时的NeoPixel构造函数" alt="" coords="5,5,140,48"/>
<area shape="poly" title=" " alt="" coords="169,27,140,29,140,24,175,26"/>
</map>
</div>

</div>
</div>
<a name="doc-variable-members" id="doc-variable-members"></a><h2 id="header-doc-variable-members" class="groupheader">Member Data Documentation</h2>
<a id="a2215c42c8ed043dc43d28592c2c1d750" name="a2215c42c8ed043dc43d28592c2c1d750"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2215c42c8ed043dc43d28592c2c1d750">&#9670;&#160;</a></span>begun</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Adafruit_NeoPixel::begun</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>true if <a class="el" href="#a8a44d3d56666547290d151ab4c44cf91" title="配置NeoPixel引脚为输出模式。">begin()</a> previously called successfully </p>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00400">400</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00068">Adafruit_NeoPixel()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00087">Adafruit_NeoPixel()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00123">begin()</a>, and <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03364">setPin()</a>.</p>

</div>
</div>
<a id="aeb2fc94bc0568778b3a643977a8b6a95" name="aeb2fc94bc0568778b3a643977a8b6a95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb2fc94bc0568778b3a643977a8b6a95">&#9670;&#160;</a></span>bOffset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t Adafruit_NeoPixel::bOffset</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Index of blue byte. </p>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00408">408</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00087">Adafruit_NeoPixel()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03637">getPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03472">setPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03410">setPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03442">setPixelColor()</a>, and <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00182">updateType()</a>.</p>

</div>
</div>
<a id="a983265c34a4008d2c7a9eeb12eebea84" name="a983265c34a4008d2c7a9eeb12eebea84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a983265c34a4008d2c7a9eeb12eebea84">&#9670;&#160;</a></span>brightness</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t Adafruit_NeoPixel::brightness</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Strip brightness 0-255 (stored as +1). </p>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00404">404</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00068">Adafruit_NeoPixel()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00087">Adafruit_NeoPixel()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03728">getBrightness()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03637">getPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03770">rainbow()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03688">setBrightness()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03472">setPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03410">setPixelColor()</a>, and <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03442">setPixelColor()</a>.</p>

</div>
</div>
<a id="a1774fd792c71e961624594e0c29e4541" name="a1774fd792c71e961624594e0c29e4541"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1774fd792c71e961624594e0c29e4541">&#9670;&#160;</a></span>endTime</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Adafruit_NeoPixel::endTime</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Latch timing reference. </p>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00410">410</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00068">Adafruit_NeoPixel()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00087">Adafruit_NeoPixel()</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00257">canShow()</a>, and <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00390">show()</a>.</p>

</div>
</div>
<a id="a3db2bc3b72073fd9a86438128186fc98" name="a3db2bc3b72073fd9a86438128186fc98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3db2bc3b72073fd9a86438128186fc98">&#9670;&#160;</a></span>gOffset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t Adafruit_NeoPixel::gOffset</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Index of green byte. </p>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00407">407</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00087">Adafruit_NeoPixel()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03637">getPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03472">setPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03410">setPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03442">setPixelColor()</a>, and <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00182">updateType()</a>.</p>

</div>
</div>
<a id="a56919a5e954b1a87ef965c75c6cc68a1" name="a56919a5e954b1a87ef965c75c6cc68a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56919a5e954b1a87ef965c75c6cc68a1">&#9670;&#160;</a></span>is800KHz</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Adafruit_NeoPixel::is800KHz</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>true if 800 KHz pixels </p>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00397">397</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00087">Adafruit_NeoPixel()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00390">show()</a>, and <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00182">updateType()</a>.</p>

</div>
</div>
<a id="a89a4a144941744dc01c6e0072ad0f05d" name="a89a4a144941744dc01c6e0072ad0f05d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89a4a144941744dc01c6e0072ad0f05d">&#9670;&#160;</a></span>numBytes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t Adafruit_NeoPixel::numBytes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Size of 'pixels' buffer below. </p>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00402">402</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00087">Adafruit_NeoPixel()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03733">clear()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03688">setBrightness()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00390">show()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00153">updateLength()</a>, and <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00099">~Adafruit_NeoPixel()</a>.</p>

</div>
</div>
<a id="ad8218520ee2ad574f805985ea2c2b0b6" name="ad8218520ee2ad574f805985ea2c2b0b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8218520ee2ad574f805985ea2c2b0b6">&#9670;&#160;</a></span>numLEDs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t Adafruit_NeoPixel::numLEDs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of RGB LEDs in strip. </p>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00401">401</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00087">Adafruit_NeoPixel()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03504">fill()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03637">getPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00304">numPixels()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03770">rainbow()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03472">setPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03410">setPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03442">setPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00153">updateLength()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00182">updateType()</a>, and <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00099">~Adafruit_NeoPixel()</a>.</p>

</div>
</div>
<a id="aaa3ce258bc1ded4228bff0277101cdb5" name="aaa3ce258bc1ded4228bff0277101cdb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa3ce258bc1ded4228bff0277101cdb5">&#9670;&#160;</a></span>pin</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int16_t Adafruit_NeoPixel::pin</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Output pin number (-1 if not yet set). </p>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00403">403</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00087">Adafruit_NeoPixel()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00123">begin()</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00299">getPin()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03364">setPin()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00390">show()</a>, and <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00099">~Adafruit_NeoPixel()</a>.</p>

</div>
</div>
<a id="a0667c23748aa7b3dc04e7c59916308cd" name="a0667c23748aa7b3dc04e7c59916308cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0667c23748aa7b3dc04e7c59916308cd">&#9670;&#160;</a></span>pixels</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* Adafruit_NeoPixel::pixels</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Holds LED color values (3 or 4 bytes each). </p>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00405">405</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00068">Adafruit_NeoPixel()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00087">Adafruit_NeoPixel()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03733">clear()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03637">getPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00293">getPixels()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03688">setBrightness()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03472">setPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03410">setPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03442">setPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00390">show()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00153">updateLength()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00182">updateType()</a>, and <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00099">~Adafruit_NeoPixel()</a>.</p>

</div>
</div>
<a id="a8275f74399aea225b25aed014d740c99" name="a8275f74399aea225b25aed014d740c99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8275f74399aea225b25aed014d740c99">&#9670;&#160;</a></span>rOffset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t Adafruit_NeoPixel::rOffset</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Red index within each 3- or 4-byte pixel. </p>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00406">406</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00087">Adafruit_NeoPixel()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03637">getPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03472">setPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03410">setPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03442">setPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00153">updateLength()</a>, and <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00182">updateType()</a>.</p>

</div>
</div>
<a id="abb82afb6bb4c4e365561f18c6ff6b6a8" name="abb82afb6bb4c4e365561f18c6ff6b6a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb82afb6bb4c4e365561f18c6ff6b6a8">&#9670;&#160;</a></span>wOffset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t Adafruit_NeoPixel::wOffset</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Index of white (==rOffset if no white). </p>

<p class="definition">Definition at line <a class="el" href="_adafruit___neo_pixel_8h_source.html#l00409">409</a> of file <a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00087">Adafruit_NeoPixel()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03637">getPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03472">setPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03410">setPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l03442">setPixelColor()</a>, <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00153">updateLength()</a>, and <a class="el" href="_adafruit___neo_pixel_8cpp_source.html#l00182">updateType()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="_adafruit___neo_pixel_8h_source.html">Adafruit_NeoPixel.h</a></li>
<li>src/<a class="el" href="_adafruit___neo_pixel_8cpp_source.html">Adafruit_NeoPixel.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="class_adafruit___neo_pixel.html">Adafruit_NeoPixel</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
