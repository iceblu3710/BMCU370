<map id="CommandRouter::Run" name="CommandRouter::Run">
<area shape="rect" id="Node000001" title="Main execution loop for the Router." alt="" coords="5,183,158,209"/>
<area shape="rect" id="Node000002" href="$namespace_hardware.html#ad269fd29299dd87118b408e4551f4d2d" title="Millisecond Delay." alt="" coords="252,5,391,32"/>
<area shape="poly" id="edge1_Node000001_Node000002" title=" " alt="" coords="87,181,104,151,130,113,164,74,204,42,238,28,235,32,207,46,167,78,134,117,109,154,92,183"/>
<area shape="rect" id="Node000003" href="$namespace_control_logic.html#a300e5b18ebf53c086955bf02dfe16faa" title="Get current Boot Mode." alt="" coords="230,56,412,83"/>
<area shape="poly" id="edge2_Node000001_Node000003" title=" " alt="" coords="95,181,142,140,172,118,204,99,241,86,238,90,207,104,175,122,145,144,99,183"/>
<area shape="rect" id="Node000004" href="$namespace_hardware.html#a8ea28b07408691bc126683a81aa220f3" title="Get System Time in Milliseconds." alt="" coords="1532,249,1667,276"/>
<area shape="poly" id="edge3_Node000001_Node000004" title=" " alt="" coords="130,180,205,163,399,128,485,120,595,117,1129,117,1192,121,1255,131,1318,146,1377,164,1482,204,1561,242,1556,242,1480,209,1375,169,1316,151,1254,136,1192,126,1129,123,595,123,485,125,400,134,206,168,134,184"/>
<area shape="rect" id="Node000006" href="$class_bambu_bus_protocol.html#addece07a1980f5f561e151fd4a09b9ea" title="Map internal BambuBus package types to a unified command type." alt="" coords="206,380,437,407"/>
<area shape="poly" id="edge5_Node000001_Node000006" title=" " alt="" coords="88,207,106,241,131,284,165,329,207,366,217,372,212,374,204,370,161,332,127,287,102,244,89,212"/>
<area shape="rect" id="Node000007" href="$class_bambu_bus_protocol.html#a81deddd553eeb25fa96580079d7c9bd0" title="Identify the type of BambuBus packet." alt="" coords="229,263,414,305"/>
<area shape="poly" id="edge6_Node000001_Node000007" title=" " alt="" coords="113,207,207,244,238,256,234,259,205,249,116,212"/>
<area shape="rect" id="Node000010" href="$namespace_command_router.html#a329f0a7e2f53debf5c7cb5f47579151b" title="Route an incoming command to its specific handler." alt="" coords="240,208,403,235"/>
<area shape="poly" id="edge9_Node000001_Node000010" title=" " alt="" coords="156,202,226,209,222,213,159,206"/>
<area shape="rect" id="Node000013" href="$namespace_control_logic.html#a9716be5fe9da72481bee41a80681d8e5" title="Update connectivity status (Online/Offline)." alt="" coords="488,157,705,184"/>
<area shape="poly" id="edge66_Node000001_Node000013" title=" " alt="" coords="157,190,474,175,471,179,159,195"/>
<area shape="rect" id="Node000014" href="$namespace_klipper_c_l_i.html#afe96c8a3898aa7a50f68ab6d726860c3" title="Main Execution Loop." alt="" coords="264,329,378,356"/>
<area shape="poly" id="edge15_Node000001_Node000014" title=" " alt="" coords="92,207,139,261,171,290,207,315,251,332,247,335,204,320,168,295,135,265,93,212"/>
<area shape="rect" id="Node000005" href="$time64_8cpp.html#a146d483f58902ba0184ce16f728edfb0" title="Get 64&#45;bit System Time in Milliseconds." alt="" coords="1777,249,1862,276"/>
<area shape="poly" id="edge4_Node000004_Node000005" title=" " alt="" coords="1667,260,1764,262,1758,263,1668,265"/>
<area shape="rect" id="Node000008" href="$class_bambu_bus_protocol.html#a8b674c03ab157fa7e70fc2f6e271d539" title="Verify the CRC16 for a complete packet." alt="" coords="485,325,708,352"/>
<area shape="poly" id="edge7_Node000007_Node000008" title=" " alt="" coords="413,300,513,320,509,323,415,305"/>
<area shape="rect" id="Node000009" href="$class_bambu_bus_protocol.html#ad0e11ad5c710644e9f1ee2fb4f15a3b9" title="Extract data from a &quot;Long Packet&quot; (0x05 type)." alt="" coords="767,275,970,317"/>
<area shape="poly" id="edge8_Node000007_Node000009" title=" " alt="" coords="413,283,753,292,749,295,415,289"/>
<area shape="rect" id="Node000011" href="$namespace_command_router.html#a1d2e53549b25a63274ad073b375e5f21" title="wrapper to handle Long Packets by parsing and dispatching." alt="" coords="498,208,695,251"/>
<area shape="poly" id="edge10_Node000010_Node000011" title=" " alt="" coords="402,221,485,224,480,228,405,226"/>
<area shape="poly" id="edge13_Node000010_Node000013" title=" " alt="" coords="396,205,508,186,504,189,399,210"/>
<area shape="poly" id="edge11_Node000011_Node000009" title=" " alt="" coords="686,249,766,269,761,271,687,254"/>
<area shape="rect" id="Node000012" href="$namespace_control_logic.html#a1ff0bcee8062346fb963e4dd845c8bdf" title="Handler/Dispatcher for Long Packets." alt="" coords="779,208,958,251"/>
<area shape="poly" id="edge12_Node000011_Node000012" title=" " alt="" coords="695,227,766,228,761,231,697,232"/>
<area shape="poly" id="edge14_Node000013_Node000004" title=" " alt="" coords="705,172,1048,191,1260,209,1473,235,1524,245,1519,246,1472,240,1260,215,1048,196,707,177"/>
<area shape="rect" id="Node000015" href="$namespace_klipper_c_l_i.html#a6089e6db2e7edddf19fdf095b9826c88" title="Parse and Dispatch a JSON Packet." alt="" coords="507,659,686,685"/>
<area shape="poly" id="edge16_Node000014_Node000015" title=" " alt="" coords="378,343,410,351,439,366,472,396,500,431,525,469,545,509,575,584,592,644,586,643,570,586,540,511,520,472,496,434,468,400,435,370,408,356,380,348"/>
<area shape="rect" id="Node000016" href="$namespace_klipper_c_l_i.html#afeb304003d4b85010afd5e183e1bbf16" title="Handler for GET_FILAMENT_INFO command." alt="" coords="756,901,981,928"/>
<area shape="poly" id="edge17_Node000015_Node000016" title=" " alt="" coords="610,683,673,750,758,833,836,892,831,892,755,837,669,754,610,688"/>
<area shape="rect" id="Node000018" href="$namespace_klipper_c_l_i.html#ad0e99d2fdcfd1c0690f850816ac1f67c" title="Helper to send an Error response." alt="" coords="1054,737,1202,764"/>
<area shape="poly" id="edge64_Node000015_Node000018" title=" " alt="" coords="633,683,691,703,757,720,830,732,905,740,1041,749,1035,750,904,745,830,737,756,725,690,708,634,689"/>
<area shape="rect" id="Node000020" href="$namespace_hardware.html#ad3ec7cad074d6d73508844a06a7bea50" title="Send a buffer via UART1." alt="" coords="1520,847,1679,873"/>
<area shape="poly" id="edge65_Node000015_Node000020" title=" " alt="" coords="607,656,665,589,708,547,755,510,825,463,884,430,946,407,1028,387,1084,374,1130,365,1175,368,1228,387,1300,430,1364,485,1421,548,1470,614,1512,679,1546,740,1590,834,1585,832,1541,742,1507,682,1466,617,1417,551,1360,489,1297,435,1226,392,1174,373,1131,371,1085,379,1029,392,947,412,886,435,828,467,758,514,711,551,669,592,610,660"/>
<area shape="rect" id="Node000023" href="$namespace_klipper_c_l_i.html#ae13dcd8cc2528c12d0a241046fcc304e" title="Handler for GET_SENSORS command." alt="" coords="768,1057,969,1084"/>
<area shape="poly" id="edge26_Node000015_Node000023" title=" " alt="" coords="606,683,666,792,710,866,758,938,804,996,846,1046,841,1045,800,999,754,942,706,868,662,795,604,688"/>
<area shape="rect" id="Node000025" href="$namespace_klipper_c_l_i.html#a12cef4b97fbfa7cfb7bdb1540e626ae9" title="Handler for MOVE command." alt="" coords="787,524,950,551"/>
<area shape="poly" id="edge29_Node000015_Node000025" title=" " alt="" coords="612,656,672,609,712,583,755,560,777,554,772,557,757,565,715,587,675,613,615,660"/>
<area shape="rect" id="Node000029" href="$namespace_klipper_c_l_i.html#a81f1646e6adb42482d4109a33b9bb9c5" title="Handler for PING command." alt="" coords="1049,300,1206,327"/>
<area shape="poly" id="edge35_Node000015_Node000029" title=" " alt="" coords="599,657,614,606,644,531,665,491,690,451,720,415,755,384,776,373,804,362,875,344,1036,321,1031,324,876,350,805,367,778,378,758,389,724,419,694,455,669,494,648,533,619,608,603,660"/>
<area shape="rect" id="Node000031" href="$namespace_klipper_c_l_i.html#a685b6d688593b458b5edafda4adfd4d4" title="Handler for SELECT_LANE command." alt="" coords="770,632,967,659"/>
<area shape="poly" id="edge39_Node000015_Node000031" title=" " alt="" coords="686,661,758,655,753,657,688,666"/>
<area shape="rect" id="Node000033" href="$namespace_klipper_c_l_i.html#a31ef4dae129916b85fdd8d1612553c77" title="Handler for SET_AUTO_FEED command." alt="" coords="765,684,972,711"/>
<area shape="poly" id="edge43_Node000015_Node000033" title=" " alt="" coords="686,678,752,685,747,687,688,683"/>
<area shape="rect" id="Node000035" href="$namespace_klipper_c_l_i.html#a76547f35e246989843f1870c760ea514" title="Handler for SET_FILAMENT_INFO command." alt="" coords="757,796,980,823"/>
<area shape="poly" id="edge47_Node000015_Node000035" title=" " alt="" coords="618,683,680,723,757,766,813,790,807,791,755,770,677,727,618,688"/>
<area shape="rect" id="Node000040" href="$namespace_klipper_c_l_i.html#a8f239072c1896e64e9f6075edaaea515" title="Handler for STATUS command." alt="" coords="784,1108,953,1135"/>
<area shape="poly" id="edge56_Node000015_Node000040" title=" " alt="" coords="600,684,609,759,618,811,632,869,652,930,679,990,714,1046,758,1094,772,1106,767,1105,755,1098,710,1049,674,993,647,932,627,871,613,812,604,759,598,688"/>
<area shape="rect" id="Node000042" href="$namespace_klipper_c_l_i.html#a5bc1dda1e0b24dccb6fdc1c475930c88" title="Handler for STOP command." alt="" coords="789,575,948,601"/>
<area shape="poly" id="edge61_Node000015_Node000042" title=" " alt="" coords="638,656,756,617,805,605,801,607,757,623,640,660"/>
<area shape="rect" id="Node000017" href="$class_unit_state.html#a221a5d98d4e870c593e5bd5ee6621c4c" title="Get the configuration specific to a filament index." alt="" coords="1050,1007,1206,1033"/>
<area shape="poly" id="edge18_Node000016_Node000017" title=" " alt="" coords="898,926,1030,986,1069,1002,1063,1001,1028,990,897,931"/>
<area shape="poly" id="edge19_Node000016_Node000018" title=" " alt="" coords="891,899,933,870,979,833,992,817,1001,802,1011,788,1027,774,1037,771,1042,769,1030,778,1015,791,1005,805,997,820,983,837,936,874,894,903"/>
<area shape="poly" id="edge25_Node000016_Node000020" title=" " alt="" coords="931,926,1029,941,1128,948,1227,941,1312,929,1396,912,1535,879,1540,878,1397,917,1312,934,1227,947,1128,953,1028,947,931,931"/>
<area shape="rect" id="Node000019" href="$namespace_klipper_c_l_i.html#a9ec392d53485800126189969c2c4981a" title="Serialize and send a JSON response." alt="" coords="1284,737,1463,764"/>
<area shape="poly" id="edge20_Node000018_Node000019" title=" " alt="" coords="1202,748,1271,750,1266,751,1203,753"/>
<area shape="poly" id="edge21_Node000019_Node000020" title=" " alt="" coords="1431,762,1473,778,1525,806,1570,838,1565,837,1522,810,1471,782,1430,767"/>
<area shape="rect" id="Node000021" href="$namespace_hardware.html#a0ada30189b8e1d1dbec145140849b778" title="Microsecond Delay." alt="" coords="1960,847,2098,873"/>
<area shape="poly" id="edge22_Node000020_Node000021" title=" " alt="" coords="1679,857,1947,860,1942,860,1679,863"/>
<area shape="rect" id="Node000022" href="$namespace_hardware.html#aaaf02ef3df5811e2ba28dd009eadfaae" title="Send a single byte blocking." alt="" coords="1727,872,1912,899"/>
<area shape="poly" id="edge23_Node000020_Node000022" title=" " alt="" coords="1679,866,1714,873,1708,873,1679,872"/>
<area shape="poly" id="edge24_Node000022_Node000021" title=" " alt="" coords="1912,872,1948,870,1942,871,1913,877"/>
<area shape="poly" id="edge28_Node000023_Node000019" title=" " alt="" coords="969,1074,1043,1075,1119,1072,1184,1062,1208,1054,1225,1043,1249,1013,1258,982,1258,950,1252,917,1246,882,1244,848,1251,813,1273,778,1281,774,1286,771,1277,782,1256,815,1249,848,1251,882,1257,916,1263,950,1264,983,1254,1016,1229,1047,1210,1059,1185,1067,1119,1077,1043,1081,969,1079"/>
<area shape="rect" id="Node000024" href="$namespace_control_logic.html#a4428a845041ff986ccbf2555a62d0656" title="Get a bitmask of sensor states." alt="" coords="1030,1108,1226,1135"/>
<area shape="poly" id="edge27_Node000023_Node000024" title=" " alt="" coords="941,1082,1044,1105,1039,1104,940,1087"/>
<area shape="poly" id="edge32_Node000025_Node000018" title=" " alt="" coords="951,542,982,561,999,581,1006,602,1008,644,1009,685,1016,704,1031,723,1042,734,1037,734,1027,727,1011,707,1003,686,1002,644,1001,603,994,584,979,565,951,548"/>
<area shape="rect" id="Node000026" href="$class_unit_state.html#a4833e917e0069069c7f455a24e28a516" title="Get the currently active filament index." alt="" coords="1029,401,1227,444"/>
<area shape="poly" id="edge30_Node000025_Node000026" title=" " alt="" coords="893,521,953,489,1028,454,1046,448,1042,451,1030,458,956,494,896,526"/>
<area shape="rect" id="Node000027" href="$namespace_control_logic.html#a484eadc314267f8bc9aa0f025c1137d9" title="Manually move an axis (Klipper Primitive)." alt="" coords="1048,468,1208,495"/>
<area shape="poly" id="edge31_Node000025_Node000027" title=" " alt="" coords="933,521,1050,497,1046,500,935,526"/>
<area shape="rect" id="Node000028" href="$namespace_klipper_c_l_i.html#a1d7d7986d99cb52ab4feb4826ffc4428" title="Helper to send a Success (OK) response." alt="" coords="1059,569,1196,596"/>
<area shape="poly" id="edge33_Node000025_Node000028" title=" " alt="" coords="948,549,1046,567,1041,569,949,554"/>
<area shape="poly" id="edge34_Node000028_Node000019" title=" " alt="" coords="1197,593,1228,606,1267,632,1303,664,1356,725,1351,724,1299,668,1264,637,1226,610,1197,598"/>
<area shape="poly" id="edge36_Node000029_Node000004" title=" " alt="" coords="1206,308,1332,300,1472,285,1525,279,1520,281,1473,291,1332,305,1208,313"/>
<area shape="poly" id="edge38_Node000029_Node000019" title=" " alt="" coords="1154,325,1193,351,1229,388,1258,431,1283,477,1324,571,1352,657,1369,723,1364,721,1347,659,1319,573,1279,479,1253,433,1225,391,1189,355,1154,330"/>
<area shape="rect" id="Node000030" href="$class_unit_state.html#a745286b33e7a2805f9045e22fc0a49ac" title=" " alt="" coords="1300,249,1448,276"/>
<area shape="poly" id="edge37_Node000029_Node000030" title=" " alt="" coords="1195,297,1293,279,1288,281,1197,302"/>
<area shape="poly" id="edge40_Node000031_Node000018" title=" " alt="" coords="952,657,982,670,998,683,1007,697,1016,711,1030,723,1042,731,1037,731,1027,728,1012,714,1002,700,994,687,979,674,953,662"/>
<area shape="poly" id="edge41_Node000031_Node000028" title=" " alt="" coords="926,629,1057,599,1052,601,928,634"/>
<area shape="rect" id="Node000032" href="$class_unit_state.html#a07223951eecac60709753ce07290477d" title="Set the currently active filament index." alt="" coords="1029,620,1226,663"/>
<area shape="poly" id="edge42_Node000031_Node000032" title=" " alt="" coords="967,641,1016,642,1011,644,968,646"/>
<area shape="poly" id="edge44_Node000033_Node000018" title=" " alt="" coords="937,709,1047,733,1042,734,937,714"/>
<area shape="poly" id="edge45_Node000033_Node000028" title=" " alt="" coords="953,681,979,668,994,654,1002,638,1011,622,1027,606,1047,598,1042,601,1030,610,1015,625,1007,641,999,657,982,673,956,686"/>
<area shape="rect" id="Node000034" href="$namespace_control_logic.html#a9db355302a1c9d608e6dd5341151336e" title="Enable/Disable Auto&#45;Feed (Pressure Control) for a lane." alt="" coords="1039,687,1217,713"/>
<area shape="poly" id="edge46_Node000033_Node000034" title=" " alt="" coords="972,696,1026,698,1020,700,973,701"/>
<area shape="poly" id="edge48_Node000035_Node000017" title=" " alt="" coords="893,821,936,850,983,887,1007,915,1031,942,1097,998,1092,997,1027,946,1003,918,979,891,933,854,892,826"/>
<area shape="poly" id="edge49_Node000035_Node000018" title=" " alt="" coords="930,793,1053,767,1048,769,931,798"/>
<area shape="poly" id="edge50_Node000035_Node000028" title=" " alt="" coords="893,793,936,763,959,743,978,721,994,690,999,662,1006,634,1014,620,1027,606,1043,599,1047,596,1030,610,1018,623,1011,636,1004,663,999,692,983,724,962,747,939,767,895,798"/>
<area shape="rect" id="Node000036" href="$namespace_control_logic.html#a3aed4ef4cb26632467a000c0130b11b4" title="Action helper to update filament metadata." alt="" coords="1042,788,1214,831"/>
<area shape="poly" id="edge51_Node000035_Node000036" title=" " alt="" coords="980,807,1029,809,1023,810,981,812"/>
<area shape="rect" id="Node000038" href="$struct_filament_info.html#ac821cbe379c5f19ac753f91adef53851" title="Set the RFID/ID of the filament." alt="" coords="1060,855,1196,881"/>
<area shape="poly" id="edge54_Node000035_Node000038" title=" " alt="" coords="931,821,1053,850,1048,851,931,826"/>
<area shape="rect" id="Node000039" href="$struct_filament_info.html#a6bb1d50ec33de9366132999b3a84ff3c" title="Set the Name of the filament." alt="" coords="1050,905,1206,932"/>
<area shape="poly" id="edge55_Node000035_Node000039" title=" " alt="" coords="892,821,954,855,1030,891,1052,900,1047,900,1028,896,951,860,892,826"/>
<area shape="rect" id="Node000037" href="$namespace_control_logic.html#afe90d7f284c20f90f74787274f01c51b" title="Flag that settings need to be saved." alt="" coords="1275,792,1472,819"/>
<area shape="poly" id="edge52_Node000036_Node000037" title=" " alt="" coords="1214,805,1262,807,1257,808,1215,811"/>
<area shape="poly" id="edge53_Node000037_Node000004" title=" " alt="" coords="1450,789,1470,774,1494,737,1516,683,1535,616,1552,543,1578,398,1593,294,1596,290,1583,399,1557,544,1540,618,1521,685,1499,740,1474,778,1452,794"/>
<area shape="poly" id="edge57_Node000040_Node000017" title=" " alt="" coords="942,1105,980,1094,1039,1067,1089,1043,1094,1041,1041,1072,982,1098,943,1110"/>
<area shape="poly" id="edge60_Node000040_Node000020" title=" " alt="" coords="891,1133,952,1166,990,1183,1029,1195,1085,1207,1129,1214,1173,1211,1226,1195,1287,1166,1345,1129,1398,1086,1447,1041,1527,952,1578,887,1583,885,1531,956,1451,1044,1402,1090,1348,1133,1290,1170,1228,1200,1174,1216,1129,1219,1084,1213,1028,1200,988,1188,950,1171,890,1138"/>
<area shape="poly" id="edge59_Node000040_Node000024" title=" " alt="" coords="953,1119,1017,1121,1012,1121,954,1124"/>
<area shape="rect" id="Node000041" href="$namespace_control_logic.html#a77da31cf0baa8e886a438b2a9e73a573" title="Get the current motion state of a lane." alt="" coords="1033,1159,1223,1185"/>
<area shape="poly" id="edge58_Node000040_Node000041" title=" " alt="" coords="941,1133,1044,1155,1039,1155,940,1138"/>
<area shape="poly" id="edge62_Node000042_Node000028" title=" " alt="" coords="948,584,1046,584,1041,585,949,589"/>
<area shape="rect" id="Node000043" href="$namespace_control_logic.html#af084200798d6b89c1b448bf41b105d62" title="Stop all motors." alt="" coords="1056,519,1200,545"/>
<area shape="poly" id="edge63_Node000042_Node000043" title=" " alt="" coords="933,572,1050,548,1046,550,935,576"/>
</map>
