<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BMCU370 Firmware: src/time64.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">BMCU370 Firmware
   </div>
   <div id="projectbrief">Modified BMCU-C 370 Hall firmware</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('time64_8cpp.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">time64.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="time64_8h_source.html">time64.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for time64.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="time64_8cpp__incl.png" border="0" usemap="#asrc_2time64_8cpp" loading="lazy" alt=""/></div>
<map name="asrc_2time64_8cpp" id="asrc_2time64_8cpp">
<area shape="rect" title=" " alt="" coords="5,5,113,32"/>
<area shape="rect" href="time64_8h.html" title=" " alt="" coords="23,80,95,107"/>
<area shape="poly" title=" " alt="" coords="60,30,62,65,56,64,58,35"/>
<area shape="rect" title=" " alt="" coords="21,155,97,181"/>
<area shape="poly" title=" " alt="" coords="61,105,62,140,56,138,57,109"/>
</map>
</div>
</div>
<p><a href="time64_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a146d483f58902ba0184ce16f728edfb0" id="r_a146d483f58902ba0184ce16f728edfb0"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a146d483f58902ba0184ce16f728edfb0">get_time64</a> ()</td></tr>
<tr class="memdesc:a146d483f58902ba0184ce16f728edfb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get 64-bit System Time in Milliseconds.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a835e55cf06ad6373a5dc362d5640da33" id="r_a835e55cf06ad6373a5dc362d5640da33"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a835e55cf06ad6373a5dc362d5640da33">_time64_time_H</a> = 0</td></tr>
<tr class="memitem:ad65dcffef922558683d14a454d6c03d4" id="r_ad65dcffef922558683d14a454d6c03d4"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad65dcffef922558683d14a454d6c03d4">_time64_time_L</a> = 0</td></tr>
</table>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a146d483f58902ba0184ce16f728edfb0" name="a146d483f58902ba0184ce16f728edfb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a146d483f58902ba0184ce16f728edfb0">&#9670;&#160;</a></span>get_time64()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t get_time64 </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get 64-bit System Time in Milliseconds. </p>
<p>Handles rollover of the 32-bit <span class="tt">millis()</span> counter to provide a continuous 64-bit time. Must be called frequently (at least once every 49 days) to detect rollover.</p>
<dl class="section return"><dt>Returns</dt><dd>uint64_t Time in ms. </dd></dl>

<p class="definition">Definition at line <a class="el" href="time64_8cpp_source.html#l00018">18</a> of file <a class="el" href="time64_8cpp_source.html">time64.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   19</span>{</div>
<div class="line"><span class="lineno">   20</span>    uint32_t T = millis();</div>
<div class="line"><span class="lineno">   21</span>    <span class="keywordflow">if</span> (T &lt; <a class="code hl_variable" href="#ad65dcffef922558683d14a454d6c03d4">_time64_time_L</a>)</div>
<div class="line"><span class="lineno">   22</span>    {</div>
<div class="line"><span class="lineno">   23</span>        <a class="code hl_variable" href="#a835e55cf06ad6373a5dc362d5640da33">_time64_time_H</a> += 0x100000000;</div>
<div class="line"><span class="lineno">   24</span>    }</div>
<div class="line"><span class="lineno">   25</span>    <a class="code hl_variable" href="#ad65dcffef922558683d14a454d6c03d4">_time64_time_L</a> = T;</div>
<div class="line"><span class="lineno">   26</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="#a835e55cf06ad6373a5dc362d5640da33">_time64_time_H</a> | <a class="code hl_variable" href="#ad65dcffef922558683d14a454d6c03d4">_time64_time_L</a>;</div>
<div class="line"><span class="lineno">   27</span>}</div>
<div class="ttc" id="atime64_8cpp_html_a835e55cf06ad6373a5dc362d5640da33"><div class="ttname"><a href="#a835e55cf06ad6373a5dc362d5640da33">_time64_time_H</a></div><div class="ttdeci">uint64_t _time64_time_H</div><div class="ttdef"><b>Definition</b> <a href="time64_8cpp_source.html#l00003">time64.cpp:3</a></div></div>
<div class="ttc" id="atime64_8cpp_html_ad65dcffef922558683d14a454d6c03d4"><div class="ttname"><a href="#ad65dcffef922558683d14a454d6c03d4">_time64_time_L</a></div><div class="ttdeci">uint32_t _time64_time_L</div><div class="ttdef"><b>Definition</b> <a href="time64_8cpp_source.html#l00004">time64.cpp:4</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="time64_8cpp_source.html#l00003">_time64_time_H</a>, and <a class="el" href="time64_8cpp_source.html#l00004">_time64_time_L</a>.</p>

<p class="reference">Referenced by <a class="el" href="_hardware_8cpp_source.html#l00115">Hardware::GetTime()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="time64_8cpp_a146d483f58902ba0184ce16f728edfb0_icgraph.png" border="0" usemap="#atime64_8cpp_a146d483f58902ba0184ce16f728edfb0_icgraph" loading="lazy" alt=""/></div>
<map name="atime64_8cpp_a146d483f58902ba0184ce16f728edfb0_icgraph" id="atime64_8cpp_a146d483f58902ba0184ce16f728edfb0_icgraph">
<area shape="rect" title="Get 64&#45;bit System Time in Milliseconds." alt="" coords="2153,189,2238,216"/>
<area shape="rect" href="namespace_hardware.html#a8ea28b07408691bc126683a81aa220f3" title="Get System Time in Milliseconds." alt="" coords="1969,189,2105,216"/>
<area shape="poly" title=" " alt="" coords="2134,203,2105,205,2105,200,2140,202"/>
<area shape="rect" href="namespace_control_logic.html#a4ddc46100d9f991cb0d171e62707ee7c" title=" " alt="" coords="1740,37,1906,64"/>
<area shape="poly" title=" " alt="" coords="2014,176,1974,131,1948,106,1920,85,1882,67,1882,62,1923,80,1952,102,1978,127,2019,177"/>
<area shape="rect" href="namespace_control_logic.html#ac2d890c891494072159ebc2b30490197" title="State Machine for BambuBus Logic." alt="" coords="1514,72,1649,115"/>
<area shape="poly" title=" " alt="" coords="2004,180,1966,157,1920,136,1850,117,1777,105,1650,96,1649,90,1778,99,1851,111,1922,131,1969,152,2009,181"/>
<area shape="rect" href="namespace_control_logic.html#adc8c269923e0c76c6d104a005833a7f9" title="Main Control Loop." alt="" coords="1264,84,1390,111"/>
<area shape="poly" title=" " alt="" coords="1952,189,1921,187,1704,159,1486,129,1391,112,1391,107,1487,124,1704,153,1922,181,1957,189"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a81f1646e6adb42482d4109a33b9bb9c5" title="Handler for PING command." alt="" coords="1744,240,1901,267"/>
<area shape="poly" title=" " alt="" coords="1965,220,1883,242,1882,237,1960,221"/>
<area shape="rect" href="namespace_command_router.html#a96ff3718682e9322a64815a3d41d001b" title="Main execution loop for the Router." alt="" coords="494,185,647,212"/>
<area shape="poly" title=" " alt="" coords="2030,230,2016,273,1994,324,1963,375,1923,419,1841,481,1804,501,1767,515,1728,524,1686,530,1583,533,1057,533,946,527,901,519,859,506,820,488,781,463,693,394,650,348,616,297,590,249,576,215,578,210,595,246,620,294,654,345,696,390,784,459,823,483,861,501,902,514,947,522,1057,528,1583,528,1685,525,1727,519,1765,510,1802,496,1838,476,1920,415,1959,372,1990,321,2011,272,2026,233"/>
<area shape="rect" href="namespace_control_logic.html#afe90d7f284c20f90f74787274f01c51b" title="Flag that settings need to be saved." alt="" coords="1724,379,1921,405"/>
<area shape="poly" title=" " alt="" coords="2011,226,1841,380,1838,376,2006,228"/>
<area shape="rect" href="namespace_control_logic.html#a9716be5fe9da72481bee41a80681d8e5" title="Update connectivity status (Online/Offline)." alt="" coords="950,189,1167,216"/>
<area shape="poly" title=" " alt="" coords="1951,204,1168,205,1168,200,1956,202"/>
<area shape="poly" title=" " alt="" coords="1726,68,1650,84,1649,79,1731,67"/>
<area shape="rect" href="namespace_control_logic.html#a8880b393facb6828519b8dac8e96393c" title="Core logic for processing Short Motion packets." alt="" coords="1487,5,1676,48"/>
<area shape="poly" title=" " alt="" coords="1721,41,1677,39,1676,33,1727,41"/>
<area shape="poly" title=" " alt="" coords="1495,95,1391,99,1390,94,1501,94"/>
<area shape="rect" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f" title="Arduino Main Loop." alt="" coords="401,135,446,161"/>
<area shape="poly" title=" " alt="" coords="1245,100,1001,110,695,125,448,148,446,143,694,120,1001,104,1251,98"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#a4bcda7a15591065570d3598cbf970be7" title="将RAM中的像素数据传输到NeoPixels。" alt="" coords="188,135,353,161"/>
<area shape="poly" title=" " alt="" coords="383,149,354,150,352,146,388,147"/>
<area shape="rect" href="class_adafruit___neo_pixel.html#a61b1bd003a291520a367ab1712d6265c" title="释放Adafruit_NeoPixel对象，将数据引脚恢复为输入模式。" alt="" coords="5,127,140,169"/>
<area shape="poly" title=" " alt="" coords="170,150,141,150,138,146,174,146"/>
<area shape="rect" href="namespace_control_logic.html#a5f85db884abd1a66d8b120729ec0d99e" title="Handler for Filament Motion Short packet (0x03)." alt="" coords="1232,5,1422,48"/>
<area shape="poly" title=" " alt="" coords="1469,27,1423,29,1422,24,1474,26"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a6089e6db2e7edddf19fdf095b9826c88" title="Parse and Dispatch a JSON Packet." alt="" coords="969,291,1148,317"/>
<area shape="poly" title=" " alt="" coords="1726,254,1495,262,1355,270,1216,281,1135,293,1134,287,1215,276,1355,265,1495,257,1731,253"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#afe96c8a3898aa7a50f68ab6d726860c3" title="Main Execution Loop." alt="" coords="741,353,856,380"/>
<area shape="poly" title=" " alt="" coords="988,321,856,356,855,350,983,322"/>
<area shape="poly" title=" " alt="" coords="724,355,693,344,654,313,621,277,579,215,581,210,625,273,658,309,696,339,729,355"/>
<area shape="poly" title=" " alt="" coords="512,180,447,158,447,153,518,179"/>
<area shape="rect" href="namespace_control_logic.html#a0c732b28cf691fb77359c80a0c000665" title="Check Boot Mode (Button Press at Startup)." alt="" coords="1489,408,1674,435"/>
<area shape="poly" title=" " alt="" coords="1711,406,1675,413,1674,407,1706,406"/>
<area shape="rect" href="namespace_control_logic.html#ae855e1aa5895afa9999a3b9e6874e1e2" title="Load settings from Flash memory." alt="" coords="1492,459,1670,485"/>
<area shape="poly" title=" " alt="" coords="1775,411,1677,449,1638,461,1637,455,1675,444,1770,412"/>
<area shape="rect" href="namespace_control_logic.html#a3aed4ef4cb26632467a000c0130b11b4" title="Action helper to update filament metadata." alt="" coords="1495,341,1668,384"/>
<area shape="poly" title=" " alt="" coords="1706,378,1668,376,1668,370,1711,378"/>
<area shape="rect" href="main_8cpp.html#a4fc01d736fe50cf5b977f755b675f11d" title="Arduino Setup Function." alt="" coords="1032,400,1085,427"/>
<area shape="poly" title=" " alt="" coords="1471,420,1086,416,1086,411,1476,419"/>
<area shape="rect" href="namespace_control_logic.html#a1da226a05b7a8c46e16a840900265c03" title="Initialize ControlLogic." alt="" coords="1267,459,1387,485"/>
<area shape="poly" title=" " alt="" coords="1474,472,1388,475,1388,469,1479,472"/>
<area shape="poly" title=" " alt="" coords="1249,456,1086,422,1086,416,1255,456"/>
<area shape="rect" href="class_control_logic_1_1_m_o_t_o_r___p_i_d.html#a9edc970b22d74b15904b4929d862cc07" title=" " alt="" coords="983,451,1134,493"/>
<area shape="poly" title=" " alt="" coords="1249,472,1135,475,1135,469,1254,472"/>
<area shape="rect" href="namespace_klipper_c_l_i.html#a76547f35e246989843f1870c760ea514" title="Handler for SET_FILAMENT_INFO command." alt="" coords="1215,291,1439,317"/>
<area shape="poly" title=" " alt="" coords="1477,339,1438,332,1389,321,1389,315,1439,327,1483,339"/>
<area shape="rect" href="namespace_control_logic.html#ada1dd6f18fca06d8b26836f4788ab0ad" title="Handler for Set Filament Info (0x08 &#45; Short)." alt="" coords="1242,341,1412,384"/>
<area shape="poly" title=" " alt="" coords="1477,363,1413,365,1412,360,1482,363"/>
<area shape="poly" title=" " alt="" coords="1197,304,1149,307,1148,301,1202,304"/>
<area shape="poly" title=" " alt="" coords="932,203,648,202,647,197,937,201"/>
<area shape="rect" href="namespace_control_logic.html#a0c4206af909c8128bc68eb6a1bcfa16e" title="Handler for Heartbeat (0x20)." alt="" coords="695,236,902,263"/>
<area shape="poly" title=" " alt="" coords="963,220,877,238,876,233,968,219"/>
<area shape="rect" href="namespace_control_logic.html#a412a7a597ff3c04c0ea1480094600ef4" title="Handler for Online Detect (0x05)." alt="" coords="705,287,892,329"/>
<area shape="poly" title=" " alt="" coords="1019,222,903,277,871,289,870,284,901,272,1014,224"/>
<area shape="rect" href="namespace_command_router.html#a329f0a7e2f53debf5c7cb5f47579151b" title="Route an incoming command to its specific handler." alt="" coords="717,135,880,161"/>
<area shape="poly" title=" " alt="" coords="974,186,865,165,865,159,979,185"/>
<area shape="poly" title=" " alt="" coords="718,166,635,187,633,182,723,164"/>
</map>
</div>

</div>
</div>
<a name="doc-var-members" id="doc-var-members"></a><h2 id="header-doc-var-members" class="groupheader">Variable Documentation</h2>
<a id="a835e55cf06ad6373a5dc362d5640da33" name="a835e55cf06ad6373a5dc362d5640da33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a835e55cf06ad6373a5dc362d5640da33">&#9670;&#160;</a></span>_time64_time_H</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t _time64_time_H = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="time64_8cpp_source.html#l00003">3</a> of file <a class="el" href="time64_8cpp_source.html">time64.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="time64_8cpp_source.html#l00018">get_time64()</a>.</p>

</div>
</div>
<a id="ad65dcffef922558683d14a454d6c03d4" name="ad65dcffef922558683d14a454d6c03d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad65dcffef922558683d14a454d6c03d4">&#9670;&#160;</a></span>_time64_time_L</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t _time64_time_L = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="time64_8cpp_source.html#l00004">4</a> of file <a class="el" href="time64_8cpp_source.html">time64.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="time64_8cpp_source.html#l00018">get_time64()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a href="time64_8cpp.html">time64.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
