\doxysection{Debug\+\_\+log.\+cpp}
\hypertarget{_debug__log_8cpp_source}{}\label{_debug__log_8cpp_source}\index{src/Debug\_log.cpp@{src/Debug\_log.cpp}}
\mbox{\hyperlink{_debug__log_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00001}00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_debug__log_8h}{Debug\_log.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00002}00002\ \textcolor{preprocessor}{\#include\ <inttypes.h>}}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00003}00003\ }
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00004}00004\ \textcolor{preprocessor}{\#ifdef\ Debug\_log\_on}}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00005}\mbox{\hyperlink{_debug__log_8cpp_a4510172574421ff4239385791d5aaf1c}{00005}}\ uint32\_t\ \mbox{\hyperlink{_debug__log_8cpp_a4510172574421ff4239385791d5aaf1c}{stack}}[1000];}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00006}00006\ \textcolor{comment}{//\ mbed::Timer\ USB\_debug\_timer;}}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00007}\mbox{\hyperlink{_debug__log_8cpp_acdb2af6c2044205c6f29e34da75b4daa}{00007}}\ DMA\_InitTypeDef\ \mbox{\hyperlink{_debug__log_8cpp_acdb2af6c2044205c6f29e34da75b4daa}{Debug\_log\_DMA\_InitStructure}};}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00008}00008\ }
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00016}\mbox{\hyperlink{_debug__log_8cpp_a7a92276403fd993ad4d913f47c5998cf}{00016}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{_debug__log_8cpp_a7a92276403fd993ad4d913f47c5998cf}{Debug\_log\_init}}()}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00017}00017\ \{}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00019}00019\ \ \ \ \ GPIO\_InitTypeDef\ GPIO\_InitStructure\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00020}00020\ \ \ \ \ USART\_InitTypeDef\ USART\_InitStructure\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00021}00021\ \ \ \ \ NVIC\_InitTypeDef\ NVIC\_InitStructure\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00022}00022\ }
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00023}00023\ \ \ \ \ RCC\_APB1PeriphClockCmd(RCC\_APB1Periph\_USART3,\ ENABLE);}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00024}00024\ \ \ \ \ RCC\_APB2PeriphClockCmd(RCC\_APB2Periph\_GPIOB,\ ENABLE);}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00025}00025\ \ \ \ \ RCC\_AHBPeriphClockCmd(RCC\_AHBPeriph\_DMA1,\ ENABLE);}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00026}00026\ }
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00027}00027\ \ \ \ \ \textcolor{comment}{//\ USART3\ TX-\/-\/>B.10\ \ RX-\/-\/>B.11}}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00028}00028\ \ \ \ \ GPIO\_InitStructure.GPIO\_Pin\ =\ GPIO\_Pin\_10;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00029}00029\ \ \ \ \ GPIO\_InitStructure.GPIO\_Speed\ =\ GPIO\_Speed\_50MHz;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00030}00030\ \ \ \ \ GPIO\_InitStructure.GPIO\_Mode\ =\ GPIO\_Mode\_AF\_PP;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00031}00031\ \ \ \ \ GPIO\_Init(GPIOB,\ \&GPIO\_InitStructure);}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00032}00032\ \ \ \ \ GPIO\_InitStructure.GPIO\_Pin\ =\ GPIO\_Pin\_11;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00033}00033\ \ \ \ \ GPIO\_InitStructure.GPIO\_Mode\ =\ GPIO\_Mode\_IPU;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00034}00034\ \ \ \ \ GPIO\_Init(GPIOB,\ \&GPIO\_InitStructure);}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00036}00036\ \ \ \ \ USART\_InitStructure.USART\_BaudRate\ =\ \mbox{\hyperlink{_debug__log_8h_a9185aae582f81bf058006f1dc55fd4ba}{Debug\_log\_baudrate}};}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00037}00037\ \ \ \ \ USART\_InitStructure.USART\_WordLength\ =\ USART\_WordLength\_9b;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00038}00038\ \ \ \ \ USART\_InitStructure.USART\_StopBits\ =\ USART\_StopBits\_1;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00039}00039\ \ \ \ \ USART\_InitStructure.USART\_Parity\ =\ USART\_Parity\_Even;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00040}00040\ \ \ \ \ USART\_InitStructure.USART\_HardwareFlowControl\ =\ USART\_HardwareFlowControl\_None;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00041}00041\ \ \ \ \ USART\_InitStructure.USART\_Mode\ =\ USART\_Mode\_Tx\ |\ USART\_Mode\_Rx;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00043}00043\ \ \ \ \ USART\_Init(USART3,\ \&USART\_InitStructure);}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00044}00044\ \ \ \ \ USART\_ITConfig(USART3,\ USART\_IT\_RXNE,\ ENABLE);}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00046}00046\ \ \ \ \ NVIC\_InitStructure.NVIC\_IRQChannel\ =\ USART3\_IRQn;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00047}00047\ \ \ \ \ NVIC\_InitStructure.NVIC\_IRQChannelPreemptionPriority\ =\ 1;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00048}00048\ \ \ \ \ NVIC\_InitStructure.NVIC\_IRQChannelSubPriority\ =\ 1;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00049}00049\ \ \ \ \ NVIC\_InitStructure.NVIC\_IRQChannelCmd\ =\ ENABLE;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00050}00050\ \ \ \ \ NVIC\_Init(\&NVIC\_InitStructure);}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00052}00052\ \ \ \ \ \textcolor{comment}{//\ Configure\ DMA1\ channel\ 2\ for\ USART3\ TX}}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00053}00053\ \ \ \ \ \mbox{\hyperlink{_debug__log_8cpp_acdb2af6c2044205c6f29e34da75b4daa}{Debug\_log\_DMA\_InitStructure}}.DMA\_PeripheralBaseAddr\ =\ (uint32\_t)\&USART3-\/>DATAR;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00054}00054\ \ \ \ \ \mbox{\hyperlink{_debug__log_8cpp_acdb2af6c2044205c6f29e34da75b4daa}{Debug\_log\_DMA\_InitStructure}}.DMA\_MemoryBaseAddr\ =\ (uint32\_t)0;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00055}00055\ \ \ \ \ \mbox{\hyperlink{_debug__log_8cpp_acdb2af6c2044205c6f29e34da75b4daa}{Debug\_log\_DMA\_InitStructure}}.DMA\_DIR\ =\ DMA\_DIR\_PeripheralDST;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00056}00056\ \ \ \ \ \mbox{\hyperlink{_debug__log_8cpp_acdb2af6c2044205c6f29e34da75b4daa}{Debug\_log\_DMA\_InitStructure}}.DMA\_Mode\ =\ DMA\_Mode\_Normal;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00057}00057\ \ \ \ \ \mbox{\hyperlink{_debug__log_8cpp_acdb2af6c2044205c6f29e34da75b4daa}{Debug\_log\_DMA\_InitStructure}}.DMA\_PeripheralInc\ =\ DMA\_PeripheralInc\_Disable;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00058}00058\ \ \ \ \ \mbox{\hyperlink{_debug__log_8cpp_acdb2af6c2044205c6f29e34da75b4daa}{Debug\_log\_DMA\_InitStructure}}.DMA\_MemoryInc\ =\ DMA\_MemoryInc\_Enable;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00059}00059\ \ \ \ \ \mbox{\hyperlink{_debug__log_8cpp_acdb2af6c2044205c6f29e34da75b4daa}{Debug\_log\_DMA\_InitStructure}}.DMA\_Priority\ =\ DMA\_Priority\_Low;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00060}00060\ \ \ \ \ \mbox{\hyperlink{_debug__log_8cpp_acdb2af6c2044205c6f29e34da75b4daa}{Debug\_log\_DMA\_InitStructure}}.DMA\_M2M\ =\ DMA\_M2M\_Disable;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00061}00061\ \ \ \ \ \mbox{\hyperlink{_debug__log_8cpp_acdb2af6c2044205c6f29e34da75b4daa}{Debug\_log\_DMA\_InitStructure}}.DMA\_MemoryDataSize\ =\ DMA\_MemoryDataSize\_Byte;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00062}00062\ \ \ \ \ \mbox{\hyperlink{_debug__log_8cpp_acdb2af6c2044205c6f29e34da75b4daa}{Debug\_log\_DMA\_InitStructure}}.DMA\_PeripheralDataSize\ =\ DMA\_PeripheralDataSize\_Byte;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00063}00063\ \ \ \ \ \mbox{\hyperlink{_debug__log_8cpp_acdb2af6c2044205c6f29e34da75b4daa}{Debug\_log\_DMA\_InitStructure}}.DMA\_BufferSize\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00065}00065\ \ \ \ \ USART\_Cmd(USART3,\ ENABLE);}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00066}00066\ \}}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00067}00067\ }
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00068}\mbox{\hyperlink{_debug__log_8cpp_a40abb8220d2bc10f65e461349fa855f8}{00068}}\ uint64\_t\ \mbox{\hyperlink{_debug__log_8cpp_a40abb8220d2bc10f65e461349fa855f8}{Debug\_log\_count64}}()}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00069}00069\ \{}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00070}00070\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00071}00071\ \}}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00072}00072\ }
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00073}\mbox{\hyperlink{_debug__log_8cpp_a8fec16f80089524e659fa1d0942ebe7d}{00073}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{_debug__log_8cpp_a8fec16f80089524e659fa1d0942ebe7d}{Debug\_log\_time}}()}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00074}00074\ \{}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00075}00075\ \}}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00076}00076\ }
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00082}\mbox{\hyperlink{_debug__log_8cpp_abe437f2b5ead512cd88794fc3fc0088f}{00082}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{_debug__log_8cpp_abe437f2b5ead512cd88794fc3fc0088f}{Debug\_log\_write}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *data)}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00083}00083\ \{}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00084}00084\ }
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00085}00085\ \ \ \ \ \textcolor{keywordtype}{int}\ i\ =\ strlen((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *)data);}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00086}00086\ \ \ \ \ \mbox{\hyperlink{_debug__log_8cpp_a40d01633152870024b16280c9a1496df}{Debug\_log\_write\_num}}((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *)data,\ i);}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00087}00087\ \}}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00088}00088\ }
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00097}\mbox{\hyperlink{_debug__log_8cpp_a40d01633152870024b16280c9a1496df}{00097}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{_debug__log_8cpp_a40d01633152870024b16280c9a1496df}{Debug\_log\_write\_num}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *data,\ \textcolor{keywordtype}{int}\ num)}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00098}00098\ \{}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00099}00099\ \ \ \ \ DMA\_DeInit(DMA1\_Channel2);}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00100}00100\ \ \ \ \ \textcolor{comment}{//\ Configure\ DMA1\ channel\ 2\ for\ USART3\ TX}}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00101}00101\ \ \ \ \ \mbox{\hyperlink{_debug__log_8cpp_acdb2af6c2044205c6f29e34da75b4daa}{Debug\_log\_DMA\_InitStructure}}.DMA\_MemoryBaseAddr\ =\ (uint32\_t)data;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00102}00102\ \ \ \ \ \mbox{\hyperlink{_debug__log_8cpp_acdb2af6c2044205c6f29e34da75b4daa}{Debug\_log\_DMA\_InitStructure}}.DMA\_BufferSize\ =\ num;}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00103}00103\ \ \ \ \ DMA\_Init(DMA1\_Channel2,\ \&\mbox{\hyperlink{_debug__log_8cpp_acdb2af6c2044205c6f29e34da75b4daa}{Debug\_log\_DMA\_InitStructure}});}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00104}00104\ \ \ \ \ DMA\_Cmd(DMA1\_Channel2,\ ENABLE);}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00105}00105\ \ \ \ \ \textcolor{comment}{//\ 使能USART3\ DMA发送}}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00106}00106\ \ \ \ \ USART\_DMACmd(USART3,\ USART\_DMAReq\_Tx,\ ENABLE);}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00107}00107\ \}}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00108}00108\ }
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00109}\mbox{\hyperlink{_debug__log_8cpp_a0d108a3468b2051548183ee5ca2158a0}{00109}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{_debug__log_8cpp_a0d108a3468b2051548183ee5ca2158a0}{USART3\_IRQHandler}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00110}00110\ \{}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00111}00111\ \ \ \ \ \textcolor{keywordflow}{if}\ (USART\_GetITStatus(USART3,\ USART\_IT\_RXNE)\ !=\ RESET)}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00112}00112\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00113}00113\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ uint8\_t\ x\ =}}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00114}00114\ \ \ \ \ \ \ \ \ USART\_ReceiveData(USART3);}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00115}00115\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ USART\_SendData(USART3,\ x);}}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00116}00116\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00117}00117\ \}}
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00118}00118\ }
\DoxyCodeLine{\Hypertarget{_debug__log_8cpp_source_l00119}00119\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
